if (self.CavalryLogger) { CavalryLogger.start_js(["WI3fV"]); }

__d("ComposedEntityMutability",[],(function a(b,c,d,e,f,g){f.exports={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2};}),null);
__d("MercuryGenericConstants",[],(function a(b,c,d,e,f,g){f.exports={MAX_THREAD_NAME_LENGTH:250};}),null);
__d("MessagingThreadCustomizationSource",[],(function a(b,c,d,e,f,g){f.exports={ADMIN_MSG_CHANGE_LINK:"admin_msg",THREAD_INLINE:"thread_inline",JOURNEY_PROMPT:"journey_prompt",JOURNEY_PROMPT_WRITE_IN:"journey_prompt_write_in",PROMO_LINK:"promo_link",SETTINGS:"thread_settings",USER_INFO_ACTION_SHEET:"user_info_action_sheet",ROOM_CREATION:"room_creation"};}),null);
__d("MessengerDotComPromotionActionURL",[],(function a(b,c,d,e,f,g){f.exports={turn_on_notification:"TurnOnNotification",messengerdotcom_cell_cutover_qp:"messengerdotcomCellCutoverQp"};}),null);
__d("MessengerInbox2UnitType",[],(function a(b,c,d,e,f,g){f.exports={ACTIVE_NOW:"1702060250031255",ALL_CONTACTS:"181516655603694",ALL_REMAINING_THREADS:"1553637598292592",ANNOUNCEMENT:"1554751858153522",BIRTHDAYS:"444523712420688",BMR:"236766086711892",BOTSYMM:"219309241797996",BYMM:"977757422301634",CAMERA_ROLL:"1667645653518937",CONVERSATION_REQUESTS:"849346485182969",CUSTOMIZED_GROUPS:"1777531309203296",CYMK:"1773727359523460",DIRECT_M:"1632976573662274",FEATURED_STICKER_PACKS:"112107225855321",FRIEND_STORIES:"1565724067055200",GAMES_RECOMMENDATION:"527207557478641",GET_STARTED_SUGGESTED_CONTACTS:"144141402662646",GROUPS:"268379460187635",MESSAGE_REQUEST_THREADS:"1032277756851915",MESSENGER_ADS:"1257891170941846",MONTAGE_COMPOSER:"548653741981572",MULTIACCOUNT:"140931109675274",MOST_RECENT_THREADS:"1674434246165228",PHOTO_REMINDERS:"1161184033900246",PYMM:"947827448626337",INVITE:"113246789103775",RECENTLY_ADDED_FRIENDS:"1576460689312390",RECENTLY_CLICKED_LINKS:"1570987926559251",RECENT_SMS_THREADS:"1138747646163867",RECENTLY_WATCHED_VIDEOS:"1743612819204904",ROOM_SUGGESTIONS:"178585572548976",ROOMS:"1100090256693067",RTC_RECOMMENDATION:"1077149622346030",SUBSCRIPTION_CONTENTS:"1599726440337302",SUBSCRIPTION_CONTENTS_MORE:"193497917768814",SUBSCRIPTION_NUX:"1032732696802753",STALE_MESSAGES:"512235432291290",TRENDING_GIFS:"972340172846515",UNREAD_MESSAGES:"860636320720716",VIDEOS_ABOUT:"558474001020112",REMINDERS:"1836450139923369",COMBINED_DIRECT_M:"225422574547147",BIRTHDAYS_DIRECT_M:"1606134436356580",MESSENGER_EVENTS_DIRECT_M:"978540982268714",MY_FB_EVENTS_DIRECT_M:"1832813540335901"};}),null);
__d('Video.react',['React','ReactDOM'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.componentWillUpdate=function(l,m){'use strict';if(l.playbackRate){var n=c('ReactDOM').findDOMNode(this.refs.video);n.playbackRate=l.playbackRate;}};k.prototype.render=function(){'use strict';return (c('React').createElement('video',babelHelpers['extends']({},this.props,{ref:'video'})));};function k(){'use strict';h.apply(this,arguments);}k.propTypes={autoPlay:j.bool,controls:j.bool,height:j.oneOfType([j.string,j.number]),loop:j.bool,muted:j.bool,onAbort:j.func,onCanPlay:j.func,onCanPlayThrough:j.func,onDurationChange:j.func,onEmptied:j.func,onEncrypted:j.func,onEnded:j.func,onError:j.func,onLoadedData:j.func,onLoadedMetadata:j.func,onLoadStart:j.func,onPause:j.func,onPlay:j.func,onPlaying:j.func,onProgress:j.func,onRateChange:j.func,onSeeked:j.func,onSeeking:j.func,onStalled:j.func,onSuspend:j.func,onTimeUpdate:j.func,onVolumeChange:j.func,onWaiting:j.func,playbackRate:j.number,poster:j.string,src:j.string.isRequired,width:j.oneOfType([j.string,j.number])};f.exports=k;}),null);
__d('EmojiStateStore',['EmojiActions','EmojiDispatcher','EmojiState','FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('EmojiDispatcher'));this.$EmojiStateStore2=false;}j.prototype.getState=function(){var k=c('EmojiState').getMRUCategory();return {currentCategory:this.$EmojiStateStore4,emojiColor:this.$EmojiStateStore3,mruCategory:[k],threadID:this.$EmojiStateStore1,trayDataReady:this.$EmojiStateStore2};};j.prototype.__onDispatch=function(k){var l=c('EmojiActions').Types;switch(k.type){case l.GET_EMOJI_COLOR:c('EmojiState').getEmojiColor();break;case l.EMOJI_COLOR_READY:this.$EmojiStateStore3=k.color;break;case l.CHANGE_EMOJI_COLOR:c('EmojiState').changeEmojiColor(k.color);this.$EmojiStateStore3=k.color;break;case l.CHANGE_CURRENT_CATEGORY:this.$EmojiStateStore4=k.currentCategory;break;case l.UPDATE_TRAY_DATA:break;case l.TRAY_DATA_READY:this.$EmojiStateStore2=true;break;}this.__emitChange();};f.exports=new j();}),null);
__d('MessengerContentSearchDataTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerContentSearchDataLoggerConfig',this.$MessengerContentSearchDataTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerContentSearchDataLoggerConfig',this.$MessengerContentSearchDataTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerContentSearchDataTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerContentSearchDataTypedLogger1=babelHelpers['extends']({},this.$MessengerContentSearchDataTypedLogger1,j);return this;};h.prototype.setAppID=function(j){this.$MessengerContentSearchDataTypedLogger1.appid=j;return this;};h.prototype.setClienttime=function(j){this.$MessengerContentSearchDataTypedLogger1.clienttime=j;return this;};h.prototype.setCountry=function(j){this.$MessengerContentSearchDataTypedLogger1.country=j;return this;};h.prototype.setMessageID=function(j){this.$MessengerContentSearchDataTypedLogger1.message_id=j;return this;};h.prototype.setMessageTimestamp=function(j){this.$MessengerContentSearchDataTypedLogger1.message_timestamp=j;return this;};h.prototype.setNumResults=function(j){this.$MessengerContentSearchDataTypedLogger1.num_results=j;return this;};h.prototype.setReadableTimestamp=function(j){this.$MessengerContentSearchDataTypedLogger1.readable_timestamp=j;return this;};h.prototype.setResultIndex=function(j){this.$MessengerContentSearchDataTypedLogger1.result_index=j;return this;};h.prototype.setSearchOutcome=function(j){this.$MessengerContentSearchDataTypedLogger1.search_outcome=j;return this;};h.prototype.setSearchTerm=function(j){this.$MessengerContentSearchDataTypedLogger1.search_term=j;return this;};h.prototype.setSearchType=function(j){this.$MessengerContentSearchDataTypedLogger1.search_type=j;return this;};h.prototype.setThreadFbid=function(j){this.$MessengerContentSearchDataTypedLogger1.thread_fbid=j;return this;};h.prototype.setVC=function(j){this.$MessengerContentSearchDataTypedLogger1.vc=j;return this;};var i={appid:true,clienttime:true,country:true,message_id:true,message_timestamp:true,num_results:true,readable_timestamp:true,result_index:true,search_outcome:true,search_term:true,search_type:true,thread_fbid:true,vc:true};f.exports=h;}),null);
__d('MessengerMontageClientTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerMontageClientLoggerConfig',this.$MessengerMontageClientTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerMontageClientLoggerConfig',this.$MessengerMontageClientTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerMontageClientTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerMontageClientTypedLogger1=babelHelpers['extends']({},this.$MessengerMontageClientTypedLogger1,j);return this;};h.prototype.setContentType=function(j){this.$MessengerMontageClientTypedLogger1.content_type=j;return this;};h.prototype.setCurrentPosition=function(j){this.$MessengerMontageClientTypedLogger1.current_position=j;return this;};h.prototype.setEntryPoint=function(j){this.$MessengerMontageClientTypedLogger1.entry_point=j;return this;};h.prototype.setEvent=function(j){this.$MessengerMontageClientTypedLogger1.event=j;return this;};h.prototype.setExitAction=function(j){this.$MessengerMontageClientTypedLogger1.exit_action=j;return this;};h.prototype.setMessageDuration=function(j){this.$MessengerMontageClientTypedLogger1.message_duration=j;return this;};h.prototype.setMessageSource=function(j){this.$MessengerMontageClientTypedLogger1.message_source=j;return this;};h.prototype.setMessageStartTime=function(j){this.$MessengerMontageClientTypedLogger1.message_start_time=j;return this;};h.prototype.setMid=function(j){this.$MessengerMontageClientTypedLogger1.mid=j;return this;};h.prototype.setOwnerID=function(j){this.$MessengerMontageClientTypedLogger1.owner_id=j;return this;};h.prototype.setQueueType=function(j){this.$MessengerMontageClientTypedLogger1.queue_type=j;return this;};h.prototype.setTotalQueue=function(j){this.$MessengerMontageClientTypedLogger1.total_queue=j;return this;};h.prototype.setVC=function(j){this.$MessengerMontageClientTypedLogger1.vc=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$MessengerMontageClientTypedLogger1=babelHelpers['extends']({},this.$MessengerMontageClientTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={content_type:true,current_position:true,entry_point:true,event:true,exit_action:true,message_duration:true,message_source:true,message_start_time:true,mid:true,owner_id:true,queue_type:true,total_queue:true,vc:true};f.exports=h;}),null);
__d('MercurySendMessageHandler',['MercuryMessageActions','MercuryMessageObject','MercurySingletonProvider'],(function a(b,c,d,e,f,g){'use strict';h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};function h(j){this.$MercurySendMessageHandler1=j;this.$MercurySendMessageHandler2=c('MercuryMessageActions').getForFBID(this.$MercurySendMessageHandler1);this.$MercurySendMessageHandler3=c('MercuryMessageObject').getForFBID(this.$MercurySendMessageHandler1);}h.prototype.sendPlainTextMessage=function(j,k,l){var m=this.$MercurySendMessageHandler3.constructUserGeneratedMessageObject(k,l,j);this.$MercurySendMessageHandler2.send(m);};h.prototype.sendSticker=function(j,k,l){var m=this.$MercurySendMessageHandler3.constructStickerMessageObject(k,l,j);this.$MercurySendMessageHandler2.send(m);};h.prototype.sendAttachment=function(j,k,l){var m=this.$MercurySendMessageHandler3.constructAttachmentMessageObject(l,j);this.$MercurySendMessageHandler2.addAttachmentPlaceholder(m,k.upload_id,k);};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('ChatPageComposerNullState.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function k(l){return (c('React').createElement('div',{className:"_2xh0"},c('React').createElement('div',{className:"_2xh4 _59w_"},c('React').createElement(c('Link.react'),{className:"_2xh6"+(' '+"_2xh7")+(l.disabled?' '+"_5vsu":''),onClick:l.onClick},i._("{name}",[i.param('name',l.title)])))));};f.exports=j;}),null);
__d('MessengerLogo.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){var k=j.color,l=j.size;return (c('React').createElement('div',{style:{width:l,height:l}},c('React').createElement('svg',{viewBox:'0 0 16 16',version:'1.1',xmlns:'http://www.w3.org/2000/svg'},c('React').createElement('g',{transform:'scale(0.02)',fill:'none'},c('React').createElement('path',{fill:k,fillRule:'evenodd',d:'M399.494079,0.00274415094 C178.859771,0.00274415094 0.000304955527,167.227237 0.000304955527,373.508113 C0.000304955527,490.856138 57.8859466,595.562774 148.414028,664.036455 L148.414028,806.983343 L284.747446,731.373854 C321.092046,741.545506 359.609962,747.013481 399.494079,747.013481 C620.128386,747.013481 798.987853,579.788988 798.987853,373.508113 C798.987853,167.227237 620.128386,0.00274415094 399.494079,0.00274415094 M441.568386,500.879189L338.245388 393.558495 139.264956 503.581669 357.419975 272.117619 460.742973 379.437297 659.722389 269.414122z'})))));};f.exports=h;}),null);
__d('MontageProgressBar.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=k.activeIndex,m=k.count,n=k.progressPercent,o=[];for(var p=0;p<m;p++)o.push(c('React').createElement('div',{key:p,className:"_4wd4"+(p===l?' '+"_4wd6":'')},p===l?c('React').createElement('div',{className:"_4wd4 _4wd7",style:{width:n+'%'}}):null));return (c('React').createElement('div',{className:"_4wd8"},o));};f.exports=i;}),null);
__d("XRapidReportingMessageDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/rapid_report\/message\/",{message_id:{type:"String",required:true},story_location:{type:"String",required:true}});}),null);
__d('MontageCard.react',['cx','fbt','AsyncRequest','CssBackgroundImage.react','MessengerMenu.react','MontageProgressBar.react','MessengerPopoverMenu.react','Link.react','NFXStoryLocation','React','Relay','RelayQL','Timestamp.react','XRapidReportingMessageDialogController','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MessengerMenu.react').Item,m=c('React').PropTypes,n=['montage_camera','montage_composition'],o=function q(r){return r.stopPropagation();};j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={progressPercent:0},this.$MontageCard3=function(){var v,w,x=(v=this.props)!=null?(w=v.message)!=null?w.message_id:w:v;if(x){var y=c('XRapidReportingMessageDialogController').getURIBuilder().setString('message_id',x).setString('story_location',c('NFXStoryLocation').MESSENGER_MONTAGE_VIEWER).getURI(),z=new (c('AsyncRequest'))().setURI(y);z.send();}}.bind(this),this.$MontageCard1=function(v){if(v!==this.state.progressPercent)this.setState({progressPercent:v});}.bind(this),r;}p.prototype.render=function(){var q=this.props,r=q.active,s=q.activeIndex,t=q.count,u=q.message;if(!u)return null;var v=u.message_sender.messaging_actor,w=u.timestamp,x=u.message_source_data&&u.message_source_data.message_source,y=n.indexOf(x)===-1,z=c('React').Children.map(this.props.children,function(aa){return c('React').cloneElement(aa,{renderWithBorder:y,onProgress:this.$MontageCard1});}.bind(this));if(y)z=c('React').createElement('div',{className:"_3avs"},z);return c('React').createElement('div',{className:"_5uag _q38",style:{zIndex:r?1:undefined}},z,c('React').createElement('div',{className:"_5uag _1pwf"},c('React').createElement(c('MontageProgressBar.react'),{activeIndex:s,count:t,progressPercent:this.state.progressPercent}),c('React').createElement('div',{className:"_1pwg"},c('React').createElement(c('CssBackgroundImage.react'),{className:"_3cx4",imageURI:v.profile_picture.uri}),c('React').createElement('div',{className:"_1pwn"},c('React').createElement('span',null,v.name),c('React').createElement(c('Timestamp.react'),{className:"_yc_",minimize:true,time:w})),c('React').createElement(c('MessengerPopoverMenu.react'),{className:"_47gp",menu:this.$MontageCard2()},c('React').createElement(c('Link.react'),{'aria-haspopup':'true','aria-label':i._("Opciones de mensaje"),className:"_47gq",onMouseUp:o,onMouseDown:o,role:'button'})))));};p.prototype.$MontageCard2=function(){var q=c('React').createElement(c('MessengerMenu.react'),null,c('React').createElement(l,{label:i._("Denunciar"),onclick:this.$MontageCard3}));return q;};p.propTypes={active:m.bool.isRequired,activeIndex:m.number.isRequired,count:m.number.isRequired,message:m.object,children:m.object};f.exports=c('Relay').createContainer(p,{fragments:{message:function q(){return function(){return {children:[{fieldName:'message_id',kind:'Field',metadata:{},type:'ID'},{children:[{fieldName:'message_source',kind:'Field',metadata:{},type:'String'}],fieldName:'message_source_data',kind:'Field',metadata:{canHaveSubselections:true},type:'MessageSourceData'},{children:[{children:[{fieldName:'name',kind:'Field',metadata:{},type:'String'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:50}},{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:50}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'messaging_actor',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'MessagingActor'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'message_sender',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'MessagingParticipant'},{fieldName:'timestamp',kind:'Field',metadata:{},type:'Time'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageCard_react_MessageRelayQL',type:'UserMessage'};}();}}});}),null);
__d('montageCardWithStandardTimer',['React','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=8000;function j(k){var l,m;return m=l=function(){var n,o;n=babelHelpers.inherits(p,c('React').Component);o=n&&n.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=o.constructor).call.apply(q,[this].concat(t)),this.state={startedTime:0,pausedTime:0},this.$_class1=null,this.$_class3=function(){if(!this.props.paused){var v=(Date.now()-this.state.startedTime)/i*100;this.props.onProgress(v);if(v>=100){this.props.onEnded();return;}}this.$_class1=c('requestAnimationFrame')(this.$_class3);}.bind(this),r;}p.prototype.componentDidMount=function(){'use strict';this.$_class2();};p.prototype.componentDidUpdate=function(){'use strict';this.$_class2();};p.prototype.$_class2=function(){'use strict';if(!this.props.active&&(this.$_class1||this.state.pausedTime)){this.$_class4();}else if(!this.props.paused&&!this.$_class1){this.$_class5();}else if(this.$_class1&&this.props.paused)this.$_class6();};p.prototype.$_class6=function(){'use strict';this.setState({pausedTime:Date.now()});c('cancelAnimationFrame')(this.$_class1);this.$_class1=null;};p.prototype.$_class5=function(){'use strict';var q={startedTime:Date.now()};if(this.state.pausedTime){var r=q.startedTime-this.state.pausedTime,s=this.state.startedTime+r;q={pausedTime:0,startedTime:s};}this.setState(q);this.$_class1=c('requestAnimationFrame')(this.$_class3);};p.prototype.$_class4=function(){'use strict';this.setState({pausedTime:0,startedTime:0});c('cancelAnimationFrame')(this.$_class1);this.$_class1=null;};p.prototype.componentWillUnmount=function(){'use strict';c('cancelAnimationFrame')(this.$_class1);};p.prototype.render=function(){'use strict';var q=this.props,r=q.paused,s=q.onEnded,t=q.onProgress,u=babelHelpers.objectWithoutProperties(q,['paused','onEnded','onProgress']);return c('React').createElement(k,u);};return p;}(),l.propTypes={active:h.bool.isRequired,paused:h.bool.isRequired,onEnded:h.func.isRequired,onProgress:h.func.isRequired},m;}f.exports=j;}),null);
__d('MontageCardPhoto.react',['cx','CssBackgroundImage.react','Image.react','React','Relay','RelayQL','montageCardWithStandardTimer'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return this.props.renderWithBorder?c('React').createElement('div',{className:"_5uag _3p9v"},c('React').createElement(c('Image.react'),{className:"_3p9w",src:this.props.photoAttachment.image.uri})):c('React').createElement(c('CssBackgroundImage.react'),{className:"_5uag",imageURI:this.props.photoAttachment.image.uri});};function l(){i.apply(this,arguments);}l.propTypes={photoAttachment:k.shape({image:k.shape({uri:k.string.isRequired}).isRequired}).isRequired};f.exports=c('Relay').createContainer(c('montageCardWithStandardTimer')(l),{fragments:{photoAttachment:function m(){return function(){return {children:[{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageCardPhoto_react_PhotoAttachmentRelayQL',type:'MessageImage'};}();}}});}),null);
__d('MontageCardSticker.react',['cx','Image.react','React','Relay','RelayQL','montageCardWithStandardTimer'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.sticker.animated_image?this.props.sticker.animated_image.uri:this.props.sticker.image.uri;return (c('React').createElement('div',{className:"_5uag _3p9v"},c('React').createElement(c('Image.react'),{src:m})));};function l(){i.apply(this,arguments);}l.propTypes={sticker:k.shape({animated_image:k.shape({uri:k.string.isRequired}),image:k.shape({uri:k.string.isRequired})}).isRequired};f.exports=c('Relay').createContainer(c('montageCardWithStandardTimer')(l),{fragments:{sticker:function m(){return function(){return {children:[{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'animated_image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageCardSticker_react_StickerRelayQL',type:'Sticker'};}();}}});}),null);
__d('MontageCardText.react',['cx','MessengerTextWithEntities.react','React','Relay','RelayQL','montageCardWithStandardTimer'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement(c('MessengerTextWithEntities.react'),{className:"_5uag _2zz1",customSize:true,renderEmoji:true,text:this.props.userMessage.message.text}));};function l(){i.apply(this,arguments);}l.propTypes={userMessage:k.shape({message:k.shape({text:k.string.isRequired}).isRequired}).isRequired};f.exports=c('Relay').createContainer(c('montageCardWithStandardTimer')(l),{fragments:{userMessage:function m(){return function(){return {children:[{children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'message',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageCardText_react_UserMessageRelayQL',type:'UserMessage'};}();}}});}),null);
__d('MontageCardVideo.react',['cx','Video.react','React','Relay','RelayQL','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MontageCardVideo1=null,this.$MontageCardVideo5=function(){if(this.$MontageCardVideo2&&this.$MontageCardVideo2.readyState>0){var r=this.$MontageCardVideo2.currentTime/this.$MontageCardVideo2.duration*100;this.props.onProgress(r);if(r>=100){this.props.onEnded();return;}}this.$MontageCardVideo1=c('requestAnimationFrame')(this.$MontageCardVideo5);}.bind(this),n;}l.prototype.componentDidMount=function(){this.$MontageCardVideo3();};l.prototype.componentDidUpdate=function(){this.$MontageCardVideo3();};l.prototype.componentWillUnmount=function(){this.$MontageCardVideo4();};l.prototype.$MontageCardVideo3=function(){if(!this.$MontageCardVideo2)return;if(!this.props.paused&&this.$MontageCardVideo2.paused){this.$MontageCardVideo2.play();this.$MontageCardVideo1=c('requestAnimationFrame')(this.$MontageCardVideo5);}else{this.$MontageCardVideo4();if(!this.props.active&&this.$MontageCardVideo2)this.$MontageCardVideo2.currentTime=0;}};l.prototype.$MontageCardVideo4=function(){c('cancelAnimationFrame')(this.$MontageCardVideo1);this.$MontageCardVideo1=null;if(this.$MontageCardVideo2)this.$MontageCardVideo2.pause();};l.prototype.render=function(){return (c('React').createElement(c('Video.react'),{autoPlay:false,className:"_5uag",onEnded:this.props.onEnded,onError:this.props.onEnded,src:this.props.videoAttachment.playable_url,ref:function(m){return this.$MontageCardVideo2=m&&m.refs.video;}.bind(this)}));};l.propTypes={paused:k.bool.isRequired,onEnded:k.func.isRequired,onProgress:k.func.isRequired,videoAttachment:k.shape({playable_url:k.string.isRequired}).isRequired};f.exports=c('Relay').createContainer(l,{fragments:{videoAttachment:function m(){return function(){return {children:[{fieldName:'playable_url',kind:'Field',metadata:{},type:'Url'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageCardVideo_react_VideoAttachmentRelayQL',type:'MessageVideo'};}();}}});}),null);
__d('MontageShouldUpdateReducer',['MontageActions'],(function a(b,c,d,e,f,g){'use strict';var h=c('MontageActions').Types;function i(k,l){var m;switch(l.type){case h.REQUEST_UPDATE:var n=babelHelpers['extends']({},k.needsUpdating,(m={},m[l.threadFBID]=true,m));return babelHelpers['extends']({},k,{needsUpdating:n});}return k;}function j(k,l){switch(l.type){case h.HAS_UPDATED:var m=k.needsUpdating,n=m[l.threadFBID],o=babelHelpers.objectWithoutProperties(m,[l.threadFBID]);return babelHelpers['extends']({},k,{needsUpdating:o});}return k;}f.exports={requestUpdate:i,hasUpdated:j};}),null);
__d('MessengerMobileWindow.react',['cx','MessengerPhotoViewCloseLink.react','React','SpotlightViewer'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.background,o=m.fontSize,p=m.onHide,q=m.open,r=m.children,s=m.onClose,t=babelHelpers.objectWithoutProperties(m,['background','fontSize','onHide','open','children','onClose']);return (c('React').createElement(c('SpotlightViewer'),{onHide:p,open:q,rootClassName:"_7yx"+(n==='light'?' '+"_1lwq":'')},c('React').createElement('div',babelHelpers['extends']({className:"_7yy"},t),c('React').createElement('div',{className:"_7yz"}),c('React').createElement('div',{className:"_7y-"+(o==='auto'?' '+"_5q__":'')},c('React').createElement('div',{className:"_5uag"},r)),c('React').createElement(c('MessengerPhotoViewCloseLink.react'),{onClick:s}))));};function l(){i.apply(this,arguments);}l.defaultProps={background:'light',fontSize:'auto'};l.propTypes={background:k.string.isRequired,fontSize:k.string.isRequired,onClose:k.func.isRequired,onHide:k.func.isRequired,open:k.bool.isRequired};f.exports=l;}),null);
__d('MontageSpotlightViewer.react',['KeyEventController','MessengerMobileWindow.react','MessengerMontageClientTypedLogger','MontageCard.react','MontageCardPhoto.react','MontageCardSticker.react','MontageCardText.react','MontageCardVideo.react','React','Relay','RelayQL','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=300,l={auto_play:'auto_play',click:'click',arrow:'arrow',esc:'esc',click_exit_button:'click_exit_button'},m={next:'_next',prev:'_prev'},n=function q(event,r){if(r=='onkeyup')return c('KeyEventController').filterEventTargets(event,r)&&c('KeyEventController').filterEventModifiers(event,r);return false;};h=babelHelpers.inherits(o,c('React').Component);i=h&&h.prototype;function o(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=i.constructor).call.apply(q,[this].concat(t)),this.state=this.initialState(),this.$MontageSpotlightViewer1=new (c('SubscriptionsHandler'))(),this.$MontageSpotlightViewer2='unknown',this.$MontageSpotlightViewer3=null,this.$MontageSpotlightViewer6=function(){this.setState({paused:Date.now()});}.bind(this),this.$MontageSpotlightViewer7=function(){var v=Date.now()-this.state.paused;if(v<k){this.$MontageSpotlightViewer5(l.click);}else this.setState({paused:0});}.bind(this),this.$MontageSpotlightViewer9=function(){this.setState({cardIndex:0,paused:0,open:false});}.bind(this),this.$MontageSpotlightViewer12=this.$MontageSpotlightViewer5.bind(this,l.auto_play),this.$MontageSpotlightViewer8=function(){this.$MontageSpotlightViewer3=Date.now();}.bind(this),r;}o.prototype.initialState=function(){var q=this.props.messages?this.props.messages.count:1;return {cardIndex:this.props.initialUnreadCount?q-this.props.initialUnreadCount:0,open:true,paused:0};};o.prototype.componentDidMount=function(){this.$MontageSpotlightViewer1.addSubscriptions(c('KeyEventController').registerKey('LEFT',function(){this.$MontageSpotlightViewer4(l.arrow);return false;}.bind(this)),c('KeyEventController').registerKey('RIGHT',function(){this.$MontageSpotlightViewer5(l.arrow);return false;}.bind(this)),c('KeyEventController').registerKey('SPACE',function(){if(!this.state.paused)this.$MontageSpotlightViewer6();return false;}.bind(this)),c('KeyEventController').registerKey('SPACE',function(){this.$MontageSpotlightViewer7();return false;}.bind(this),n));this.$MontageSpotlightViewer8();};o.prototype.render=function(){return c('React').createElement(c('MessengerMobileWindow.react'),{onClose:this.$MontageSpotlightViewer9,onHide:this.props.onHide,onMouseDown:this.$MontageSpotlightViewer6,onMouseUp:this.$MontageSpotlightViewer7,open:this.state.open},this.$MontageSpotlightViewer10());};o.prototype.componentWillUnmount=function(){this.$MontageSpotlightViewer1&&this.$MontageSpotlightViewer1.release();this.$MontageSpotlightViewer1=null;};o.prototype.$MontageSpotlightViewer10=function(){var q=this.props.messages||{edges:[{node:this.props.message}]};return q.edges.map(function(r,s){var t=r.node;if(!t||s<this.state.cardIndex-3||s>this.state.cardIndex+3)return null;var u=t.blob_attachments[0],v=t.sticker,w=this.props.messages?this.props.messages.count:1,x=s===this.state.cardIndex,y=!(x&&!this.state.paused),z=null,aa=u&&u.__typename;if(aa==='MessageImage'){x&&this.$MontageSpotlightViewer11('photo');z=c('React').createElement(c('MontageCardPhoto.react'),{active:x,onEnded:this.$MontageSpotlightViewer12,paused:y,photoAttachment:u});}else if(aa==='MessageVideo'){x&&this.$MontageSpotlightViewer11('video');z=c('React').createElement(c('MontageCardVideo.react'),{active:x,onEnded:this.$MontageSpotlightViewer12,paused:y,videoAttachment:u});}else if(v){x&&this.$MontageSpotlightViewer11('sticker');z=c('React').createElement(c('MontageCardSticker.react'),{active:x,onEnded:this.$MontageSpotlightViewer12,paused:y,sticker:v});}else{x&&this.$MontageSpotlightViewer11('text');z=c('React').createElement(c('MontageCardText.react'),{active:x,onEnded:this.$MontageSpotlightViewer12,paused:y,userMessage:t});}return z?c('React').createElement(c('MontageCard.react'),{active:x,activeIndex:this.state.cardIndex,count:w,key:t.message_id,message:t},z):null;}.bind(this)).filter(Boolean);};o.prototype.$MontageSpotlightViewer11=function(q){this.$MontageSpotlightViewer2=q;};o.prototype.$MontageSpotlightViewer4=function(q){this.logMessageExit(q+m.prev);var r=this.state.cardIndex-1;if(r<0){this.$MontageSpotlightViewer9();return;}this.setState({cardIndex:r,paused:0},this.$MontageSpotlightViewer8);};o.prototype.$MontageSpotlightViewer5=function(q){this.logMessageExit(q+m.next);var r=this.props.messages?this.props.messages.count:1,s=this.state.cardIndex+1;if(s>=r){this.$MontageSpotlightViewer9();return;}this.props.loadMore(1);this.setState({cardIndex:s,paused:0},this.$MontageSpotlightViewer8);};o.prototype.logMessageExit=function(q){var r=Date.now(),s=this.props.messages?this.props.messages.count:1,t=this.props.initialUnreadCount||s,u=this.state.cardIndex-(s-t)+1,v=this.props.initialUnreadCount?'unseen':'seen',w=void 0;if(this.props.messages){var x=this.props.messages.edges[this.state.cardIndex];w=x&&x.node;}else w=this.props.message;if(!w||!this.$MontageSpotlightViewer3)return;var y=r-this.$MontageSpotlightViewer3;new (c('MessengerMontageClientTypedLogger'))().setEvent('message_exit').setMid(w.message_id).setOwnerID(w.message_sender.id).setMessageSource(w.message_source_data&&w.message_source_data.message_source).setExitAction(q).setContentType(this.$MontageSpotlightViewer2).setTotalQueue(t).setQueueType(v).setCurrentPosition(u).setEntryPoint(this.props.entryPoint).setMessageStartTime(this.$MontageSpotlightViewer3).setMessageDuration(y).log();};o.propTypes={entryPoint:j.oneOf(['thread_head','reply_context']),initialUnreadCount:j.number,onHide:j.func.isRequired,loadMore:j.func.isRequired,message:j.object,messages:j.object,relay:j.object.isRequired};var p=function(q,r,s,t,u){return {children:[].concat.apply([],[{fieldName:'message_id',kind:'Field',metadata:{},type:'ID'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],fieldName:'message_sender',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'MessagingParticipant'},{children:[{fieldName:'message_source',kind:'Field',metadata:{},type:'String'}],fieldName:'message_source_data',kind:'Field',metadata:{canHaveSubselections:true},type:'MessageSourceData'},{children:[].concat.apply([],[{fieldName:'__typename',kind:'Field',metadata:{isRequisite:true},type:'String'},c('RelayQL').__frag(s),c('RelayQL').__frag(t),{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}]),fieldName:'blob_attachments',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isPlural:true},type:'MessageBlobAttachment'},{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(u)]),fieldName:'sticker',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Sticker'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(q),c('RelayQL').__frag(r)]),id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageSpotlightViewer_reactRelayQL',type:'UserMessage'};}(c('MontageCard.react').getFragment('message'),c('MontageCardText.react').getFragment('userMessage'),c('MontageCardPhoto.react').getFragment('photoAttachment'),c('MontageCardVideo.react').getFragment('videoAttachment'),c('MontageCardSticker.react').getFragment('sticker'));f.exports=c('Relay').createContainer(o,{fragments:{messages:function q(){return function(r){return {children:[{fieldName:'count',kind:'Field',metadata:{},type:'Int'},{children:[{children:[].concat.apply([],[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(r),{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isRequisite:true},type:'Message'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessagesOfThreadEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageSpotlightViewer_react_MessagesRelayQL',type:'MessagesOfThreadConnection'};}(p);},message:function q(){return p;}}});}),null);
__d('MontageState',[],(function a(b,c,d,e,f,g){'use strict';var h={needsUpdating:{}};f.exports=h;}),null);
__d('MontageStore',['MontageDispatcher','MontageShouldUpdateReducer','MontageState','FluxReduceStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=[].concat(Object.values(c('MontageShouldUpdateReducer')));h=babelHelpers.inherits(k,c('FluxReduceStore'));i=h&&h.prototype;k.prototype.getInitialState=function(){return c('MontageState');};k.prototype.reduce=function(l,m){return j.reduce(function(n,o){return o(n,m);},l);};function k(){h.apply(this,arguments);}f.exports=new k(c('MontageDispatcher'));}),null);
__d('MessengerMarkReadMutation',['RelayMutation','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayMutation'));i=h&&h.prototype;j.prototype.getMutation=function(){return function(){return {calls:[{kind:'Call',metadata:{},name:'message_thread_update_read_state',value:{kind:'CallVariable',callVariableName:'input'}}],children:[{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],kind:'Mutation',metadata:{inputType:'MessageThreadUpdateReadStateData!'},name:'MessengerMarkReadMutation',responseType:'MessageThreadUpdateReadStateResponsePayload'};}();};j.prototype.getVariables=function(){return {actor_id:this.props.actorID,thread_id:this.props.threadID,update_type:'mark_read'};};j.prototype.getFatQuery=function(){return function(){return {children:[{children:[{fieldName:'unread_count',kind:'Field',metadata:{},type:'Int'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'thread',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'MessageThread'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerMarkReadMutationRelayQL',type:'MessageThreadUpdateReadStateResponsePayload'};}();};j.prototype.getConfigs=function(){return [{type:'FIELDS_CHANGE',fieldIDs:{thread:this.props.threadID}}];};j.prototype.getOptimisticResponse=function(){return {thread:{id:this.props.threadID,unread_count:0}};};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MontageThumbnail.react',['cx','CssBackgroundImage.react','MessengerTextWithEntities.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=28,m=21;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;n.prototype.render=function(){return (c('React').createElement('div',{className:"_4bj3"},this.getFirstImage(),this.renderUnreadBadge()));};n.prototype.renderUnreadBadge=function(){return this.props.unread?c('React').createElement('div',{className:"_4bj5",style:{backgroundColor:this.props.customColor}}):null;};n.prototype.getFirstImage=function(){var o=this.props.message;if(!o)return null;if(o.sticker)return this.getImageElement(o.sticker.image);if(o.blob_attachments[0]){var p=o.blob_attachments[0],q=p.image||p.videoImage||p.mediaImage;if(q)return this.getImageElement(q);}if(o.message.text)return (c('React').createElement(c('MessengerTextWithEntities.react'),{className:"_4bj6 _4bj9",customSize:true,renderEmoji:true,style:{height:l,width:m},text:o.message.text}));return null;};n.prototype.getImageElement=function(o){return (c('React').createElement(c('CssBackgroundImage.react'),{className:"_4bj6",height:l,imageURI:o.uri,width:m}));};function n(){i.apply(this,arguments);}n.propTypes={customColor:k.string,message:k.object.isRequired,unread:k.bool.isRequired};f.exports=c('Relay').createContainer(n,{fragments:{message:function o(p){return function(q,r,s,t,u,v,w,x){return {children:[{children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'message',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{children:[{calls:[{kind:'Call',metadata:{type:'Int'},name:'height',value:c('RelayQL').__var(q)},{kind:'Call',metadata:{type:'Int'},name:'width',value:c('RelayQL').__var(r)}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'sticker',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Sticker'},{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{alias:'mediaImage',calls:[{kind:'Call',metadata:{type:'Int'},name:'height',value:c('RelayQL').__var(s)},{kind:'Call',metadata:{type:'Int'},name:'width',value:c('RelayQL').__var(t)}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'Media',type:'Media'},{children:[{alias:'videoImage',calls:[{kind:'Call',metadata:{type:'Int'},name:'height',value:c('RelayQL').__var(u)},{kind:'Call',metadata:{type:'Int'},name:'width',value:c('RelayQL').__var(v)}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageVideo',type:'MessageVideo'},{children:[{calls:[{kind:'Call',metadata:{type:'Int'},name:'height',value:c('RelayQL').__var(w)},{kind:'Call',metadata:{type:'Int'},name:'width',value:c('RelayQL').__var(x)}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageImage',type:'MessageImage'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],fieldName:'blob_attachments',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isPlural:true},type:'MessageBlobAttachment'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageThumbnail_react_MessageRelayQL',type:'UserMessage'};}(l,m,l,m,l,m,l,m);}}});}),null);
__d('MontageViewerSingleThread.react',['MontageSpotlightViewer.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MontageViewerSingleThread1=function(q){var r=this.props.montageThread.messages.count,s=this.props.relay.variables.count;if(s<r){var t=Math.min(s+q,r);this.props.relay.setVariables({count:t});}}.bind(this),m;}k.prototype.render=function(){return this.props.open?c('React').createElement(c('MontageSpotlightViewer.react'),{entryPoint:'reply_context',initialUnreadCount:this.props.unreadCount,loadMore:this.$MontageViewerSingleThread1,onHide:this.props.onHide,messages:this.props.montageThread.messages}):null;};k.propTypes={open:j.bool.isRequired,onHide:j.func.isRequired,montageThread:j.object.isRequired,relay:j.object.isRequired,unreadCount:j.number.isRequired};f.exports=c('Relay').createContainer(k,{initialVariables:{count:100},fragments:{montageThread:function l(){return function(m){return {children:[{calls:[{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[c('RelayQL').__frag(m)]),fieldName:'messages',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'MessagesOfThreadConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageViewerSingleThread_react_MontageThreadRelayQL',type:'MessageThread'};}(c('MontageSpotlightViewer.react').getFragment('messages'));}}});}),null);
__d('MontageThreadView.react',['cssVar','cx','fbt','CurrentUser','MessengerEnvironment','MessengerLogo.react','MessengerMarkReadMutation','MontageThumbnail.react','MontageViewerSingleThread.react','React','Relay','RelayQL','Timestamp.react','convertMIGColorToFIGColor','idx'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={showMontage:false},this.$MontageThreadView1=function(){this.setState({showMontage:true});}.bind(this),this.$MontageThreadView2=function(){this.setState({showMontage:false});this.props.relay.commitUpdate(new (c('MessengerMarkReadMutation'))({threadID:this.props.threadMessages.montage_thread.id,actorID:c('CurrentUser').getID()}));}.bind(this),p;}n.prototype.componentDidMount=function(){if(this.props.threadMessages)this.props.onResize&&this.props.onResize();var o=this.getMontageThreadID();if(o)this.props.setThreadID&&this.props.setThreadID(o);};n.prototype.componentDidUpdate=function(o){if(o.threadMessages!==this.props.threadMessages)this.props.onResize&&this.props.onResize();};n.prototype.render=function(){var o=this.getFirstMontageMessage();if(!o)return null;var p=this.getCustomColor(),q=this.getUnread();return c('React').createElement('a',{className:"_5no5",href:'#',onClick:this.$MontageThreadView1,role:'button'},c('React').createElement(c('MontageThumbnail.react'),{customColor:p,message:o,unread:q}),c('React').createElement('div',{className:"_1sui"},this.renderHeader(q,p),c('React').createElement('span',{className:"_1suk"},c('React').createElement(c('Timestamp.react'),{minimize:true,time:this.getTimestamp()}))),this.renderLogo(),this.renderModal());};n.prototype.renderModal=function(){return this.state.showMontage?c('React').createElement(c('MontageViewerSingleThread.react'),{onHide:this.$MontageThreadView2,open:this.state.showMontage,montageThread:this.props.threadMessages.montage_thread,unreadCount:this.props.threadMessages.montage_thread.unread_count}):null;};n.prototype.renderLogo=function(){return c('MessengerEnvironment').messengerui?null:c('React').createElement(c('MessengerLogo.react'),{color:"rgba(0, 0, 0, .3)",size:'17px'});};n.prototype.renderHeader=function(o,p){return o?c('React').createElement('h1',{className:"_1suj",style:{color:p}},j._("Mira las actualizaciones de {person_with_montage}",[j.param('person_with_montage',this.getAuthorName())])):null;};n.prototype.getAuthorName=function(){var o,p,q,r;return (o=this.props)!=null?(p=o.threadMessages)!=null?(q=p.montage_thread)!=null?(r=q.montage_author)!=null?r.short_name:r:q:p:o;};n.prototype.getFirstMontageMessage=function(){var o,p,q,r,s,t;return (o=this.props)!=null?(p=o.threadMessages)!=null?(q=p.montage_thread)!=null?(r=q.messages)!=null?(s=r.edges)!=null?(t=s[0])!=null?t.node:t:s:r:q:p:o;};n.prototype.getTimestamp=function(){var o=this.getFirstMontageMessage();return o&&o.timestamp;};n.prototype.getCustomColor=function(){var o,p,q,r=(o=this.props)!=null?(p=o.threadMessages)!=null?(q=p.customization_info)!=null?q.outgoing_bubble_color:q:p:o,s=void 0;if(!r){s="#0084ff";}else s='#'+r.substring(2);return c('convertMIGColorToFIGColor')(s);};n.prototype.getUnread=function(){var o,p,q;return !!((o=this.props)!=null?(p=o.threadMessages)!=null?(q=p.montage_thread)!=null?q.unread_count:q:p:o);};n.prototype.getMontageThreadID=function(){var o,p,q,r;return (o=this.props)!=null?(p=o.threadMessages)!=null?(q=p.montage_thread)!=null?(r=q.thread_key)!=null?r.thread_fbid:r:q:p:o;};n.propTypes={onResize:m.func,threadMessages:m.object.isRequired};f.exports=c('Relay').createContainer(n,{fragments:{threadMessages:function o(p){return function(q,r){return {children:[{children:[{fieldName:'outgoing_bubble_color',kind:'Field',metadata:{},type:'Color'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'customization_info',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'MessageThreadCustomization'},{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'thread_fbid',kind:'Field',metadata:{},type:'String'}],fieldName:'thread_key',kind:'Field',metadata:{canHaveSubselections:true},type:'MessageThreadKey'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'last',value:{kind:'CallValue',callValue:1}}],children:[{children:[{children:[].concat.apply([],[{fieldName:'timestamp',kind:'Field',metadata:{},type:'Time'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(r),{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isRequisite:true},type:'Message'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessagesOfThreadEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'messages',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'MessagesOfThreadConnection'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'short_name',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'User',type:'User'}],fieldName:'montage_author',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{fieldName:'unread_count',kind:'Field',metadata:{},type:'Int'},c('RelayQL').__frag(q)]),fieldName:'montage_thread',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'MessageThread'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageThreadView_react_ThreadMessagesRelayQL',type:'MessageThread'};}(c('MontageViewerSingleThread.react').getFragment('montageThread'),c('MontageThumbnail.react').getFragment('message'));}}});}),null);
__d('MontageThreadViewRoute',['RelayQL','RelayRoute'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='MontageThreadViewRoute';j.queries={threadMessages:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'threadFBID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(m)]),fieldName:'message_thread',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'MontageThreadViewRoute',type:'MessageThread'};}(l.getFragment('threadMessages'));}};j.paramDefinitions={threadFBID:{type:'ID',required:true}};f.exports=j;}),null);
__d('MontageThreadViewContainer.react',['FluxContainer','MercuryIDs','MontageActions','MontageStore','MontageThreadView.react','MontageThreadViewRoute','React','Relay'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('Relay').RootContainer,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').PureComponent);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.threadIDToMontageThreadID={},this.$MontageThreadViewContainer1=function(r){var s=c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID);if(!s)return null;return (c('React').createElement(c('MontageThreadView.react'),babelHelpers['extends']({},r,{onResize:this.props.onResize,setThreadID:this.$MontageThreadViewContainer4})));}.bind(this),this.$MontageThreadViewContainer3=function(r){if(r&&r.stale)return;var s=c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID),t=this.threadIDToMontageThreadID[s];if(this.state.needsUpdating[s])c('MontageActions').hasUpdated(s);if(this.state.needsUpdating[s])c('MontageActions').hasUpdated(t);}.bind(this),this.$MontageThreadViewContainer4=function(r){var s=c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID);this.threadIDToMontageThreadID[s]=r;}.bind(this),n;}l.getStores=function(){return [c('MontageStore')];};l.calculateState=function(){return {needsUpdating:c('MontageStore').getState().needsUpdating};};l.prototype.render=function(){var m=this.props.threadID,n=c('MercuryIDs').getThreadFBIDFromThreadID(m);if(!n)return null;return c('React').createElement(j,{Component:c('MontageThreadView.react'),route:new (c('MontageThreadViewRoute'))({threadFBID:n}),renderFetched:this.$MontageThreadViewContainer1,forceFetch:this.$MontageThreadViewContainer2(n),onReadyStateChange:this.$MontageThreadViewContainer3});};l.prototype.$MontageThreadViewContainer2=function(m){return !!(this.state.needsUpdating[m]||this.state.needsUpdating[this.threadIDToMontageThreadID[m]]);};l.propTypes={onResize:k.func,threadID:k.string.isRequired};f.exports=c('FluxContainer').create(l);}),null);
__d('MessengerInterstitialBanner.react',['cx','fbt','ix','Image.react','Link.react','React','WorkModeConfig'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=j('/images/mercury/clients/messenger/banner/messengerPhone-2x.png'),o='https://itunes.apple.com/app/id958124798';k=babelHelpers.inherits(p,c('React').PureComponent);l=k&&k.prototype;p.prototype.render=function(){if(this.props.mobileAppInfo.hasMessenger&&this.props.mobileAppInfo.messengerPushable)return null;if(this.props.isFirstRedirect)return null;return (c('React').createElement('div',{className:"_s15"},c('React').createElement(c('Image.react'),{src:n}),this.$MessengerInterstitialBanner1(),this.$MessengerInterstitialBanner2()));};p.prototype.$MessengerInterstitialBanner1=function(){if(!this.props.mobileAppInfo.hasMessenger){return i._("Sigue la conversaci\u00f3n actual desde el tel\u00e9fono.");}else if(!this.props.mobileAppInfo.messengerPushable)return i._("Ve los mensajes al instante en tu tel\u00e9fono: abre la aplicaci\u00f3n para obtener m\u00e1s informaci\u00f3n.");return null;};p.prototype.$MessengerInterstitialBanner2=function(){if(this.props.mobileAppInfo.hasMessenger)return null;var q=c('WorkModeConfig').is_work_user?o:'https://www.messenger.com/about';return (c('React').createElement(c('Link.react'),{target:'_blank',className:"_s18",href:q},i._("Descargar aplicaci\u00f3n")));};function p(){k.apply(this,arguments);}p.propTypes={mobileAppInfo:m.shape({hasMessenger:m.bool.isRequired,messengerPushable:m.bool.isRequired}).isRequired,isFirstRedirect:m.bool};f.exports=p;}),null);
__d('MessengerDesktopNotificationPermissions',[],(function a(b,c,d,e,f,g){var h={DEFAULT:'default',DENIED:'denied',GRANTED:'granted'};f.exports=h;}),null);
__d('MessengerDesktopNotifications',['Map','MessengerDesktopNotificationPermissions','Run','UserAgent'],(function a(b,c,d,e,f,g){'use strict';var h=5000,i=new (c('Map'))();function j(){i.forEach(function(l,m,n){l.close&&l.close();});}var k={_closeTimer:null,isSupported:function l(){return !!window.Notification;},checkPermission:function l(){if(window.Notification)return window.Notification.permission;},hasDefaultSound:function l(){return c('UserAgent').isBrowser('FireFox')&&c('UserAgent').isPlatform('Mac OS X');},isDenied:function l(){return this.checkPermission()===c('MessengerDesktopNotificationPermissions').DENIED;},isGranted:function l(){return this.checkPermission()===c('MessengerDesktopNotificationPermissions').GRANTED;},requestPermission:function l(m){if(window.Notification)window.Notification.requestPermission(m);},showNotification:function l(m){if(this.checkPermission()===c('MessengerDesktopNotificationPermissions').GRANTED){var n=window.Notification?new window.Notification(m.title,{body:m.body,icon:m.icon,tag:m.tag}):{};i.set(m.tag,n);n.onclick=m.onClick;n.onclose=function(){i['delete'](m.tag);};this._closeTimer=setTimeout(function(){n.close();},m.closeTime||h);return n;}else return null;}};c('Run').onUnload(j);f.exports=k;}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/settings\/edit\/",{});}),null);
__d('MessengerSettingsActions',['AsyncRequest','CurrentEnvironment','MessengerDispatcher','MessengerDesktopNotifications','MessengerDesktopNotificationPermissions','MessengerURIConstants','XMessengerDotComSettingsEditController','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null}),i={Types:h,changeSettings:function j(k){var l=c('XMessengerDotComSettingsEditController').getURIBuilder().getURI();if(c('CurrentEnvironment').facebookdotcom)l.setPath(c('MessengerURIConstants').FACEBOOK_PREFIX+l.getPath());new (c('AsyncRequest'))().setData({settings:k}).setURI(l).send();c('MessengerDispatcher').dispatch({type:h.CHANGE_SETTINGS,newSettings:k});},changeDesktopNotifs:function j(k,l){if(k&&!c('MessengerDesktopNotifications').isGranted()){c('MessengerDesktopNotifications').requestPermission(function(m){if(m!==c('MessengerDesktopNotificationPermissions').GRANTED){if(c('MessengerDesktopNotifications').checkPermission()===c('MessengerDesktopNotificationPermissions').DENIED)l&&l();return;}c('MessengerDispatcher').dispatch({type:h.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:k});});}else c('MessengerDispatcher').dispatch({type:h.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:k});}};f.exports=i;}),null);
__d("XMessengerDotComNUXLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/logging\/promotion\/",{promotion_id:{type:"Int",required:true},instance_log_data:{type:"StringToStringMap",defaultValue:{}}});}),null);
__d('MessengerNotificationBanner.react',['cx','ix','AsyncRequest','Image.react','MessengerButton.react','MessengerDesktopNotifications','MessengerDotComPromotionActionURL','MessengerSettingsActions','messengerSignalsRe','React','XMessengerDotComNUXLoggingController','XQuickPromotionSimpleLoggingController','goURI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerSignalsRe').signals,m=c('React').PropTypes,n=i('/images/mercury/clients/messenger/banner/closeBanner.png'),o=i('/images/mercury/clients/messenger/banner/desktopNotifications.png');j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={bannerClosed:false},this.$MessengerNotificationBanner1=function(){return c('MessengerDesktopNotifications').isGranted()||c('MessengerDesktopNotifications').isDenied()||this.state.bannerClosed;}.bind(this),this.$MessengerNotificationBanner3=function(){return (c('React').createElement(c('MessengerButton.react'),{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$MessengerNotificationBanner4,type:'primary'}));}.bind(this),this.$MessengerNotificationBanner4=function(){this.$MessengerNotificationBanner5();if(this.props.promotionID){new (c('AsyncRequest'))().setURI(c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',this.props.promotionID).setEnum('qp_action','primary').setStringToStringMap('qp_instance_log_data',this.props.instanceLogData).getURI()).send();if(this.props.primaryActionURI===c('MessengerDotComPromotionActionURL').turn_on_notification){c('MessengerSettingsActions').changeDesktopNotifs(true);}else window.open(this.props.primaryActionURI);}else if(this.props.primaryActionURI)c('goURI')(this.props.primaryActionURI,true);}.bind(this),this.$MessengerNotificationBanner2=function(){this.$MessengerNotificationBanner5();if(this.props.promotionID)new (c('AsyncRequest'))().setURI(c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',this.props.promotionID).setEnum('qp_action','dismiss').setStringToStringMap('qp_instance_log_data',this.props.instanceLogData).getURI()).send();}.bind(this),this.$MessengerNotificationBanner5=function(){this.setState({bannerClosed:true},function(){l.resize();});}.bind(this),r;}p.prototype.componentWillReceiveProps=function(q){if(!q.promotionID)this.setState({bannerClosed:false});};p.prototype.componentDidMount=function(){if(this.$MessengerNotificationBanner1()||!this.props.promotionID)return;new (c('AsyncRequest'))().setURI(c('XMessengerDotComNUXLoggingController').getURIBuilder().setInt('promotion_id',this.props.promotionID).setStringToStringMap('instance_log_data',this.props.instanceLogData).getURI()).send();};p.prototype.componentDidUpdate=function(){window.dispatchEvent(new Event('resize'));};p.prototype.render=function(){if(this.$MessengerNotificationBanner1())return null;return c('React').createElement('div',{className:"_2cij"},c('React').createElement(c('Image.react'),{className:"_2cik",onClick:this.$MessengerNotificationBanner2,src:n}),c('React').createElement(c('Image.react'),{className:"_2cil",src:o}),this.props.promotionContent,this.$MessengerNotificationBanner3());};p.propTypes={promotionID:m.number,promotionContent:m.string,primaryActionTitle:m.string,primaryActionURI:m.string,instanceLogData:m.object};f.exports=p;}),null);
__d('MessengerRefreshPrompt',['fbt','Visibility','setIntervalAcrossTransitions'],(function a(b,c,d,e,f,g,h){var i=1000*60*60,j=1000*60*60*24*3,k=function l(m){var n=Date.now();c('setIntervalAcrossTransitions')(function(){if(Date.now()-n>j)c('Visibility').once(c('Visibility').VISIBLE,function(){m({promotionID:null,promotionContent:h._("Hay una nueva versi\u00f3n de Messenger."),primaryActionTitle:h._("Actualizar"),instanceLogData:{},primaryActionURI:window.location.href});n=Date.now();});},i);};f.exports=k;}),null);
__d('MessengerBanner.react',['MessengerConfig','MessengerInterstitialBanner.react','MessengerNotificationBanner.react','MessengerRefreshPrompt','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={promotionData:this.props.initialPromotionData},m;}k.prototype.componentDidMount=function(){if(c('MessengerConfig').ShowReloadPrompt)c('MessengerRefreshPrompt')(function(l){return this.setState({promotionData:l});}.bind(this));};k.prototype.render=function(){var l=this.state.promotionData;if(!this.props.mobileAppInfo.hasMessenger||!this.props.mobileAppInfo.messengerPushable)return (c('React').createElement(c('MessengerInterstitialBanner.react'),{mobileAppInfo:this.props.mobileAppInfo,isFirstRedirect:this.props.isFirstRedirect}));if(l&&l.primaryActionURI)return (c('React').createElement(c('MessengerNotificationBanner.react'),{promotionID:l.promotionID,promotionContent:l.promotionContent,primaryActionTitle:l.primaryActionTitle,primaryActionURI:l.primaryActionURI,instanceLogData:l.instanceLogData}));return null;};k.propTypes={mobileAppInfo:j.shape({hasMessenger:j.bool.isRequired,messengerPushable:j.bool.isRequired}).isRequired,initialPromotionData:j.object,isFirstRedirect:j.bool};f.exports=k;}),null);
__d('MessengerSettingsStore',['CacheStorage','MessengerSettingsActions','MessengerStore','MessengerDotComSettingsInitialData'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('CacheStorage'))('localstorage'),k='desktopNotifsEnabled';h=babelHelpers.inherits(l,c('MessengerStore'));i=h&&h.prototype;function l(){i.constructor.call(this);this.$MessengerSettingsStore1=babelHelpers['extends']({},c('MessengerDotComSettingsInitialData'),{desktopNotifsEnabled:this.$MessengerSettingsStore2()});}l.prototype.getSettings=function(){return this.$MessengerSettingsStore1;};l.prototype.$MessengerSettingsStore2=function(){return j.get(k,false);};l.prototype.$MessengerSettingsStore3=function(m){j.set(k,m);};l.prototype.__onDispatch=function(m){switch(m.type){case c('MessengerSettingsActions').Types.CHANGE_SETTINGS:Object.assign(this.$MessengerSettingsStore1,m.newSettings);this.emitChange();break;case c('MessengerSettingsActions').Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1.desktopNotifsEnabled=m.desktopNotifsEnabled;this.$MessengerSettingsStore3(m.desktopNotifsEnabled);this.emitChange();break;}};f.exports=new l();}),null);
__d('MessengerStateStore',['MessengerActions','MessengerStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('MessengerStore'));i=h&&h.prototype;function j(){i.constructor.call(this);this.$MessengerStateStore1={activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null};this.$MessengerStateStore2=babelHelpers['extends']({},this.$MessengerStateStore1);}j.prototype.getState=function(){return this.$MessengerStateStore1;};j.prototype.getPrevState=function(){return this.$MessengerStateStore2;};j.prototype.__onDispatch=function(k){switch(k.type){case c('MessengerActions').Types.REPLACE_STATE:this.$MessengerStateStore2=this.$MessengerStateStore1;this.$MessengerStateStore1=babelHelpers['extends']({activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null},k.nextState);this.emitChange();break;}};f.exports=new j();}),null);
__d('MessengerBrowserAlerts',['fbt','DocumentTitle','Event','ImageSourceRequest','ImageSourceType','Map','MercuryAttachmentSnippetRenderer','MercuryBlockedParticipants','MercuryIDs','MercuryLogMessageType','MercuryParticipants','MercuryThreadInfo','MercuryThreadInformer','MercuryThreads','MercuryUnseenState','MessagingTag','MessengerActions','MessengerConfig','MessengerDesktopNotifications','MessengerEnvironment','MessengerSettingsStore','MessengerStateStore','MercuryNotificationRenderer','PhotoResizeModeConst','Sound','URI','UserActivity'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryBlockedParticipants').get(),j=8000,k=80,l=3,m=600000,n='/images/messengerdotcom/favicon/favicon.ico',o='/images/messengerdotcom/favicon/unread_favicon.ico',p='/images/messengerdotcom/favicon/favicon_work.ico',q='/images/messengerdotcom/favicon/unread_favicon_work.ico',r='/images/messengerdotcom/favicon/favicon_sandbox.ico',s='/images/messengerdotcom/favicon/favicon_sandbox_unread.ico',t=new (c('Map'))(),u=0,v=null;function w(){t=new (c('Map'))();}function x(aa){if(c('MessengerSettingsStore').getSettings().sound_enabled)c('Sound').play([c('MessengerConfig')['sound.notif_ogg_url'],c('MessengerConfig')['sound.notif_mp3_url']],aa,false);}function y(aa,ba,ca){if(!aa.snippet_sender)return;var da=t.get(aa.thread_id)||0;if(da>=l)return;t.set(aa.thread_id,da+1);c('MercuryParticipants').get(aa.snippet_sender,function(ea){var fa=aa.snippet,ga=aa.custom_nickname&&aa.custom_nickname[c('MercuryIDs').getUserIDFromParticipantID(ea.id)],ha=ga?ga:ea.short_name;if(!fa&&aa.snippet_attachments&&aa.snippet_attachments.length>0)fa=c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetRenderer').getAttachmentSnippetType(aa.snippet_attachments),false,ha,aa.snippet_attachments);var ia=ga?ga:ea.name;if(!aa.is_canonical)ia=aa.name?h._("{sender's name} a {group name}",[h.param('sender\'s name',ha),h.param('group name',aa.name)]):h._("{sender's name} a tu grupo",[h.param('sender\'s name',ha)]);c('MessengerDesktopNotifications').showNotification({title:ia,body:fa,icon:aa.image_src||ba||ea.big_image_src||ea.image_src,closeTime:null,onClick:function ja(){window.focus();c('MessengerActions').selectThread(aa.thread_id);},tag:ca.message_id});if(!c('MessengerDesktopNotifications').hasDefaultSound())x(ca.timestamp);});}var z={init:function aa(ba){this._viewer=ba;this._threadInformer=c('MercuryThreadInformer').getForFBID(this._viewer);this._threads=c('MercuryThreads').getForFBID(this._viewer);this._unseenState=c('MercuryUnseenState').getForFBID(this._viewer);this._highResImageMap=new (c('Map'))();c('Event').listen(window,'focus',function(){w();clearInterval(u);});c('Event').listen(window,'blur',function(){u=setInterval(w,m);});this._threadInformer.subscribe('messages-received',function(ca,da){for(var ea in da)da[ea].forEach(function(fa){this.handleMessageReceived(fa);}.bind(this));}.bind(this));this._threadInformer.subscribe('unseen-updated',this._handleUnseenUpdated.bind(this));},handleMessageReceived:function aa(ba){if(ba.author===this._viewer||!ba.is_unread||ba.thread_id===c('MessengerStateStore').getState().activeThreadID&&c('UserActivity').isOnTab()||ba.folder!=c('MessagingTag').INBOX&&ba.folder!=c('MessagingTag').ARCHIVED)return;this._threads.getThreadMeta(ba.thread_id,function(ca){if(c('MercuryThreadInfo').isMuted(ca))if(!c('MercuryThreadInfo').areMentionsMuted(ca)){if(!ba.profile_ranges||!ba.profile_ranges.some||!ba.profile_ranges.some(function(da){return da.id===this._viewer;}.bind(this)))return;}else return;if(i.isPresentInGroupThread(ca))return;if(c('MessengerSettingsStore').getSettings().desktopNotifsEnabled&&!c('UserActivity').isOnTab()){this._attemptDesktopNotification(ca,ba);}else if(ba.log_message_type!==c('MercuryLogMessageType').UNSUBSCRIBE)x(ba.timestamp);if(!c('UserActivity').isOnTab()&&this._unseenState.getUnseenCount()>0)c('MercuryNotificationRenderer').renderDocumentTitle(ba.thread_id,function(da){if(!v)v=c('DocumentTitle').blink(da);});}.bind(this));},showRTCNotification:function aa(ba,ca){if(c('UserActivity').isOnTab()){ca(null);return;}var da=ba.peerID;if(!this._highResImageMap.has(da)){var ea=function(fa,ga){this._highResImageMap.set(da.toString(),ga.uri);this._displayRTCDesktopNotification(ga.uri,ba,ca);}.bind(this);new (c('ImageSourceRequest'))().setFBID(da).setType(c('ImageSourceType').PROFILE_PICTURE).setDimensions(k,k).setResizeMode(c('PhotoResizeModeConst').COVER).setCallback(ea.bind(null,da)).send();}else this._displayRTCDesktopNotification(this._highResImageMap.get(da),ba,ca);},_updateFavicon:function aa(ba){if(c('MessengerEnvironment').facebookdotcom)return;var ca=document.querySelector('link[rel*=icon][href*=".ico"]'),da=c('URI').getRequestURI().getSubdomain()==='fb',ea=false;if(ba===0){if(ea){ca.href=r;}else if(da){ca.href=p;}else ca.href=n;return;}if(ea){ca.href=s;}else if(da){ca.href=q;}else ca.href=o;},_displayRTCDesktopNotification:function aa(ba,ca,da){var ea=c('MercuryIDs').getParticipantIDFromUserID(ca.peerID),fa=null;c('MercuryParticipants').get(ea,function(ga){var ha=void 0;if(ca.isVideoCall){ha=h._("Videollamada entrante");}else ha=h._("Llamada de audio entrante");var ia=h._("{caller} te est\u00e1 llamando. Haz clic para responder.",[h.param('caller',ga.short_name)]);fa=c('MessengerDesktopNotifications').showNotification({title:ha,body:ia,icon:ba,closeTime:j,onClick:function ja(){window.focus();ca.onNotificationClicked();}});da(fa);});},_handleUnseenUpdated:function aa(){var ba=this._unseenState.getUnseenCount();if(c('UserActivity').isOnTab()&&c('UserActivity').isActive()&&ba>0){this._unseenState.markAsSeen();return;}var ca=c('DocumentTitle').get(),da=ba?'('+ba+') '+ca:ca;c('DocumentTitle').set(da,true);this._updateFavicon(ba);if(v&&ba===0){v.stop();v=null;}if(!this._focusToken&&ba>0)this._focusToken=c('UserActivity').subscribe(function(){if(c('UserActivity').isOnTab()){this._focusToken&&this._focusToken.unsubscribe();this._focusToken=null;this._unseenState.markAsSeen();}}.bind(this));},_attemptDesktopNotification:function aa(ba,ca){if(!ba.snippet_sender)return;if(!this._highResImageMap.has(ba.snippet_sender)){var da=function(ea,fa){this._highResImageMap.set(ba.snippet_sender,fa.uri);y(ba,fa.uri,ca);}.bind(this);new (c('ImageSourceRequest'))().setFBID(c('MercuryIDs').getUserIDFromParticipantID(ba.snippet_sender)).setType(c('ImageSourceType').PROFILE_PICTURE).setDimensions(k,k).setResizeMode(c('PhotoResizeModeConst').COVER).setCallback(da.bind(null,ba.snippet_sender)).send();}else y(ba,this._highResImageMap.get(ba.snippet_sender),ca);}};f.exports=z;}),null);
__d('MessengerDiodeWelcomeDialog.react',['fbt','MessengerActions','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogHeader.react','MessengerDialogFooter.react','MessengerDialogButton.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerDiodeWelcomeDialog1=function(r){if(!r)c('MessengerActions').hideDialog();},this.$MessengerDiodeWelcomeDialog2=function(){c('MessengerActions').hideDialog();},n;}l.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerDiodeWelcomeDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Bienvenido a Messenger")),c('React').createElement(k,null,h._("Ahora puedes ver todos tus mensajes en Messenger.com. Creemos que una buena opci\u00f3n si tienes que enviar y recibir mensajes en el ordenador y seguimos trabajando para mejorarla. Puedes seguir chateando en Facebook.")),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{label:h._("Aceptar"),onClick:this.$MessengerDiodeWelcomeDialog2,type:'primary'})));};f.exports=l;}),null);
__d('MessengerConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={NEW_THREAD_KEY:'new'};f.exports=h;}),null);
__d('MessengerEditorStateManager',['CacheStorage','ComposedEntityMutability','ComposedEntityMutabilityToName','ComposedEntityTypeToName','DraftEntityInstance','EditorState','MessengerConstants','SelectionState','decodeBlocks','encodeBlocks','mapObject'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('CacheStorage'))('localstorage'),i=c('ComposedEntityMutability').IMMUTABLE,j=void 0,k={get:function l(m){if(!m)return this._getEmptyEditorState();if(m===c('MessengerConstants').NEW_THREAD_KEY)return j||this._getEmptyEditorState();var n=h.get(m,false);if(!n)return this._getEmptyEditorState();var o=n.encodedBlocks,p=c('mapObject')(o.entityMap,function(s,t){return new (c('DraftEntityInstance'))({type:c('ComposedEntityTypeToName')[s.type],mutability:c('ComposedEntityMutabilityToName')[i],data:s.data});}),q=c('decodeBlocks')(o.blocks,p),r=c('EditorState').createWithContent(q);return c('EditorState').acceptSelection(r,new (c('SelectionState'))(n.selection));},set:function l(m,n){if(m===c('MessengerConstants').NEW_THREAD_KEY){j=n;return;}var o=c('encodeBlocks')(n.getCurrentContent()),p=n.getSelection().toJS();h.set(m,{encodedBlocks:o,selection:p});},_getEmptyEditorState:function l(){var m=c('EditorState').createEmpty();return c('EditorState').forceSelection(m,m.getSelection());}};f.exports=k;}),null);
__d('MessengerComposerActions',['MessengerDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null}),i={Types:h,addToken:function j(k){c('MessengerDispatcher').dispatch({type:h.ADD_TOKEN,entry:k});},moveDraftToNextThread:function j(k){c('MessengerDispatcher').dispatch({type:h.MOVE_DRAFT,threadID:k});},removeToken:function j(k){c('MessengerDispatcher').dispatch({type:h.REMOVE_TOKEN,entry:k});},focusComposer:function j(){c('MessengerDispatcher').dispatch({type:h.FOCUS_COMPOSER});},focusTypeahead:function j(){c('MessengerDispatcher').dispatch({type:h.FOCUS_TYPEAHEAD});},exitComposeState:function j(){c('MessengerDispatcher').dispatch({type:h.EXIT_COMPOSE_STATE});}};f.exports=i;}),null);
__d('MessengerComposerState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Record({step:null,recipients:c('immutable').List()});f.exports=h;}),null);
__d('MessengerComposerSteps',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});f.exports=h;}),null);
__d('MessengerComposerStore',['EditorState','immutable','MessengerActions','MessengerComposerActions','MessengerComposerState','MessengerComposerSteps','MessengerConstants','MessengerDispatcher','MessengerEditorStateManager','MessengerStateStore','MessengerStore','MessengerView'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('MessengerComposerState'))({step:c('MessengerComposerSteps').NULL});h=babelHelpers.inherits(k,c('MessengerStore'));i=h&&h.prototype;function k(){i.constructor.call(this);this.$MessengerComposerStore1=j;}k.prototype.getState=function(){return this.$MessengerComposerStore1;};k.prototype.__onDispatch=function(l){c('MessengerDispatcher').waitFor([c('MessengerStateStore').getDispatchToken()]);var m=c('MessengerStateStore').getState().detailView,n=this.$MessengerComposerStore1.recipients,o=this.$MessengerComposerStore1.step,p=null,q=null;switch(l.type){case c('MessengerComposerActions').Types.ADD_TOKEN:if(n.some(function(v){return (v.getUniqueID()===l.entry.getUniqueID());}))break;p=n.push(l.entry);break;case c('MessengerComposerActions').Types.REMOVE_TOKEN:var r=l.entry.getUniqueID(),s=n.findIndex(function(v){return v.getUniqueID()===r;});if(s!==-1)p=n['delete'](s);break;case c('MessengerComposerActions').Types.FOCUS_COMPOSER:if(o===c('MessengerComposerSteps').SELECT_RECIPIENTS)q=c('MessengerComposerSteps').COMPOSE;break;case c('MessengerComposerActions').Types.FOCUS_TYPEAHEAD:if(o===c('MessengerComposerSteps').COMPOSE)q=c('MessengerComposerSteps').SELECT_RECIPIENTS;break;case c('MessengerActions').Types.REPLACE_STATE:var t=c('MessengerStateStore').getPrevState().detailView;if(t!==c('MessengerView').DETAIL.COMPOSE&&m===c('MessengerView').DETAIL.COMPOSE)q=c('MessengerComposerSteps').SELECT_RECIPIENTS;break;case c('MessengerComposerActions').Types.MOVE_DRAFT:c('MessengerEditorStateManager').set(l.threadID,c('MessengerEditorStateManager').get(c('MessengerConstants').NEW_THREAD_KEY));break;case c('MessengerComposerActions').Types.EXIT_COMPOSE_STATE:var u=c('EditorState').createEmpty();setTimeout(function(){c('MessengerEditorStateManager').set(c('MessengerConstants').NEW_THREAD_KEY,c('EditorState').forceSelection(u,u.getSelection()));},0);q=c('MessengerComposerSteps').NULL;p=c('immutable').List();break;}if(p||q){this.$MessengerComposerStore1=new (c('MessengerComposerState'))({step:q||o,recipients:p||n});this.emitChange();}};f.exports=new k();}),null);
__d('MessengerMDotMeReferralStore',['MessengerActions','MessengerStore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MessengerStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null};}j.prototype.getState=function(){'use strict';return this.$MessengerMDotMeReferralStore1;};j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('MessengerActions').Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=k.refCode;this.$MessengerMDotMeReferralStore1.refThreadID=k.refThreadID;this.emitChange();}};f.exports=new j();}),null);
__d('MessengerPage',['EventEmitter','EventEmitterWithHolding','EventHolder','keyMirror','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){'use strict';var h={Events:c('keyMirror')({APP_MOUNTED:null,DATA_INITIALIZED:null,JS_LOADED:null}),addRetroactiveListener:function j(k,l){return i.addRetroactiveListener(k,l);},emit:function j(k){i.emitAndHold(k,c('performanceAbsoluteNow')());},removeCurrentListener:function j(){i.removeCurrentListener();}},i=new (c('EventEmitterWithHolding'))(new (c('EventEmitter'))(),new (c('EventHolder'))());f.exports=h;}),null);
__d('MessengerRTCMessageHandler',['Bootloader','FBRTCCallSummaryUploader','FBRTCMessageListener','FBRTCSupport'],(function a(b,c,d,e,f,g){'use strict';var h=null,i=null,j={init:function m(){if(c('FBRTCSupport').isReceiveWebrtcSupported()){c('FBRTCCallSummaryUploader').init();c('FBRTCMessageListener').init(false);c('FBRTCMessageListener').once('messageReceived',function(n){k();});c('FBRTCMessageListener').once('multiwayMessageReceived',function(n){l(n);});}}};function k(){if(!h)c('Bootloader').loadModules(["FBRTCIncomingCallController","MessengerRTCIncomingDialogController","MessengerRTCMissedCallDialogController","MessengerRTCUnsupportedBrowserDialogController"],function(m,n,o,p){h=new m(n,p,o);c('FBRTCMessageListener').setMessageHandler(h.onMessageReceived,h);},'MessengerRTCMessageHandler');}function l(m){if(!i)c('Bootloader').loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(n,o){i=new n(o);c('FBRTCMessageListener').setMultiwayMessageHandler(i.onMessageReceived,i);i.onMessageReceived(m);},'MessengerRTCMessageHandler');}f.exports=j;}),null);
__d('MessengerThreadSearchActions',['MessengerDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CHANGE_RESULT_INDEX:null,GET_MORE_CONTEXT:null,GET_MORE_THREADS:null}),i={Types:h,selectPrevious:function j(){c('MessengerDispatcher').dispatch({type:h.CHANGE_RESULT_INDEX,delta:1});},selectNext:function j(){c('MessengerDispatcher').dispatch({type:h.CHANGE_RESULT_INDEX,delta:-1});},getMoreSearchContext:function j(k){c('MessengerDispatcher').dispatch({type:h.GET_MORE_CONTEXT,direction:k});},loadMoreThreads:function j(){c('MessengerDispatcher').dispatch({type:h.GET_MORE_THREADS});}};f.exports=i;}),null);
__d('MessengerThreadSearchStore',['cx','immutable','ImmutableObject','MercuryIDs','MercuryMessages','MercurySearchContextResults','MercurySearchSnippetResults','MercuryThreads','MessengerContentSearchDataTypedLogger','MessengerDispatcher','MessengerStateStore','MessengerStore','MessengerActions','MessengerThreadSearchActions','MessengerView'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').List,l=c('immutable').Record,m=l({downExhausted:null,loading:false,messages:null,query:null,results:k(),selectedIndex:0,threadID:null,totalCount:0,upExhausted:null,threads:null,threadsExhausted:null,mid:null});i=babelHelpers.inherits(n,c('MessengerStore'));j=i&&i.prototype;function n(){j.constructor.call(this);this.$MessengerThreadSearchStore3=new m();}n.prototype.getForFBID=function(o){this.$MessengerThreadSearchStore4=new (c('MercurySearchSnippetResults'))(o);this.$MessengerThreadSearchStore1=c('MercuryMessages').getForFBID(o);this.$MessengerThreadSearchStore2=c('MercuryThreads').getForFBID(o);};n.prototype.getState=function(){return this.$MessengerThreadSearchStore3;};n.prototype.__onDispatch=function(o){if(!this.$MessengerThreadSearchStore4)return;c('MessengerDispatcher').waitFor([c('MessengerStateStore').getDispatchToken()]);var p=c('MessengerStateStore').getState(),q=p.activeThreadID,r=p.masterView,s=p.mid,t=p.query,u=r===c('MessengerView').MASTER.SEARCH;switch(o.type){case c('MessengerActions').Types.REPLACE_STATE:if(s!=this.$MessengerThreadSearchStore3.mid&&q!=this.$MessengerThreadSearchStore3.activeThreadID){if(s&&q){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threadID:q,mid:s});c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(y){return this.setMessages(y);}.bind(this));}else this.$MessengerThreadSearchStore3=new m();return;}else if(this.$MessengerThreadSearchStore3.query!==t||this.$MessengerThreadSearchStore3.threadID!==q){if(t&&!s){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getSingleThreadSearchResults(t,q,function(){for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return this.accumulateSearchResultsAndEmitChange.apply(this,[t,q,0].concat(z));}.bind(this));}else{if(this.$MessengerThreadSearchStore3.query&&this.$MessengerThreadSearchStore3.results.size===0)this.logCurrentResult(null,'no_results_found','single_thread_search');var v=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);if(v!==undefined)this.logCurrentResult(v.toObject(),'search_ended','single_thread_search');this.$MessengerThreadSearchStore6();}if(u){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getAllThreadSearchResults(t,function(y,z){return this.setAllThreadResults(y,z);}.bind(this));}else this.$MessengerThreadSearchStore7();this.emitChange();}break;case c('MessengerThreadSearchActions').Types.CHANGE_RESULT_INDEX:var w=Math.max(Math.min(this.$MessengerThreadSearchStore3.totalCount-1,this.$MessengerThreadSearchStore3.selectedIndex+o.delta),0);if(w===this.$MessengerThreadSearchStore3.selectedIndex)break;if(w>=this.$MessengerThreadSearchStore3.results.size){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getSingleThreadSearchMoreResults(t,q,function(){for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return this.accumulateSearchResultsAndEmitChange.apply(this,[t,q,w].concat(z));}.bind(this));}else{this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({loading:true,selectedIndex:w});c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(y){return this.setMessages(y);}.bind(this));}this.emitChange();var x=this.$MessengerThreadSearchStore3.results.get(w).toObject();this.logCurrentResult(x,'result_loaded','single_thread_search');break;case c('MessengerThreadSearchActions').Types.GET_MORE_CONTEXT:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);c('MercurySearchContextResults').getMoreSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,o.direction,function(y){return this.setMessages(y);}.bind(this));this.emitChange();break;case c('MessengerThreadSearchActions').Types.GET_MORE_THREADS:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getAllThreadSearchMoreResults(t,function(y,z){return this.setAllThreadResults(y,z);}.bind(this));this.emitChange();break;}};n.prototype.logCurrentResult=function(o,p,q){var r=new (c('MessengerContentSearchDataTypedLogger'))().setSearchTerm(this.$MessengerThreadSearchStore3.query).setThreadFbid(c('MercuryIDs').getThreadFBIDFromThreadID(this.$MessengerThreadSearchStore3.threadID)).setNumResults(this.$MessengerThreadSearchStore3.results.size).setSearchOutcome(p).setSearchType(q);if(o!==undefined&&o!==null)r.setMessageID(o.message_id).setMessageTimestamp(o.timestamp).setReadableTimestamp(o.timestamp_datetime).setResultIndex(this.$MessengerThreadSearchStore3.selectedIndex+1);r.log();};n.prototype.setAllThreadResults=function(o,p){var q=Object.keys(o),r=q.map(function(s){var t=this.$MessengerThreadSearchStore2.getThreadMetaNow(s);if(!t)return;var u=o[t.thread_id];if(!u)return;return new (c('ImmutableObject'))(babelHelpers['extends']({},t,{snippetCount:u.num_total_snippets}));}.bind(this)).filter(function(s){return s;});this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threads:r,threadsExhausted:p,loading:false});this.emitChange();};n.prototype.$MessengerThreadSearchStore7=function(){this.$MessengerThreadSearchStore8(['threads','threadsExhausted','loading']);};n.prototype.accumulateSearchResultsAndEmitChange=function(o,p,q,r,s){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({query:o,threadID:p,selectedIndex:q,results:r,totalCount:s});if(this.$MessengerThreadSearchStore3.results.size){c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(u){return this.setMessages(u);}.bind(this));var t=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);this.logCurrentResult(t.toObject(),'search_started','single_thread_search');}else this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({messages:null});this.emitChange();};n.prototype.$MessengerThreadSearchStore6=function(){this.$MessengerThreadSearchStore8(['query','threadID','selectedIndex','results','totalCount','downExhausted','loading','messages','upExhausted']);};n.prototype.$MessengerThreadSearchStore8=function(o){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.withMutations(function(p){o.forEach(function(q){return p.remove(q);});});};n.prototype.setMessages=function(o){var p=this.$MessengerThreadSearchStore1.getMessagesFromIDs([].concat(o.up_message_ids,o.message_id,o.down_message_ids)).map(function(q){var r,s=this;if(q&&q.message_id===o.message_id)if(!this.$MessengerThreadSearchStore3.results.isEmpty()){var r=function(){var t=s.$MessengerThreadSearchStore3.results.get(s.$MessengerThreadSearchStore3.selectedIndex).toJS(),u=t.matched_keywords,v=q.body.indexOf(t.body),w=Object.keys(t.matched_keywords).map(function(x){return {offset:v+Number(x),length:u[x].length,entity:{url:''},className:"__in"};});return {v:new (c('ImmutableObject'))(babelHelpers['extends']({},q,{ranges:q.ranges?q.ranges.concat(w):w}))};}();if(typeof r==="object")return r.v;}else return new (c('ImmutableObject'))(babelHelpers['extends']({},q,{isSelected:true}));return q;}.bind(this));this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({downExhausted:o.down_exhausted,loading:false,messages:p,upExhausted:o.up_exhausted});this.emitChange();};n.prototype.$MessengerThreadSearchStore5=function(){return this.$MessengerThreadSearchStore3.mid||this.$MessengerThreadSearchStore3.results.getIn([this.$MessengerThreadSearchStore3.selectedIndex,'message_id']);};f.exports=new n();}),null);
__d('MessengerURIListener',['MessengerActions','MessengerURISerializer','PageTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=false,i={start:function k(){if(!h)c('PageTransitions').registerHandler(j,6);h=true;},stop:function k(){c('PageTransitions').removeHandler(j,6);h=false;}};function j(k){var l=c('MessengerURISerializer').deserialize(k);if(l.notMessenger)return false;c('PageTransitions').transitionComplete();c('MessengerActions').changeState(l);return true;}f.exports=i;}),null);
__d('fBPaymentsDialogContainerReact',['FBPaymentsDialogContainer.react','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h={},i=c('FBPaymentsDialogContainer.react');function j(k,l,m,n){return c('reactRe').wrapPropsShamelessly(i,h,k,l,m,n);}g.createElement=j;}),null);
__d('mNCommerceDialogContainerReact',['MNCommerceDialogContainer.react','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h={},i=c('MNCommerceDialogContainer.react');function j(k,l,m,n){return c('reactRe').wrapPropsShamelessly(i,h,k,l,m,n);}g.createElement=j;}),null);
__d('messengerBannerReact',['MessengerBanner.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l={mobileAppInfo:i,initialPromotionData:c('utilsRe').optionToJsNullUndefined(j),isFirstRedirect:c('utilsRe').optionBoolToNullUndefinedBoolean(k)},m=c('MessengerBanner.react');return function(n,o,p,q){return c('reactRe').wrapPropsShamelessly(m,l,n,o,p,q);};}g.createElement=h;}),null);
__d("XSettingsEmployeeBetaController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/settings\/employee\/beta_mode\/",{enabled:{type:"Bool",defaultValue:false}});}),null);
__d('MessengerBugNub.react',['cx','fbt','ix','AsyncRequest','Image.react','Link.react','MessengerEnvironment','MessengerMenu.react','MessengerPopoverMenu.react','React','Tooltip','URI','XSettingsEmployeeBetaController','goURI'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=j('/images/mercury/clients/messenger/bug_nub/bugNub.png'),n=j('/images/mercury/clients/messenger/bug_nub/betaNub.png'),o=j('/images/mercury/clients/messenger/bug_nub/publicNub.png'),p=c('React').PropTypes,q=c('MessengerMenu.react').Item,r=c('MessengerMenu.react').Separator;k=babelHelpers.inherits(s,c('React').PureComponent);l=k&&k.prototype;s.prototype.render=function(){return (c('React').createElement('div',{className:"_4_xe"},this.$MessengerBugNub1(),c('React').createElement(c('Link.react'),babelHelpers['extends']({href:'#',ajaxify:'/ajax/bugs/employee_report',className:"_1fr8",rel:'dialog'},c('Tooltip').propsFor(i._("Informar de un error"))),c('React').createElement('div',{className:"_1gng"},c('React').createElement(c('Image.react'),{src:m})))));};s.prototype.$MessengerBugNub1=function(){var t=this.props.isBetaEnabled?n:o,u=i._("Preferencias internas");return (c('React').createElement(c('MessengerPopoverMenu.react'),babelHelpers['extends']({className:"_1fr8",menu:this.$MessengerBugNub2()},c('Tooltip').propsFor(u)),c('React').createElement(c('Link.react'),{'aria-haspopup':'true','aria-label':u,className:"_1gng",href:'#',role:'button'},c('React').createElement(c('Image.react'),{src:t}))));};s.prototype.$MessengerBugNub2=function(){var t,u=this,v=null;if(this.props.unixName)(function(){var w=u.props.unixName+'.sb';v=c('React').createElement(q,{label:'Sandbox',onclick:function(){return this.$MessengerBugNub3(w);}.bind(u)});})();return (c('React').createElement(c('MessengerMenu.react'),null,c('React').createElement(q,{label:'Public',onclick:function(){return this.$MessengerBugNub4(false);}.bind(this)}),c('React').createElement(q,{label:'Beta',onclick:function(){return this.$MessengerBugNub4(true);}.bind(this)}),c('React').createElement(r,null),c('React').createElement(q,{label:'C1 (trunkstable)',onclick:function(){return this.$MessengerBugNub3('trunkstable');}.bind(this)}),c('React').createElement(q,{label:'Latest',onclick:function(){return this.$MessengerBugNub3('latest');}.bind(this)}),c('React').createElement(q,{label:'Intern',onclick:function(){return this.$MessengerBugNub3('intern');}.bind(this)}),c('React').createElement(q,{label:'Production',onclick:function(){return this.$MessengerBugNub3('prod');}.bind(this)}),v));};s.prototype.$MessengerBugNub4=function(t){var u=c('XSettingsEmployeeBetaController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(u).setData({enabled:t}).setMethod('POST').setAllowCrossPageTransition(true).send();};s.prototype.$MessengerBugNub3=function(t){var u=c('URI').getRequestURI(),v=c('MessengerEnvironment').facebookdotcom?'.facebook.com':'.messenger.com',w='www'+(t?'.'+t:'')+v;c('goURI')(new (c('URI'))(window.location.href).setProtocol(u.getProtocol()).setDomain(w).setSubdomain(u.getSubdomain()).setPath(u.getPath()).setQueryData(u.getQueryData()).setFragment(u.getFragment()));};function s(){k.apply(this,arguments);}s.propTypes={isBetaEnabled:p.bool,unixName:p.string};f.exports=s;}),null);
__d('messengerBugNubReact',['MessengerBugNub.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k={isBetaEnabled:c('utilsRe').optionBoolToNullUndefinedBoolean(i),unixName:c('utilsRe').optionToJsNullUndefined(j)},l=c('MessengerBugNub.react');return function(m,n,o,p){return c('reactRe').wrapPropsShamelessly(l,k,m,n,o,p);};}g.createElement=h;}),null);
__d('MercuryCanonicalGroupThreadActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({THREAD_SEARCH_UPDATED:null});}),null);
__d('MercuryCanonicalGroupThreadStore',['MercuryCanonicalGroupThreadActionTypes','FluxStore','MercuryCanonicalGroupThreadManager','MessengerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MercuryCanonicalGroupThreadStore1=c('MercuryCanonicalGroupThreadManager').get();}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('MercuryCanonicalGroupThreadActionTypes').THREAD_SEARCH_UPDATED:this.__emitChange();break;default:break;}};j.prototype.getOrFetch=function(k){var l=this.$MercuryCanonicalGroupThreadStore1.getNow(k);if(!l)this.$MercuryCanonicalGroupThreadStore1.getCanonicalGroupThreadIDForParticipants(k,function(){c('MessengerDispatcher').dispatch({type:c('MercuryCanonicalGroupThreadActionTypes').THREAD_SEARCH_UPDATED});});return l;};f.exports=new j();}),null);
__d('CustomColorHighlighting.react',['csx','cx','React','UserAgent'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m="._fy2",n="._43by",o="._mh6",p=c('UserAgent').isEngine('Gecko')?"._mh6 *::-moz-selection":"._mh6 *::selection",q=m+m,r=n+n,s=o+p;j=babelHelpers.inherits(t,c('React').PureComponent);k=j&&j.prototype;function t(u){k.constructor.call(this,u);this.state={};}t.prototype.componentWillMount=function(){this.$CustomColorHighlighting1();};t.prototype.componentWillUnmount=function(){this.$CustomColorHighlighting2();if(this.state.styleTag)document.head.removeChild(this.state.styleTag);};t.prototype.componentWillReceiveProps=function(u){if(this.props.customColor&&!u.customColor){this.$CustomColorHighlighting2();}else if(u.customColor!==this.props.customColor)this.$CustomColorHighlighting3(u.customColor);};t.prototype.render=function(){return (c('React').createElement('div',{className:"_mh6"},this.props.children));};t.prototype.$CustomColorHighlighting1=function(){var u=document.createElement('style');u.appendChild(document.createTextNode(''));document.head.appendChild(u);this.setState({styleSheet:u.sheet,styleTag:u},function(){return this.$CustomColorHighlighting3(this.props.customColor);}.bind(this));};t.prototype.$CustomColorHighlighting4=function(u,v,w){if(u.insertRule){u.insertRule(v+'{'+w+'}',0);}else if(u.addRule)u.addRule(v,w,0);};t.prototype.$CustomColorHighlighting5=function(u){if('removeRule' in u){u.removeRule(0);}else if('deleteRule' in u)u.deleteRule(0);};t.prototype.$CustomColorHighlighting2=function(){if(this.state.styleSheet){if(this.state.styleSheet.rules)while(this.state.styleSheet.rules.length)this.$CustomColorHighlighting5(this.state.styleSheet);if(this.state.styleSheet.cssRules)while(this.state.styleSheet.cssRules.length)this.$CustomColorHighlighting5(this.state.styleSheet);}};t.prototype.$CustomColorHighlighting6=function(u){var v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u),w=parseInt(v[1],16),x=parseInt(v[2],16),y=parseInt(v[3],16);return 'rgba('+w+','+x+','+y+',0.2)';};t.prototype.$CustomColorHighlighting3=function(u){this.$CustomColorHighlighting2();var v=u||this.props.customColor;if(v){var w=this.$CustomColorHighlighting6(v),x='background: '+w;this.$CustomColorHighlighting4(this.state.styleSheet,s,x);this.$CustomColorHighlighting4(this.state.styleSheet,q,'color: '+v);this.$CustomColorHighlighting4(this.state.styleSheet,r,'background-color: '+v);}};t.propTypes={customColor:l.string};f.exports=t;}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/postback_ref\/",{page_id:{type:"String",required:true},ref:{type:"String",required:true},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}});}),null);
__d('MNCommercePostbackRefSendManager',['AsyncRequest','MessengerActions','MessengerMDotMeReferralStore','XMNCommercePostbackRefSendController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.sendMDotMeRef=function(i,j){var k=this.getMdotMeRef();if(this.shouldSendRef(j,i)){var l=c('XMNCommercePostbackRefSendController').getURIBuilder().setString('page_id',i).setString('ref',k).getURI();new (c('AsyncRequest'))().setURI(l).setMethod('post').send();c('MessengerActions').changeMDotMeReferral();}};h.prototype.shouldSendRef=function(i,j){if(!j||!i)return false;return this.hasMDotMeRef(j);};h.prototype.hasMDotMeRef=function(i){var j=c('MessengerMDotMeReferralStore').getState();return !!(j.refCode&&i&&j.refThreadID&&j.refThreadID.toString()===i);};h.prototype.getMdotMeRef=function(){var i=c('MessengerMDotMeReferralStore').getState();return i.refCode;};function h(){}f.exports=new h();}),null);
__d('MessengerSingleSectionContactList.react',['cx','CurrentUser','MessengerContactAdapters','MessengerContactList.react','MessengerTypeaheadUtils','React','TypeaheadViewPropTypes','joinClasses','wrapNullableForReact'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=(!this.props.entries.length?"_599s":'')+(' '+"_29hl")+(' '+"_8i1")+(' '+"_11_d")+(' '+"_4p-s");return (c('React').createElement(c('MessengerContactList.react'),{ariaOwneeID:this.props.ariaOwneeID,className:c('joinClasses')(this.props.className,l),contactAdapter:c('MessengerContactAdapters').fromSearchableEntry,hasHoverState:true,highlightedEntry:c('wrapNullableForReact')(this.props.highlightedEntry),isLoading:false,listSections:c('MessengerTypeaheadUtils').buildSingleSection(this.props.entries),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:c('CurrentUser').getID()}));};function k(){i.apply(this,arguments);}k.propTypes=c('TypeaheadViewPropTypes');k.defaultProps={role:'listbox'};f.exports=k;}),null);
__d("XShareScrapeAttachmentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/message_share_attachment\/fromURI\/",{});}),null);
__d('MessengerURLUploader',['AsyncRequest','Event','SubscriptionsHandler','URLMatcher','XShareScrapeAttachmentAsyncController'],(function a(b,c,d,e,f,g){'use strict';var h=c('XShareScrapeAttachmentAsyncController').getURIBuilder().getURI(),i=920,j=920;function k(l,m){this.$MessengerURLUploader3=l;this.$MessengerURLUploader5=new (c('SubscriptionsHandler'))();this.initInput(m);}k.prototype.getData=function(){return this.$MessengerURLUploader2;};k.prototype.getMatchedURL=function(){return this.$MessengerURLUploader4;};k.prototype.initInput=function(l){this.$MessengerURLUploader5.addSubscriptions(c('Event').listen(l,'keyup',this.handleInputValueChange.bind(this)),c('Event').listen(l,'paste',this.handleInputValueChange.bind(this)));};k.prototype.handleInputValueChange=function(l){var m=this.$MessengerURLUploader3(),n=c('URLMatcher').match(m);if(!!n){if(this.$MessengerURLUploader4!==n){this.$MessengerURLUploader4=n;this.$MessengerURLUploader2=null;this.loadShare();}}else{this.$MessengerURLUploader4=null;this.$MessengerURLUploader2=null;}};k.prototype.loadShare=function(){if(this.$MessengerURLUploader1&&this.$MessengerURLUploader1.abort)this.$MessengerURLUploader1.abort();var l=this.$MessengerURLUploader4;if(l)this.$MessengerURLUploader1=new (c('AsyncRequest'))().setMethod('POST').setURI(h).setData({uri:l,image_width:j,image_height:i,disallow_delayed:true}).setHandler(this.handleShareLoad.bind(this,l)).send();};k.prototype.handleShareLoad=function(l,m){if(l===this.$MessengerURLUploader4)this.$MessengerURLUploader2=(m.payload||0).share_data;};f.exports=k;}),null);
__d('AtSignAllowEmptyMentionsStrategy',['DocumentMentionsRegex'],(function a(b,c,d,e,f,g){var h=c('DocumentMentionsRegex').PUNCTUATION,i=['@','\\uff20'].join(''),j='[^'+i+h+'\\s]',k='(?:'+'\\.[ |$]|'+' |'+'['+h+']|'+')',l=new RegExp('(?:^|\\s|\\()('+'['+i+']'+'((?:'+j+k+'){0,20})'+')$'),m={name:'AtSignAllowEmptyMentionsStrategy',findMentionableString:function n(o){var p=l.exec(o);if(p!==null){var q=p[2];return {matchingString:q,leadOffset:p[1].length};}return null;}};f.exports=m;}),null);
__d('createMentionsSearchSourceFromParticipants',['AtSignAllowEmptyMentionsStrategy','DocumentCompositeMentionsSource','DocumentMentionsSource','SearchableEntry','StaticSearchSource'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){if(!i||!j||j.length<=2)return null;var l=j.reduce(function(o,p){if(!p||p.fbid===i)return o;var q=k&&k.custom_nickname&&k.custom_nickname[p.fbid]?k.custom_nickname[p.fbid]:'';o.push(new (c('SearchableEntry'))({uniqueID:p.fbid,title:'@'+p.name,subtitle:q,photo:p.image_src,keywordString:p.vanity+' '+q}));return o;},[]),m=new (c('StaticSearchSource'))(l),n=new (c('DocumentMentionsSource'))(c('AtSignAllowEmptyMentionsStrategy'),m);return new (c('DocumentCompositeMentionsSource'))([n]);}f.exports=h;}),null);
__d('MessengerComposerInput.react',['cx','fbt','AbstractMentionsTextEditor.react','Bootloader','CompositeDraftDecorator','DraftModifier','DOMDimensions','EditorState','EmojiFormat','MessengerEmojiSpan.react','MessengerEmoticonSpan.react','MessengerMentionsEntityDecorator.react','MessengerSingleSectionContactList.react','Event','immutable','MentionsLayer.react','MercuryConfig','MercuryIDs','MercuryThreadIDMap','MercuryThreadSnippet.react','MercuryThreadTitle.react','MercuryTimestamp','MercuryTriodeSourceUtil','MessengerBotsMenuButton.react','MessengerConstants','messengerDomIDsRe','MessengerEditorStateManager','MessengerTabIndices','MessengerURLUploader','React','ReactDOM','Run','TypingDetectorController','URLMatcher','clearImmediate','createMessengerMentionDraftEntity','createMentionsSearchSourceFromParticipants','debounce','getEntityMatcher','getProfileRangesForContentState','getThreadTypeNameFromThreadType','getVisibleValueForContentStateWithMessengerEmoji','handleBeforeInputForMessengerEmoji','handleBeforeInputForMessengerEmoticon','handleSoftNewlineForMessengerEmoticon','insertEmoticonIntoEditorState','insertMessengerEmojiIntoContentState','isSoftNewlineEvent','setImmediate','shouldNotRenderSegoe','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerDomIDsRe').ids,m=c('React').PropTypes,n=/^image\//,o='handled',p=8,q='not-handled';j=babelHelpers.inherits(r,c('React').PureComponent);k=j&&j.prototype;function r(t){k.constructor.call(this,t);s.call(this);this.$MessengerInput11=this.$MessengerInput11.bind(this);this.state=this.$MessengerInput12();this.$MessengerInput6=c('debounce')(function(u){if(this.props.isComposing&&u.isComposing)return;if(!this.props.thread||!this.props.thread.participants||!u.thread||!u.thread.participants||this.props.thread.participants.length!==u.thread.participants.length||this.props.participants&&u.participants&&!u.participants.equals(this.props.participants))this.$MessengerInput13();}.bind(this),300);this.$MessengerInput7=c('throttle')(function(){if(this.$MessengerInput10){var u=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this)).height;if(this.$MessengerInput1!==u)this.props.onResize&&this.props.onResize();this.$MessengerInput1=u;}}.bind(this),100);}r.prototype.$MessengerInput12=function(t){return {editorState:this.$MessengerInput14(c('MessengerEditorStateManager').get(this.props.threadID),t)};};r.prototype.componentDidMount=function(){this.$MessengerInput10=true;this.$MessengerInput1=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this)).height;this.$MessengerInput13();this.$MessengerInput2=new (c('MessengerURLUploader'))(this.getValue,c('ReactDOM').findDOMNode(this.refs.input));c('Run').onUnload(this.$MessengerInput15);this.$MessengerInput3=c('Event').listen(window,'blur',this.$MessengerInput15);this.$MessengerInput4=c('Event').listen(window,'focus',this.$MessengerInput16);this.$MessengerInput5=c('debounce')(function(){this.$MessengerInput17();}.bind(this),1000);};r.prototype.componentWillUpdate=function(t){if(this.props.threadID!==t.threadID)this.$MessengerInput17();};r.prototype.componentDidUpdate=function(t,u){this.$MessengerInput9=c('setImmediate')(this.$MessengerInput7);if(this.props.threadID!==t.threadID){this.$MessengerInput13();}else this.$MessengerInput6(t);if(u.editorState!==this.state.editorState)this.props.onChange&&this.props.onChange(this.getValue());};r.prototype.componentWillUnmount=function(){this.$MessengerInput10=false;this.$MessengerInput8&&this.$MessengerInput8.destroy();this.props.threadID&&this.$MessengerInput17();this.$MessengerInput9&&c('clearImmediate')(this.$MessengerInput9);this.$MessengerInput3&&this.$MessengerInput3.remove();this.$MessengerInput4&&this.$MessengerInput4.remove();};r.prototype.insertEmoticon=function(t){var u=c('insertEmoticonIntoEditorState')(t,this.state.editorState);if(u!==this.state.editorState)this.$MessengerInput18(u);};r.prototype.insertEmoji=function(t){var u=this.state.editorState,v=c('insertMessengerEmojiIntoContentState')(c('EmojiFormat').codeArrayToCodeString(t),u.getCurrentContent(),u.getSelection(),u.getCurrentInlineStyle()),w=c('EditorState').push(u,v,'insert-characters');if(w!==this.state.editorState)this.$MessengerInput18(c('EditorState').forceSelection(w,v.getSelectionAfter()));};r.prototype.$MessengerInput13=function(){this.$MessengerInput21();var t=this.$MessengerInput12();if(this.props.mentionsEnabled){var u=this.props,v=u.participants,w=u.viewer,x=u.thread;t.mentionsSource=c('createMentionsSearchSourceFromParticipants')(w,v&&v.toArray(),x);}this.setState(t,function(){if(this.props.threadID!==c('MessengerConstants').NEW_THREAD_KEY)c('setImmediate')(function(){if(!this.props.disableAutofocus)this.focus();}.bind(this));}.bind(this));};r.prototype.$MessengerInput17=function(){if(!this.props.threadID)return;c('MessengerEditorStateManager').set(this.props.threadID,this.state.editorState);};r.prototype.$MessengerInput22=function(t){this.setState({editorState:this.$MessengerInput14(c('EditorState').createEmpty()),addedMentionsCount:0,mentionsTriggeredCount:0},t);};r.prototype.$MessengerInput21=function(){this.$MessengerInput8&&this.$MessengerInput8.destroy();this.$MessengerInput8=null;var t=this.props.viewer;if(!t)return;if(this.props.threadID!==c('MessengerConstants').NEW_THREAD_KEY)this.$MessengerInput8=new (c('TypingDetectorController'))(c('MercuryIDs').getUserIDFromThreadID(this.props.threadID),c('ReactDOM').findDOMNode(this.refs.input),c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),null,c('MercuryThreadIDMap').getForFBID(t).getServerIDFromClientIDNow(this.props.threadID),this.getValue);};r.prototype.$MessengerInput20=function(){var t=this.getMentions();if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:t},function(u){var v,w=this;if(u&&c('MercuryConfig').Mentions&&t&&t.length)(function(){var x=u;c('Bootloader').loadModules(["CurrentUser","MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(y,z,aa){new z().setEvent(aa.MENTION).setGroupSize(this.props.participants&&this.props.participants.size).setNumDelivered(t.length).setNumSelects(this.state.addedMentionsCount).setNumTriggers(this.state.mentionsTriggeredCount).setThreadid(this.props.thread&&this.props.thread.thread_id).setThreadType(c('getThreadTypeNameFromThreadType')(this.props.thread&&this.props.thread.thread_type)).setOfflineThreadid(x.offline_threading_id).setVC(this.props.viewer).log();}.bind(w),'MessengerComposerInput.react');})();}.bind(this)))this.$MessengerInput22(function(){this.$MessengerInput17();this.$MessengerInput8&&this.$MessengerInput8.resetState();}.bind(this));};r.prototype.getMentions=function(){return c('getProfileRangesForContentState')(this.state.editorState.getCurrentContent());};r.prototype.getInput=function(){return this.refs.input;};r.prototype.render=function(){var t=this.props,u=t.participants,v=t.thread,w=t.viewer,x=null;if(u&&v&&w){x=i._("Conversaci\u00f3n con {participantListAsShownInThreadList}. Actualizado el {lastUpdatedTime} por {recentUpdateStringAsShownInThreadList}",[i.param('participantListAsShownInThreadList',this.$MessengerInput23(v,w)),i.param('lastUpdatedTime',c('MercuryTimestamp').getAbsoluteTimestamp(v.timestamp)),i.param('recentUpdateStringAsShownInThreadList',this.$MessengerInput24(u,v,w))]);}else x=i._("Redactando un mensaje nuevo");var y=null;if(this.props.threadID&&this.props.pageID)y=c('React').createElement('div',{ref:'botsMenuContainer',className:"_3km1"},c('React').createElement(c('MessengerBotsMenuButton.react'),{flyoutAlignment:'left',threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"}));var z=c('MercuryConfig').Mentions&&this.props.thread&&!this.props.thread.is_canonical?i._("Escribe un mensaje, \u0040nombre..."):i._("Escribe un mensaje...");return (c('React').createElement('div',{className:"_kmc"+(this.props.smallerEqual640?' '+"_2swd":'')+(c('shouldNotRenderSegoe')(this.state.editorState.getCurrentContent().getPlainText())?' '+"_2por":''),onClick:this.focus},this.props.showMenu?y:null,c('React').createElement('div',{className:"_3-8x"+(this.props.showMenu?' '+"_3km3":'')+(' '+"_3oh-")},c('React').createElement(c('AbstractMentionsTextEditor.react'),{'aria-controls':l.CONVERSATION,ariaDescribedBy:l.COMPOSER_INPUT_DESCRIPTION,ariaLabel:z,editorState:this.state.editorState,handleBeforeInput:this.$MessengerInput25,handleContentReturn:this.$MessengerInput19,handlePastedFiles:this.$MessengerInput11,handleReturn:this.$MessengerInput19,maxResults:p,mentionCreationFn:c('createMessengerMentionDraftEntity'),mentionResultsComponent:c('MentionsLayer.react'),mentionResultsProps:{typeaheadView:c('MessengerSingleSectionContactList.react'),typeaheadViewProps:{},position:'above',autoflip:true},mentionsSource:this.state.mentionsSource,onChange:this.$MessengerInput18,placeholder:z,ref:'input',spellCheck:true,stripPastedStyles:true,tabIndex:this.props.threadID===c('MessengerConstants').NEW_THREAD_KEY?c('MessengerTabIndices').COMPOSER_INPUT:0,textAlignment:'left',onAddMention:this.$MessengerInput26,onShowMentions:this.$MessengerInput27}),c('React').createElement('div',{className:"_5ca7",id:l.COMPOSER_INPUT_DESCRIPTION},x))));};r.prototype.$MessengerInput23=function(t,u){return (c('React').createElement(c('MercuryThreadTitle.react'),{thread:t,viewer:u}));};r.prototype.$MessengerInput24=function(t,u,v){return (c('React').createElement(c('MercuryThreadSnippet.react'),{participants:t,shouldAlwaysRenderSender:true,shouldRenderYou:true,thread:u,viewer:v}));};r.prototype.$MessengerInput14=function(t,u){var v=this.$MessengerInput28(),w=c('EditorState').set(t,{decorator:v});return u||this.props.disableAutofocus?w:c('EditorState').moveFocusToEnd(w);};r.prototype.$MessengerInput28=function(){var t=c('MessengerEmoticonSpan.react'),u=[{strategy:c('getEntityMatcher')(function(v){return v.getType()==='EMOTICON';}),component:t}];u.push({strategy:c('getEntityMatcher')(function(v){return v.getType()==='EMOJI';}),component:c('MessengerEmojiSpan.react')});if(c('MercuryConfig').Mentions)u.push({strategy:c('getEntityMatcher')(function(v){return v.getType()==='MENTION';}),component:c('MessengerMentionsEntityDecorator.react')});return new (c('CompositeDraftDecorator'))(u);};r.prototype.$MessengerInput29=function(t){var u=c('handleBeforeInputForMessengerEmoticon')(this.state.editorState,t);if(u===this.state.editorState)return false;this.setState({editorState:u});return true;};r.prototype.$MessengerInput30=function(t){var u=c('handleBeforeInputForMessengerEmoji')(this.state.editorState,t);if(u===this.state.editorState)return false;this.setState({editorState:u});return true;};r.prototype.handleTextDropped=function(t){var u=this.state.editorState,v=u.getSelection();if(v.get('hasFocus'))return;var w=c('DraftModifier').replaceText(u.getCurrentContent(),v,t,u.getCurrentInlineStyle()),x=c('EditorState').push(u,w,'insert-fragment');this.$MessengerInput18(x);};r.prototype.getShareData=function(){var t=c('URLMatcher').match(this.getValue());if(t===this.$MessengerInput2.getMatchedURL())return this.$MessengerInput2.getData();return null;};r.prototype.exitCurrentMode=function(){this.refs.input.exitCurrentMode();};r.prototype.triggerSend=function(){if(this.getValue().trim().length>0)this.$MessengerInput20();};r.propTypes={disableAutofocus:m.bool,handleOnlyImageUploads:m.bool.isRequired,isComposing:m.bool,mentionsEnabled:m.bool,onBeforeInput:m.func,onChange:m.func,onResize:m.func,onMessageSend:m.func,participants:m.instanceOf(c('immutable').Map),thread:m.object,threadID:m.string,viewer:m.string,onFileUpload:m.func,showMenu:m.bool,pageID:m.string,smallerEqual640:m.bool};var s=function t(){this.$MessengerInput10=false;this.$MessengerInput18=function(u){if(u!==this.state.editorState)this.setState({editorState:u},function(){this.$MessengerInput5();}.bind(this));}.bind(this);this.$MessengerInput19=function(event){if(c('isSoftNewlineEvent')(event)){this.setState(function(u){var v=u.editorState,w=c('handleSoftNewlineForMessengerEmoticon');return {editorState:w(v)};});return o;}this.setState({},function(){if(this.getValue().trim().length>0)this.$MessengerInput20();}.bind(this));return o;}.bind(this);this.getValue=function(){return c('getVisibleValueForContentStateWithMessengerEmoji')(this.state.editorState.getCurrentContent());}.bind(this);this.focus=function(){this.refs.input.focus();}.bind(this);this.$MessengerInput25=function(u){this.props.onBeforeInput&&this.props.onBeforeInput(u);var v=this.$MessengerInput29(u),w=this.$MessengerInput30(u);return v||w?o:q;}.bind(this);this.$MessengerInput11=function(u){var v=this.props.handleOnlyImageUploads?u.filter(function(w){return w&&n.test(w.type);}):u;if(v.length){this.props.onFileUpload(v);return o;}return q;}.bind(this);this.$MessengerInput15=function(){this.$MessengerInput17();}.bind(this);this.$MessengerInput16=function(){this.setState(this.$MessengerInput12(true));}.bind(this);this.$MessengerInput26=function(){var u=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:u});}.bind(this);this.$MessengerInput27=function(){var u=(this.state.mentionsTriggeredCount||0)+1;this.setState({mentionsTriggeredCount:u});}.bind(this);};f.exports=r;}),null);
__d('MessengerFileSizeErrorDialog.react',['fbt','MessengerActions','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerFileSizeErrorDialog2=function(){if(this.props.error==='wrong-type'){return (c('React').createElement('div',null,h._("El tipo de archivo que quieres adjuntar no est\u00e1 permitido. Vuelve a intentarlo con un formato diferente.")));}else if(this.props.error==='size-exceeded')return (c('React').createElement('div',null,h._("El archivo que has seleccionado es demasiado grande. El tama\u00f1o m\u00e1ximo es de 25 MB.")));return c('React').createElement('div',null);}.bind(this),this.$MessengerFileSizeErrorDialog1=function(s){if(!s)c('MessengerActions').hideDialog();},o;}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerFileSizeErrorDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Error al subir los archivos")),c('React').createElement(k,null,this.$MessengerFileSizeErrorDialog2()),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{action:'cancel',label:h._("Aceptar"),type:'primary'})));};m.propTypes={error:l.string.isRequired};f.exports=m;}),null);
__d('MessengerSendButton.react',['fbt','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=h._("Pulsa \"Enter\" para enviar"),m=k.customColor?{color:k.customColor}:{};return (c('React').createElement(c('Link.react'),{'aria-label':l,className:k.className,style:m,title:l,onClick:k.onClick},h._("Enviar")));};f.exports=i;}),null);
__d('MessengerComposer.react',['cx','fbt','AsyncRequest','AutoFocusableLink.react','BootloadedComponent.react','MercuryBootloadOnInteraction.react','BootloadOnRender.react','Bootloader','ChatPhotoUploader.react','ChatConfig','CustomColorHighlighting.react','EmoticonsList','immutable','JSResource','LazyComponent.react','MercuryConfig','MercuryReadOnlyReason','MercuryThreadActions','MessageRequestUtils','MessagingTag','MessengerActions','MessengerComposerInput.react','ChatPageComposerNullState.react','MessengerConfig','MessengerConstants','MessengerContextualDialog.react','MessengerFileSizeErrorDialog.react','MessengerGroupPollingButton.react','MessengerHotLikeButton.react','MessengerHotLikeUtils','MessengerQuickCamOrigins','MessengerResponsiveBlock.react','MessengerSendButton.react','MessengerView','MessengerGamesButton.react','MNCommercePostbackCTADataManager','MNCommercePostbackRefSendManager','P2PGKValues','React','MercuryShareAttachmentRenderLocations','XMNCommercePageNullStateCTAController','XMNCommerceShowStructuredMenuController','getPageIDFromThreadID','isWebGLEnabled'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=640,n=360,o=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;j=babelHelpers.inherits(p,c('React').PureComponent);k=j&&j.prototype;function p(q){k.constructor.call(this,q);this.handleFileUpload=function(r){this.refsUploader&&this.refsUploader.uploadFiles(r);this.exitCurrentMode();}.bind(this);this.$MessengerComposer25=function(r){var s=c('EmoticonsList').symbols[r];if(!s)return;this.refsInput&&this.refsInput.insertEmoticon(s);}.bind(this);this.$MessengerComposer32=function(){this.$MessengerComposer30()['delete'](this.props.threadID);c('MessengerActions').selectThread(null);}.bind(this);this.$MessengerComposer31=function(){this.$MessengerComposer30().archive(this.props.threadID);c('MessengerActions').selectThread(null);}.bind(this);this.$MessengerComposer28=function(r,s){if(r.platformFBID.toString()===c('MercuryConfig').MessengerAppID){this.props.onStickerSelect(r.resultID.toString());}else this.refsUploader&&this.refsUploader.uploadURL({attribution_app_id:r.platformFBID,external_image_url:r.source.url,preview_url:r.media.preview?r.media.preview.url:r.media.thumbnail.url,source:r.source});}.bind(this);this.$MessengerComposer29=function(r){this.focusInput();this.refsInput&&this.refsInput.insertEmoji(r);}.bind(this);this.$MessengerComposer12=function(r){this.setState({currentValue:r});}.bind(this);this.$MessengerComposer11=function(r,s,t){this.refsEmojiButton&&this.refsEmojiButton.hideFlyout();return this.props.onMessageSend&&this.props.onMessageSend(r,s,t);}.bind(this);this.$MessengerComposer27=function(r){this.refsInput&&this.refsInput.triggerSend();}.bind(this);this.$MessengerComposer9=function(){if(this.state.nullStateCTA!==null){this.setState({disableNullState:true});if(c('MNCommercePostbackRefSendManager').hasMDotMeRef(this.$MessengerComposer4())){c('MNCommercePostbackCTADataManager').send(this.state.nullStateCTA.id,this.$MessengerComposer1,c('MNCommercePostbackRefSendManager').getMdotMeRef());c('MessengerActions').changeMDotMeReferral();}else c('MNCommercePostbackCTADataManager').send(this.state.nullStateCTA.id,this.$MessengerComposer1);}}.bind(this);this.$MessengerComposer1=function(){this.setState({showNullState:true,disableNullState:false});}.bind(this);this.$MessengerComposer1=this.$MessengerComposer1.bind(this);this.state=this.$MessengerComposer2();}p.prototype.componentWillReceiveProps=function(q){if(q.threadID!==this.props.threadID){this.setState(this.$MessengerComposer2());if(q.thread)this.$MessengerComposer3(q.thread.message_count,c('getPageIDFromThreadID')(q.threadID));}if(q.thread&&q.thread.message_count>0)this.setState({showNullState:false});};p.prototype.componentWillMount=function(){if(this.props.thread)this.$MessengerComposer3(this.props.thread.message_count,this.$MessengerComposer4());};p.prototype.componentDidUpdate=function(q){if(q.canReply!==this.props.canReply)this.props.onResize&&this.props.onResize();if(this.props.thread)if(this.$MessengerComposer5()&&c('MessengerConfig').EnableStructuredMenu){this.$MessengerComposer6();}else this.setState({showMenu:false});};p.prototype.render=function(){if(!this.props.canReply){return this.$MessengerComposer7();}else if(this.props.thread&&c('MessageRequestUtils').isMessageRequest(this.props.thread)&&!this.state.pendingActionsBypassed)return this.$MessengerComposer8();var q=this.props.thread&&this.props.thread.message_count;c('MNCommercePostbackRefSendManager').sendMDotMeRef(this.$MessengerComposer4(),q);if(this.state.showNullState&&this.state.nullStateCTA!==null)return c('React').createElement(c('ChatPageComposerNullState.react'),{title:this.state.nullStateCTA.title,onClick:this.$MessengerComposer9,disabled:this.state.disableNullState});var r=this.$MessengerComposer10();return c('React').createElement(c('CustomColorHighlighting.react'),{customColor:this.props.thread&&this.props.thread.custom_color},c('React').createElement(c('MessengerResponsiveBlock.react'),{breakpointsToggles:function s(t){return [t!=null&&t<=m,t];}},function(s){var t=s[0],u=s[1];return c('React').createElement('div',{'aria-label':i._("Nuevo mensaje"),className:"_4rv3",role:'region'},c('React').createElement('div',{className:"_5irm"+(t?' '+"_1_73":'')},c('React').createElement(c('MessengerComposerInput.react'),{disableAutofocus:!!this.props.disableAutofocus,handleOnlyImageUploads:false,isComposing:r,mentionsEnabled:this.props.mentionsEnabled,ref:function(v){return this.refsInput=v;}.bind(this),onBeforeInput:function(){return this.refsEmojiButton&&this.refsEmojiButton.hideFlyout();}.bind(this),onResize:this.props.onResize,onMessageSend:this.$MessengerComposer11,participants:this.props.participants,smallerEqual640:t,thread:this.props.thread,threadID:r?c('MessengerConstants').NEW_THREAD_KEY:this.props.threadID,pageID:this.$MessengerComposer4(),viewer:this.props.viewer,onFileUpload:this.handleFileUpload,onChange:this.$MessengerComposer12,showMenu:this.state.showMenu}),c('React').createElement('ul',{ref:function(v){this.refsButtonsContainer=v;}.bind(this),className:"_4rv4"},this.$MessengerComposer13(u),this.$MessengerComposer14())));}.bind(this)));};p.prototype.$MessengerComposer13=function(q){if(this.props.hideActions)return null;if(q&&q<n)return c('React').createElement('div',null,c('React').createElement('div',{className:"_39bj"},this.$MessengerComposer15(),this.$MessengerComposer16(),this.$MessengerComposer17(),this.$MessengerComposer18()),c('React').createElement('div',{className:"_39bj"},this.$MessengerComposer19(),this.$MessengerComposer20(),this.$MessengerComposer21(),this.$MessengerComposer22(),this.$MessengerComposer23()));return c('React').createElement('div',{className:"_39bj"},this.$MessengerComposer15(),this.$MessengerComposer16(),this.$MessengerComposer17(),this.$MessengerComposer18(),this.$MessengerComposer19(),this.$MessengerComposer20(),this.$MessengerComposer21(),this.$MessengerComposer22(),this.$MessengerComposer23());};p.prototype.$MessengerComposer24=function(q){c('MessengerActions').showDialog(c('MessengerFileSizeErrorDialog.react'),{error:q.error});};p.prototype.handleTextDropped=function(q){this.refsInput&&this.refsInput.handleTextDropped(q);};p.prototype.focusInput=function(){this.refsInput&&this.refsInput.focus();};p.prototype.$MessengerComposer20=function(){if(!c('P2PGKValues').P2PVisible||!this.props.threadID||this.$MessengerComposer5())return null;var q="_30yy _25pc _39bk";return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:q,ContextualDialog:c('MessengerContextualDialog.react'),threadID:this.props.threadID}),loader:c('JSResource')('P2PSendMoneyContainerBootloader.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:q,role:'button'})});};p.prototype.$MessengerComposer23=function(){if(c('ChatConfig').get('messenger_www_quickcam')&&c('ChatConfig').get('messenger_www_html5_quickcam')&&this.props.threadID)return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:"_4rv5"+(' '+"_39bk")+(this.state.flyoutOpen?' '+"_5jhb":''),location:c('MessengerQuickCamOrigins').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:c('JSResource')('MessengerQuickCamButtonHTML5.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_4rv5 _39bk",role:'button'})});return null;};p.prototype.$MessengerComposer19=function(){if(!o)return null;return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:c('JSResource')('MessengerVoiceClipButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_4rv7 _39bk _30yy",role:'button'})});};p.prototype.$MessengerComposer21=function(){if(!c('MessengerConfig').ShowGroupPollingInterface)return null;if(this.props.thread&&this.props.thread.is_canonical)return null;if(!this.props.threadFBID)return null;return c('React').createElement(c('MessengerGroupPollingButton.react'),{customColor:this.props.thread&&this.props.thread.custom_color,threadFBID:this.props.threadFBID});};p.prototype.$MessengerComposer22=function(){var q=c('MercuryConfig').MessengerGamesGK&&c('isWebGLEnabled')();return q&&this.props.threadFBID&&!this.$MessengerComposer5()?c('React').createElement(c('MessengerGamesButton.react'),{threadFBID:this.props.threadFBID}):null;};p.prototype.$MessengerComposer15=function(){return c('React').createElement('div',{className:"_39bk"},c('React').createElement(c('ChatPhotoUploader.react'),{allowCrossPage:true,disabled:!(this.props.threadID||this.$MessengerComposer26()),ref:function(q){return this.refsUploader=q;}.bind(this),imageClassName:"_5vn8",imagesOnly:false,inputClassname:"_260t",linkClassName:"_30yy _260u",onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$MessengerComposer24}));};p.prototype.$MessengerComposer14=function(){var q=!(this.props.threadID||this.$MessengerComposer26());if(c('MessengerConfig').SendButtonEnabled&&!q&&this.state.currentValue.length)return c('React').createElement(c('MessengerSendButton.react'),{className:(this.props.threadID?"_30yy":'')+(' '+"_38lh")+(' '+"_39bl"),customColor:this.props.thread&&this.props.thread.custom_color,onClick:this.$MessengerComposer27});return c('React').createElement(c('MessengerHotLikeButton.react'),{className:"_4rv9"+(this.props.threadID?' '+"_30yy":'')+(' '+"_39bl"),disabled:q,customColor:this.props.thread&&this.props.thread.custom_color,customLike:c('MessengerHotLikeUtils').getCustomEmojiFromThread(this.props.thread)||undefined,sendSticker:this.props.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24});};p.prototype.$MessengerComposer16=function(){var q=(this.props.threadID?"_30yy":'')+(' '+"_4rv6")+(' '+"_39bk");return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:q,ContextualDialogClass:c('MessengerContextualDialog.react'),disabled:!(this.props.threadID||this.$MessengerComposer26()),getInput:function(){return this.refsInput;}.bind(this),flyoutAlignment:'right',flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,onEmoticonSelect:this.$MessengerComposer25,threadID:this.props.threadID}),loader:c('JSResource')('ChatStickerButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:q,role:'button'})});};p.prototype.$MessengerComposer17=function(){if(!c('MessengerConfig').ContentSearchEnabled)return null;var q=(this.props.threadID?"_30yy":'')+(' '+"_yht")+(' '+"_39bk");return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:q,ContextualDialogClass:c('MessengerContextualDialog.react'),getInput:function(){return this.refsInput;}.bind(this),getQuery:function(){return this.refsInput?this.refsInput.getValue():'';}.bind(this),location:c('MercuryShareAttachmentRenderLocations').MESSENGER,onSelect:this.$MessengerComposer28}),loader:c('JSResource')('ChatContentSearchButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:q,role:'button'})});};p.prototype.$MessengerComposer18=function(){if(!c('MercuryConfig').WWWMessengerEmojiPickerEnabled)return null;var q=(this.props.threadID?"_30yy":'')+(' '+"_5s2p")+(' '+"_39bk");return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:q,ContextualDialogClass:c('MessengerContextualDialog.react'),flyoutAlignment:'right',getInput:function(){return this.refsInput;}.bind(this),onSelect:this.$MessengerComposer29,onMount:function(r){return this.refsEmojiButton=r;}.bind(this),sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:c('JSResource')('ChatEmojiButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:q,role:'button'})});};p.prototype.$MessengerComposer8=function(){return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{height:51}}),bootloadLoader:c('JSResource')('MessengerPendingActions.react').__setRef('MessengerComposer.react'),folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){this.$MessengerComposer30().changeFolder(this.props.threadID,c('MessagingTag').INBOX);this.setState({pendingActionsBypassed:true});}.bind(this),onDeleteClick:function(){c('Bootloader').loadModules(["MessengerDeleteDialog.react"],function(q){c('MessengerActions').showDialog(q,{onArchive:this.$MessengerComposer31,onDelete:this.$MessengerComposer32,onToggle:this.$MessengerComposer33.bind(this,q)});}.bind(this),'MessengerComposer.react');}.bind(this),onIgnoreClick:function(){this.$MessengerComposer30().changeFolder(this.props.threadID,c('MessagingTag').OTHER);c('MessengerActions').selectThread(null);}.bind(this)});};p.prototype.$MessengerComposer7=function(){return !this.props.thread||this.props.view===c('MessengerView').DETAIL.COMPOSE?null:c('React').createElement('div',{className:"_4rv3"},c('React').createElement('div',{className:"_2wy4"},c('MercuryReadOnlyReason').getReason(this.props.thread.has_email_participant)));};p.prototype.$MessengerComposer33=function(q,r){if(!r)c('MessengerActions').hideDialog(q);};p.prototype.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode();};p.prototype.$MessengerComposer10=function(){return this.props.view===c('MessengerView').DETAIL.COMPOSE;};p.prototype.$MessengerComposer26=function(){return !!(this.$MessengerComposer10()&&this.props.recipients&&this.props.recipients.size);};p.prototype.$MessengerComposer5=function(){return !!this.$MessengerComposer4();};p.prototype.$MessengerComposer4=function(){return c('getPageIDFromThreadID')(this.props.threadID);};p.prototype.$MessengerComposer6=function(){var q=this.$MessengerComposer4(),r=c('XMNCommerceShowStructuredMenuController').getURIBuilder();new (c('AsyncRequest'))().setURI(r.getURI()).setMethod('POST').setData({page_id:q}).setHandler(function(s){return this.setState({showMenu:s&&s.payload});}.bind(this)).send();};p.prototype.$MessengerComposer3=function(q,r){var s=c('MessengerConfig').EnabledNullStateCTA&&q===0,t=c('MessengerConfig').ShouldAlwaysEnableCTAInsteadOfComposer,u=!!r;if(u&&(t||s)){var v=c('XMNCommercePageNullStateCTAController').getURIBuilder();new (c('AsyncRequest'))().setURI(v.getURI()).setMethod('POST').setData({page_id:r}).setHandler(function(w){if(w&&w.payload){this.setState({showNullState:true,nullStateCTA:w.payload});}else this.setState({showNullState:false,disableNullState:false});}.bind(this)).send();}else this.setState({showNullState:false,disableNullState:false});};p.prototype.$MessengerComposer2=function(){return {pendingActionsBypassed:false,currentValue:'',nullStateCTA:null,showMenu:false,showNullState:false,disableNullState:false};};p.prototype.$MessengerComposer30=function(){return c('MercuryThreadActions').getForFBID(this.props.viewer);};p.prototype.testUtils_renderP2PSendMoneyButton=function(){return this.$MessengerComposer20();};p.propTypes={canReply:l.bool,disableAutofocus:l.bool,hideActions:l.bool,mentionsEnabled:l.bool,onCustomLikeSelect:l.func,onMessageSend:l.func,onPhotoUploadComplete:l.func,onPhotoUploadCancel:l.func,onPhotoUploadFail:l.func,onPhotoUploadSubmit:l.func,onResize:l.func,onStickerSelect:l.func.isRequired,onVoiceClipCreate:l.func,participants:l.instanceOf(c('immutable').Map),recipients:l.instanceOf(c('immutable').List),threadID:l.string,threadFBID:l.string,thread:l.object,view:l.string,viewer:l.string};f.exports=p;}),null);
__d('MessengerSimpleDialog.react',['fbt','MessengerActions','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','MessengerDialogTitle.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerSimpleDialog1=function(s){if(!s)c('MessengerActions').hideDialog();},o;}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerSimpleDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogTitle.react'),null,this.props.title)),c('React').createElement(k,null,this.props.body),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{action:'cancel',label:h._("Aceptar"),type:'primary'})));};m.propTypes={title:l.string.isRequired,body:l.string.isRequired};f.exports=m;}),null);
__d('MessengerComposerContainer.react',['fbt','AsyncUploadRequest','EmojiLikeUtils','EmojiState','EmojiDispatcher','immutable','MercuryAttachment','MercuryAttachmentType','MercuryConfig','MercuryThreadIDMap','MercuryThreadInformer','MercuryIDs','MercuryLocalIDs','MercuryMessageActions','MercuryMessageObject','MercurySendMessageHandler','MercuryThreads','MercuryThreadActions','MercuryTriodeSourceUtil','MessageRequestUtils','MessengerActions','MessengerComposer.react','MessengerComposerActions','MessengerEmojiUsageUtils','MessengerSimpleDialog.react','MessengerView','PhotosUploadID','React','ReactDOM','SubscriptionsHandler','EmojiStateStore'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerComposerContainer7=function(s,t,u){c('EmojiState').updateRecentlyUsed(c('MessengerEmojiUsageUtils').findAllEmojis(s));if(!this.props.canReply){u&&u(null);return false;}var v=null,w=this.$MessengerComposerContainer15(function(x){var y=this.$MessengerComposerContainer4.constructUserGeneratedMessageObject(s,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),x);if(t){if(t.shareable_attachment)y.shareable_attachment=t.shareable_attachment;if(t.profile_ranges)y.profile_ranges=y.profile_xmd=t.profile_ranges;}v=y;return y;}.bind(this));u&&u(w?v:null);v=null;return w;}.bind(this),this.$MessengerComposerContainer9=function(s,t){this.$MessengerComposerContainer2.cancelAttachmentPlaceholder(t.upload_id,t);}.bind(this),this.$MessengerComposerContainer8=function(s,t){this.$MessengerComposerContainer2.confirmAttachmentPlaceholder(t.upload_id,t);}.bind(this),this.$MessengerComposerContainer10=function(s,t){this.$MessengerComposerContainer2.cancelAttachmentPlaceholder(t.upload_id,t);var u=h._("Error al subir la foto"),v=h._("Vuelve a intentarlo. Aseg\u00farate de subir una foto v\u00e1lida.");if(t.errorDialogParams){u=t.errorDialogParams.title||u;v=t.errorDialogParams.body||v;}this.$MessengerComposerContainer16(u,v);}.bind(this),this.$MessengerComposerContainer11=function(s,t){return this.$MessengerComposerContainer15(function(u){return this.$MessengerComposerContainer4.constructAttachmentMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),u);}.bind(this),function(u){this.$MessengerComposerContainer2.addAttachmentPlaceholder(u,t.upload_id,t);this.handleMessageSentToPendingThread();}.bind(this));}.bind(this),this.$MessengerComposerContainer14=function(s){var t='upload_'+c('PhotosUploadID').getNewID();this.$MessengerComposerContainer1.sendAttachment(this.props.threadID,m(t),c('MercuryTriodeSourceUtil').getMercuryTriodeSource());var u={};u[t]=s;var v=new (c('AsyncUploadRequest'))(c('MercuryConfig').upload_url).setAllowCrossOrigin(true).setRelativeTo(c('ReactDOM').findDOMNode(this)).setData({voice_clip:true}).setFiles(u);this.$MessengerComposerContainer6.addSubscriptions(v.subscribe('success',function(w,x){return this.$MessengerComposerContainer17(x);}.bind(this)));v.send();}.bind(this),this.$MessengerComposerContainer17=function(s){var t=s.getName(),u=s.getResponse().payload.metadata[0].audio_id;this.$MessengerComposerContainer2.confirmAttachmentPlaceholder(t,{upload_id:t,audio_ids:[u]});}.bind(this),this.$MessengerComposerContainer12=function(s){return this.$MessengerComposerContainer15(function(t){return (this.$MessengerComposerContainer4.constructStickerMessageObject(s,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),t));}.bind(this));}.bind(this),this.$MessengerComposerContainer13=function(s,t,u){var v=this.props.threadID,w=this.$MessengerComposerContainer4.constructUserGeneratedMessageObject(s.emoji,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),v);w.has_attachment=false;return this.$MessengerComposerContainer15(function(x){c('EmojiLikeUtils').setEmojiSize(w,t);return c('EmojiLikeUtils').setEmojiSource(w,u);});}.bind(this),this.$MessengerComposerContainer15=function(s,t){var u=this.props.threadID,v=this.props.recipients,w=false;if(!u&&v&&v.size>1){u=c('MercuryLocalIDs').generateThreadID();w=true;}if(!u)return false;var x=s(u);if(w){var y=v.map(function(z){return c('MercuryIDs').getParticipantIDFromUserID(z.getUniqueID());}).toArray();this.$MessengerComposerContainer3.createNewLocalThread(u,y);x.offline_threading_id=c('MercuryIDs').tokenize(u).value;x.specific_to_list=y;}if(t){t(x);}else this.$MessengerComposerContainer2.send(x,this.handleMessageSentToPendingThread);if(this.props.view===c('MessengerView').DETAIL.COMPOSE){if(c('MercuryAttachment').get(x).length>0)c('MessengerComposerActions').moveDraftToNextThread(u);c('MessengerComposerActions').exitComposeState();if(c('MercuryIDs').isLocalThread(u)){this.$MessengerComposerContainer5.subscribeOnce('messages-updated',function(z,aa){var ba=c('MercuryThreadIDMap').get();if(ba.canLinkExternally(u))c('MessengerActions').selectThread(u);});}else c('MessengerActions').selectThread(u);}this.focusInput();return true;}.bind(this),this.handleMessageSentToPendingThread=function(){if(this.props.thread&&c('MessageRequestUtils').isMessageRequest(this.props.thread))c('MercuryThreadActions').getForFBID(this.props.viewer).movePendingToInbox(this.props.threadID);}.bind(this),this.$MessengerComposerContainer16=function(s,t){c('MessengerActions').showDialog(c('MessengerSimpleDialog.react'),{title:s,body:t});},o;}l.prototype.componentWillMount=function(){this.$MessengerComposerContainer1=c('MercurySendMessageHandler').getForFBID(this.props.viewer);this.$MessengerComposerContainer2=c('MercuryMessageActions').getForFBID(this.props.viewer);this.$MessengerComposerContainer3=c('MercuryThreads').getForFBID(this.props.viewer);this.$MessengerComposerContainer4=c('MercuryMessageObject').getForFBID(this.props.viewer);this.$MessengerComposerContainer5=c('MercuryThreadInformer').getForFBID(this.props.viewer);this.$MessengerComposerContainer6=new (c('SubscriptionsHandler'))();c('EmojiDispatcher').explicitlyRegisterStores([c('EmojiStateStore')]);this.props.onMount&&this.props.onMount(this);};l.prototype.componentWillUnmount=function(){this.$MessengerComposerContainer6.release();};l.prototype.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput();};l.prototype.render=function(){return c('React').createElement(c('MessengerComposer.react'),{canReply:this.props.canReply,mentionsEnabled:!!c('MercuryConfig').Mentions,onMessageSend:this.$MessengerComposerContainer7,onPhotoUploadComplete:this.$MessengerComposerContainer8,onPhotoUploadCancel:this.$MessengerComposerContainer9,onPhotoUploadFail:this.$MessengerComposerContainer10,onPhotoUploadSubmit:this.$MessengerComposerContainer11,onResize:this.props.onResize,onStickerSelect:this.$MessengerComposerContainer12,onCustomLikeSelect:this.$MessengerComposerContainer13,onVoiceClipCreate:this.$MessengerComposerContainer14,participants:this.props.participants,recipients:this.props.recipients,ref:function(n){return this.refsComposer=n;}.bind(this),threadID:this.props.threadID,threadFBID:this.props.threadFBID,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer});};l.prototype.handleFileUpload=function(n){var o=n.reduce(function(p,q){var r=q.type.split('/')[0];if(p[r]){p[r].push(q);}else p.other.push(q);return p;},{audio:[],image:[],other:[]});o.audio.forEach(function(p){return this.$MessengerComposerContainer14(p);}.bind(this));this.refsComposer.handleFileUpload(o.image.concat(o.other));};l.prototype.handleTextDropped=function(n){this.refsComposer.handleTextDropped(n);};l.prototype.resetDrag=function(){this.refsComposer.exitCurrentMode();};l.propTypes={canReply:k.bool,onMount:k.func,onResize:k.func,participants:k.instanceOf(c('immutable').Map),recipients:k.instanceOf(c('immutable').List),threadID:k.string,threadFBID:k.string,thread:k.object,view:k.string,viewer:k.string};function m(n){return {upload_id:n,preview_attachments:[{upload_id:n,attach_type:c('MercuryAttachmentType').PHOTO,preview_uploading:true}]};}f.exports=l;}),null);
__d('MessengerContextBanner.react',['cx','Badge.react','ImageBlock.react','immutable','MercuryParticipantsConstants','MercuryParticipantsImage.react','MercuryThreadImage.react','React','MercuryShareAttachmentRenderLocations','requireWeak'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=void 0;c('requireWeak')('MessengerThreadImage.react',function(n){l=n;});i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerContextBanner1=function(){var s=this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER,t=null;if(this.props.thread){var u=l&&s?l:c('MercuryThreadImage.react');t=c('React').createElement(u,{showBadge:false,participants:this.props.participants,size:s?60:null,thread:this.props.thread,viewer:this.props.viewer});}else if(this.props.participantIDs)t=c('React').createElement(c('MercuryParticipantsImage.react'),{participants:this.props.participantIDs,size:c('MercuryParticipantsConstants').BIG_IMAGE_SIZE});return (c('React').createElement('div',{className:"_llk"},t));}.bind(this),this.$MessengerContextBanner2=function(){if(this.props.location!==c('MercuryShareAttachmentRenderLocations').MESSENGER)return null;var s=this.props.isVerified?c('React').createElement(c('Badge.react'),{size:'medium',type:'verified'}):null;return (c('React').createElement('div',{className:"_llq"},c('React').createElement('span',{className:"_3oh-"},this.props.contactName,s)));}.bind(this),this.$MessengerContextBanner3=function(){return (c('React').createElement('div',{className:"_1n-e _36zg"},this.props.connectionContext));}.bind(this),this.$MessengerContextBanner4=function(){if(!this.props.contextItems.length)return null;return (c('React').createElement('div',null,this.props.contextItems.map(function(s,t){return (c('React').createElement('div',{className:"_1n-e",key:'item:'+t},s));})));}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('ImageBlock.react'),{className:"_llj"+(this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER?' '+"_2eu-":'')+(this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT?' '+"_2eu_":'')+(this.props.location===c('MercuryShareAttachmentRenderLocations').WEB_INBOX?' '+"_2ev0":''),spacing:'large',style:this.props.style},this.$MessengerContextBanner1(),c('React').createElement('div',{className:"_lll"},this.$MessengerContextBanner2(),this.$MessengerContextBanner3(),this.$MessengerContextBanner4()));};m.propTypes={contactName:k.string,connectionContext:k.string,contextItems:k.arrayOf(k.string).isRequired,isVerified:k.bool,location:k.string.isRequired,participantIDs:k.arrayOf(k.string),participants:k.instanceOf(c('immutable').Map),thread:k.object,viewer:k.string.isRequired};f.exports=m;}),null);
__d("XMessengerContextBannerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/messenger\/context_banner\/",{profile_id:{type:"Int",required:true},max_context_items:{type:"Int",defaultValue:3}});}),null);
__d('MessengerContextInformationStore',['AsyncRequest','EventEmitter','Map','XMessengerContextBannerController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('Map'))(),k=new (c('Map'))();h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;l.prototype.getOrFetch=function(m){var n=j.get(m);n||this.$MessengerContextInformationStore1(m);return n;};l.prototype.$MessengerContextInformationStore1=function(m){if(k.get(m))return;var n=c('XMessengerContextBannerController').getURIBuilder().setInt('profile_id',m).getURI(),o=new (c('AsyncRequest'))().setAllowCrossPageTransition(true).setURI(n).setHandler(this.$MessengerContextInformationStore2.bind(this,m));k.set(m,o);o.send();};l.prototype.$MessengerContextInformationStore2=function(m,n){j.set(m,{connectionContext:n.payload.connection_context||'',contextItems:n.payload.context_items||[]});k['delete'](m);this.emit('change');};function l(){h.apply(this,arguments);}f.exports=new l();}),null);
__d('MessengerContextBannerContainer.react',['DOMDimensions','immutable','MercuryIDs','MercuryParticipants','MercuryThreads','MessengerContextBanner.react','MessengerContextInformationStore','ReactComponentWithPureRenderMixin','React','ReactDOM','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'MessengerContextBannerContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'),c('MercuryThreads'),c('MessengerContextInformationStore'))],propTypes:{location:h.string.isRequired,onResize:h.func,otherUserFBIDs:h.arrayOf(h.string),threadID:h.string,viewer:h.string.isRequired},statics:{calculateState:function j(k){var l=null,m=null;if(k.threadID){l=c('MercuryThreads').getForFBID(k.viewer).getOrFetch(k.threadID);m=l&&l.participants;}else if(k.otherUserFBIDs&&k.otherUserFBIDs.length===1)m=k.otherUserFBIDs.map(function(p){return c('MercuryParticipants').getIDFromVanityOrFBID(p);});var n=c('immutable').Map();if(m)n=n.withMutations(function(p){m&&m.forEach(function(q){p.set(q,c('MercuryParticipants').getOrFetch(q));});});var o=null;if(l){o=n.get(c('MercuryIDs').getParticipantIDFromFromThreadID(l.thread_id));}else o=m&&n.get(m[0]);return babelHelpers['extends']({contact:o,participantIDs:m,participants:n,thread:l},i.getContextInformation(o&&o.fbid&&o.fbid.toString()));},getContextInformation:function j(k){var l=void 0;if(k)l=c('MessengerContextInformationStore').getOrFetch(k.toString());return l||{connectionContext:'',contextItems:[]};}},componentDidUpdate:function j(){var k=c('ReactDOM').findDOMNode(this);if(!k)return;var l=c('DOMDimensions').getElementDimensions(k).height;if(this.props.onResize)this.props.onResize(l);},render:function j(){if(!this.state.contact)return null;if(this.state.contact.type==='page'&&!this.state.connectionContext&&!this.state.contextItems.length)return null;return (c('React').createElement(c('MessengerContextBanner.react'),{contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,isVerified:this.state.contact.is_verified,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer}));}});f.exports=i;}),null);
__d('MessengerNewMessagesNotice.react',['cx','fbt','ix','Image.react','Link.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=j('/images/mercury/clients/messenger/threadlist/newMessageIndicator.png');k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.render=function(){return (c('React').createElement('div',{'aria-hidden':!this.props.isOpen,className:"_4wzq"+(this.props.isOpen?' '+"_4wzr":'')+(!this.props.isOpen?' '+"_4-je":'')},c('React').createElement(c('Link.react'),{className:"_5f0v _4wzs",onClick:this.props.onClick,tabIndex:this.props.isOpen?0:-1},c('React').createElement(c('Image.react'),{className:"_4wzt",src:n}),c('React').createElement('div',{className:"_1bqr"},this.props.label))));};function o(){k.apply(this,arguments);}o.propTypes={isOpen:m.bool.isRequired,label:m.node,onClick:m.func};o.defaultProps={label:i._("Nuevos mensajes")};f.exports=o;}),null);
__d('MessengerConversation.react',['cx','csx','fbt','BootloadOnRender.react','ChatTypingIndicators.react','CSS','DOM','DOMDimensions','Event','FluxContainer','Focus','immutable','ImmutableObject','JSResource','KeyEventController','LazyComponent.react','MercuryConfig','MercuryIDs','MercuryDeliveryReceipts','MercuryRoger','MercuryShareAttachmentRenderLocations','MessageList.react','MessengerAttachmentRenderer','MessengerButton.react','MessengerCollapsedLogMessageGroup.react','MessengerConfig','MessengerContextBannerContainer.react','MessengerDateBreak.react','MessengerFlexScrollableArea.react','MessengerLogMessage.react','MessengerMessageGroup.react','MessengerNewMessagesNotice.react','MessengerQuickCamButtonHTML5.react','MessengerQuickCamOrigins','MessengerSpinner.react','MessengerTypingIndicator.react','MessengerVideoAutoplayActions','MessengerVideoAutoplayStore','MNOmniMConstants','OmniMStore','Parent','React','ReactDOM','Set','SubscriptionsHandler','UserActivity','WebMessengerConstants','convertMIGColorToFIGColor','joinClasses','setImmediate','throttle'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MercuryDeliveryReceipts').get(),n=c('MercuryRoger').get(),o=c('immutable').OrderedMap,p=c('React').PropTypes,q=20,r=100;function s(event,x){return !!(c('KeyEventController').filterEventTypes(event,x)&&c('KeyEventController').filterEventModifiers(event,x)&&c('Parent').bySelector(event.target,"._4_j4"));}k=babelHelpers.inherits(t,c('React').PureComponent);l=k&&k.prototype;function t(){var x,y;for(var z=arguments.length,aa=Array(z),ba=0;ba<z;ba++)aa[ba]=arguments[ba];return y=(x=l.constructor).call.apply(x,[this].concat(aa)),this.state={readReceipts:u(this.props),deliveryTimestamp:0,scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:this.props.thread?this.props.thread.unread_count:0,width:0,suggestions:null,omniMPrefs:null},this.$MessengerConversation1=null,this.$MessengerConversation2=0,this.$MessengerConversation3=0,this.$MessengerConversation4=null,this.isScrolledToBottom=function(){return !!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom());}.bind(this),this.isScrolledToBottomWithHeight=function(ca){return !!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(ca));}.bind(this),this.$MessengerConversation20=function(){return (c('React').createElement(c('MessengerNewMessagesNotice.react'),{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} mensajes no le\u00eddos","268435456":"1 mensaje no le\u00eddo"},[j.plural(this.state.unreadCount,'number')]),onClick:this.$MessengerConversation24}));}.bind(this),this.$MessengerConversation21=function(){if(!this.props.isLoaded||!c('MessengerConfig').ShowContextBanner)return null;return (c('React').createElement(c('MessengerContextBannerContainer.react'),{location:c('MercuryShareAttachmentRenderLocations').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}));}.bind(this),this.$MessengerConversation22=function(){if(this.props.isLoaded)return null;return (c('React').createElement('div',{className:"_2k8v"},this.props.isLoading?c('React').createElement(c('MessengerSpinner.react'),null):null));}.bind(this),this.$MessengerConversation19=function(){return (c('React').createElement('div',{className:"_4xu0"},c('React').createElement(c('MessengerSpinner.react'),{className:"_4xu1",size:c('MessengerSpinner.react').Sizes.LARGE})));},this.trackBottomIfRequired=function(){this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired();}.bind(this),this.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom();}.bind(this),this.scrollToTop=function(ca){this.refs.scrollable&&this.refs.scrollable.scrollToTop(ca);}.bind(this),this.$MessengerConversation6=function(){var ca=this.$MessengerConversation14();ca&&ca.pageUp();return false;}.bind(this),this.$MessengerConversation7=function(){var ca=this.$MessengerConversation14();ca&&ca.pageDown();return false;}.bind(this),this.$MessengerConversation8=function(ca){if(ca.target===document.body){this.scrollToTop();return false;}return null;}.bind(this),this.$MessengerConversation9=function(ca){if(ca.target===document.body){this.scrollToBottom();return false;}return null;}.bind(this),this.$MessengerConversation12=function(){if(!this.refs.scrollable)return;var ca=this.$MessengerConversation14(),da=this.refs.quickReply;da&&c('CSS').conditionClass(da,"_1mzg",!this.isScrolledToBottom());this.$MessengerConversation10();this.$MessengerConversation11();if(ca&&this.state.unreadCount&&this.$MessengerConversation18(ca))this.setState({showUnreadNotice:false,unreadCount:0});this.$MessengerConversation25(ca);}.bind(this),this.$MessengerConversation24=function(ca){ca.preventDefault();this.setState({showUnreadNotice:false});this.$MessengerConversation16();}.bind(this),this.$MessengerConversation23=function(ca){return function(){if(this.props.threadID!==ca)return;this.trackBottomIfRequired();}.bind(this);}.bind(this),this.$MessengerConversation15=function(){c('DOM').scry(c('ReactDOM').findDOMNode(this),'img').forEach(function(ca){if(ca.complete)return;var da=this.props.threadID,ea=c('Event').listen(ca,'load',function(){if(this.props.threadID===da)this.trackBottomIfRequired();ea.remove();}.bind(this));}.bind(this));}.bind(this),this.$MessengerConversation26=function(){var ca=this.props.messages,da=this.state.unreadCount;if(!da||da>ca.size)return null;return ca.get(ca.size-da);}.bind(this),this.$MessengerConversation18=function(ca){var da=this.$MessengerConversation26();if(!da)return false;var ea=this.refs.messageList.getMessageElement(da.message_id);if(!ea)return false;var fa=ea.getBoundingClientRect().top,ga=ca.getElement().getBoundingClientRect().top;if(fa-ga<0)return false;return true;}.bind(this),this.$MessengerConversation27=function(ca){return !!this.props.messages.find(function(da){return da.message_id===ca;});}.bind(this),this.$MessengerConversation16=function(){if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:true});var ca=this.$MessengerConversation26();if(!ca){this.scrollToTop(false);return;}this.$MessengerConversation28(ca.message_id,function(){this.setState({scrollingToUnreadMessage:false,unreadCount:0});}.bind(this));}.bind(this),this.$MessengerConversation28=function(ca,da){var ea=this.refs.messageList.getMessageElement(ca,true),fa=this.$MessengerConversation14();if(!ea||!fa)return;var ga=ea.getBoundingClientRect().top,ha=c('ReactDOM').findDOMNode(this.refs.messageList).getBoundingClientRect().top,ia=fa.getElement().getBoundingClientRect().top,ja=ga+Math.abs(ha)+ia;fa.setScrollTop(ja,true,{callback:da});}.bind(this),this.$MessengerConversation11=function(){if(!this.isScrolledToBottom()||this.props.messages.size===0)return;if(c('UserActivity').isOnTab()&&c('UserActivity').isActive()){this.props.onRead(this.props.threadID);}else if(!this.$MessengerConversation4)this.$MessengerConversation4=c('UserActivity').subscribe(function(){if(c('UserActivity').isOnTab()){this.$MessengerConversation13();this.props.onRead(this.props.threadID);}}.bind(this));}.bind(this),this.handleResize=function(){if(this.refs.scrollable){this.refs.scrollable.handleResize();var ca=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.scrollable)).width;if(ca!==this.state.width)this.setState({width:ca});}var da=this.refs.quickReply;da&&c('CSS').conditionClass(da,"_1mzg",!this.isScrolledToBottom());this.trackBottomIfRequired();}.bind(this),this.$MessengerConversation14=function(){return this.refs.scrollable&&this.refs.scrollable.getArea();}.bind(this),this.$MessengerConversation13=function(){this.$MessengerConversation4&&this.$MessengerConversation4.unsubscribe();this.$MessengerConversation4=null;}.bind(this),y;}t.getStores=function(){return [c('OmniMStore')];};t.calculateState=function(x,y){if(!c('MercuryIDs').isValid(y.threadID))return null;return {suggestions:c('OmniMStore').suggestionsForThread(y.threadID),omniMPrefs:c('OmniMStore').prefs()};};t.prototype.componentDidMount=function(){var x=new (c('SubscriptionsHandler'))();x.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(this.handleResize,50)),c('KeyEventController').registerKey('PAGE_UP',this.$MessengerConversation6,s),c('KeyEventController').registerKey('PAGE_DOWN',this.$MessengerConversation7,s),c('KeyEventController').registerKey('HOME',this.$MessengerConversation8,s),c('KeyEventController').registerKey('END',this.$MessengerConversation9,s),n.subscribe('change',function(y,z){z[this.props.threadID]&&this.setState({readReceipts:u(this.props)});}.bind(this)),m.subscribe('change',function(y,z){this.setState({deliveryTimestamp:this.props.threadID?m.getDeliveryTime(this.props.threadID):0});}.bind(this)));this.$MessengerConversation1=x;this.$MessengerConversation10();this.handleResize();this.$MessengerConversation11();this.$MessengerConversation5=c('throttle')(this.$MessengerConversation12,r);};t.prototype.componentWillReceiveProps=function(x){var y=x.threadID!==this.props.threadID;if(y){this.$MessengerConversation13();this.setState({scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:x.thread?x.thread.unread_count:0});}if(y||x.messages!==this.props.messages)this.setState({readReceipts:u(x),deliveryTimestamp:x.threadID?m.getDeliveryTime(x.threadID):0});};t.prototype.componentWillUnmount=function(){this.$MessengerConversation13();this.$MessengerConversation1&&this.$MessengerConversation1.release();};t.prototype.componentWillUpdate=function(){var x=this.$MessengerConversation14();if(x){this.$MessengerConversation2=x.getScrollHeight();this.$MessengerConversation3=x.getScrollTop();}};t.prototype.componentDidUpdate=function(x){if(!this.refs.scrollable)return;if(this.props.threadID!==x.threadID||v(x,this.props)){this.scrollToBottom();this.$MessengerConversation15();}else{var y=this.$MessengerConversation14();if(y){var z=y.getScrollHeight();if(z!==this.$MessengerConversation2){var aa=y.getScrollHeight()-this.$MessengerConversation2+this.$MessengerConversation3;this.refs.scrollable.scrollToPosition(aa);}else this.$MessengerConversation15();}}if(this.props.messages!==x.messages){this.$MessengerConversation11();if(this.state.scrollingToUnreadMessage)this.$MessengerConversation16();c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$MessengerConversation17());}setTimeout(function(){var ba=this.$MessengerConversation14();this.trackBottomIfRequired();if(ba&&this.state.unreadCount&&!this.state.scrollingToUnreadMessage&&!this.props.isLoading)if(this.$MessengerConversation18(ba)){this.setState({showUnreadNotice:false,unreadCount:0});}else this.setState({showUnreadNotice:true});this.$MessengerConversation10();}.bind(this),0);};t.prototype.render=function(){if(this.props.isLoading&&this.props.messages.isEmpty())return this.$MessengerConversation19();var x=c('MercuryConfig').MessengerPlatformPinProtectionGK&&this.props.thread&&this.props.thread.is_pin_protected,y=this.props.messages.last(),z=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),aa=null,ba=null,ca=this.state.suggestions||{},da=ca.quickReplies,ea=ca.agentSuggestions;if(da&&da.length&&y.author!==z){aa=da;ba=c('MNOmniMConstants').QUICKREPLIES;}else if(ea&&ea.length&&c('MercuryConfig').EnableOmniM){aa=ea;ba=c('MNOmniMConstants').OMNIM;}var fa=c('MercuryConfig').EnableQuickReply&&aa&&aa.length&&aa.filter(function(oa){return !oa.dismissed;}).length?c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{options:aa,threadID:y.thread_id,source:ba,omniMPrefs:this.state.omniMPrefs}),loader:c('JSResource')('MessengerBotsQuickReplyButtonList.react').__setRef('MessengerConversation.react'),placeholder:c('React').createElement('div',null)}):null,ga=null;if(y&&y.message_source&&y.author!==z&&c('MercuryConfig').WebCamQuickReply){var ha=y.message_source;if(ha==='camera'){var ia=this.props.thread?c('convertMIGColorToFIGColor')(this.props.thread.custom_color):null,ja=c('React').createElement('div',{className:"_1gc5",style:ia&&{color:ia}},j._("Enviar respuesta con foto"));ga=c('React').createElement('div',{className:"_1gc6"},c('React').createElement(c('MessengerQuickCamButtonHTML5.react'),{className:"_4rv5"+(' '+"_1gcb"),location:c('MessengerQuickCamOrigins').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer,textChild:ja}));}}var ka=null,la=null;if(ga||fa){ka=c('React').createElement('div',{className:"_51op"},c('React').createElement('div',{className:"_51oq",onResize:this.handleResize}));la=c('React').createElement('div',{ref:'quickReply'},c('React').createElement('div',{className:"_1mzb",onResize:this.handleResize},ga,fa));}var ma=j._("Mensajes"),na=j._("Cargar m\u00e1s...");return c('React').createElement(c('MessengerFlexScrollableArea.react'),{className:this.props.className,flexChildren:this.$MessengerConversation20(),footerChildren:la,onMount:function(){return c('setImmediate')(this.$MessengerConversation11);}.bind(this),onScroll:this.props.useManualFetch?undefined:this.$MessengerConversation5,ref:'scrollable',shouldStickToBottom:true,tabIndex:0,useScrollProtection:c('MessengerConfig').ChatScrollInterval},c('React').createElement('div',{'aria-label':ma,className:c('joinClasses')("__i_",this.props.innerClassName),role:'region'},c('React').createElement('h3',{className:"accessible_elem"},ma),this.$MessengerConversation21(),this.props.useManualFetch&&!this.props.upExhausted?c('React').createElement(c('MessengerButton.react'),{className:"_41jf",label:na,onClick:function(){return this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP);}.bind(this),type:'primary',use:'default'}):null,this.$MessengerConversation22(),x?w():c('React').createElement(c('MessageList.react'),{DateBreak:c('MessengerDateBreak.react'),deliveryTimestamp:this.state.deliveryTimestamp,isCanonical:this.props.isCanonical,LogMessage:c('MessengerLogMessage.react'),CollapsedLogMessageGroup:c('MessengerCollapsedLogMessageGroup.react'),MessageGroup:c('MessengerMessageGroup.react'),messages:this.props.messages,onAttachmentLoad:this.$MessengerConversation23(this.props.threadID),readReceipts:this.state.readReceipts,ref:'messageList',location:c('MercuryShareAttachmentRenderLocations').MESSENGER,viewer:this.props.viewer,thread:this.props.thread}),this.props.useManualFetch&&!this.props.downExhausted?c('React').createElement(c('MessengerButton.react'),{className:"_41jf",label:na,onClick:function(){return this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_DOWN);}.bind(this),type:'primary',use:'default'}):null,c('React').createElement(c('ChatTypingIndicators.react'),{indicatorClass:c('MessengerTypingIndicator.react'),indicatorsDidShow:function(){this.trackBottomIfRequired();}.bind(this),rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),ka));};t.prototype.$MessengerConversation10=function(){if(this.props.useManualFetch)return;var x=this.$MessengerConversation14();if(x&&x.getScrollTop()<q){this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP);c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$MessengerConversation17());}};t.prototype.$MessengerConversation17=function(){return this.props.messages.filter(function(x){return (c('MessengerAttachmentRenderer').isSingleVideoAttachment(x)||c('MessengerAttachmentRenderer').isSharedVideoAttachmentMessage(x));}).reverse().map(function(x){return x.message_id;});};t.prototype.$MessengerConversation25=function(x){var y=this.refs.messageList;if(!y||!x)return;var z=[],aa=x.getElement().getBoundingClientRect(),ba=c('MessengerVideoAutoplayStore').getMessageIDs(this.props.threadID),ca=ba||this.$MessengerConversation17()||c('immutable').List();ca.map(function(da){var ea=c('MessengerAttachmentRenderer').getVideoElem(da,y);if(ea)z.push([da,ea.getBoundingClientRect()]);});if(z.length)c('MessengerVideoAutoplayActions').onScroll(this.props.threadID,ba?null:ca,c('immutable').Map(z),aa);};t.propTypes={contact:p.instanceOf(c('ImmutableObject')),downExhausted:p.bool,fetchMessages:p.func.isRequired,innerClassName:p.string,isCanonical:p.bool,isLoaded:p.bool,isLoading:p.bool,messages:p.instanceOf(c('immutable').List).isRequired,participants:p.instanceOf(c('immutable').Map),thread:p.object,threadID:p.string.isRequired,upExhausted:p.bool,useManualFetch:p.bool,viewer:p.string.isRequired};function u(x){var y=c('MercuryIDs').getParticipantIDFromUserID(x.viewer),z=n.getSeenTimestamps(x.threadID),aa=new (c('Set'))(x.thread?x.thread.participants:z.keys());aa['delete'](y);return z.withMutations(function(ba){c('immutable').Seq(x.messages).reverse().forEach(function(ca){if(aa.size===0)return false;if(!aa.has(ca.author))return;ba.update(ca.author,function(da){if(!da||da.watermark<=ca.timestamp)return {watermark:ca.timestamp,action:ca.timestamp};return da;});aa['delete'](ca.author);});});}function v(x,y){var z=c('MercuryIDs').getParticipantIDFromUserID(y.viewer);return (y.threadID===x.threadID&&y.messages!==x.messages&&!y.messages.isEmpty()&&y.messages.last()!==x.messages.last()&&y.messages.last().author===z);}function w(){return (c('React').createElement('div',null,'This conversation is protected by PIN. Use your pin on device to unlock the conversation.'));}f.exports=c('FluxContainer').create(t,{withProps:true});}),null);
__d('MessengerConversationContainer.react',['immutable','ImmutableObject','MercuryIDs','MercuryMessageStore','MessengerConfig','MessengerConversation.react','MessengerHotLikePreviewEvents','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={isLoaded:false,isLoading:true,messages:c('immutable').List()},this.$MessengerConversationContainer1=undefined,this.$MessengerConversationContainer2=undefined,this.$MessengerConversationContainer3=false,this.$MessengerConversationContainer4=undefined,this.$MessengerConversationContainer5=undefined,this.$MessengerConversationContainer6=undefined,this.handleResize=function(){this.refs.conversation.handleResize();}.bind(this),this.isScrolledToBottom=function(){return !!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom());}.bind(this),this.$MessengerConversationContainer8=function(){if(this.state.isLoading||this.state.isLoaded)return;this.setState({isLoading:true});if(!this.$MessengerConversationContainer1.fetchMoreMessages())this.setState({isLoading:false,isLoaded:true});}.bind(this),this.$MessengerConversationContainer7=function(q){if(!q)return;this.setState({isLoaded:false});this.$MessengerConversationContainer1&&this.$MessengerConversationContainer1.destroy();this.$MessengerConversationContainer1=new (c('MercuryMessageStore'))(q,c('MessengerConfig').MessageLoadCount);clearTimeout(this.$MessengerConversationContainer6);this.$MessengerConversationContainer6=setTimeout(function(){if(this.props.thread&&this.props.thread.message_count<1)this.setState({isLoaded:true,isLoading:false});}.bind(this),6000);this.$MessengerConversationContainer2&&this.$MessengerConversationContainer2.release();this.$MessengerConversationContainer2=new (c('SubscriptionsHandler'))();this.$MessengerConversationContainer2.addSubscriptions(this.$MessengerConversationContainer1.subscribe(function(r){this.setState({messages:this.$MessengerConversationContainer9(c('immutable').List(r.messages)),isLoading:false});}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(r){this.$MessengerConversationContainer3=true;this.$MessengerConversationContainer4=r;this.setState({messages:this.$MessengerConversationContainer9(this.state.messages)});clearInterval(this.$MessengerConversationContainer5);this.$MessengerConversationContainer5=setInterval(this.refs.conversation.scrollToBottom,50);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_ANIMATION,function(r){clearInterval(this.$MessengerConversationContainer5);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION,function(r){clearInterval(this.$MessengerConversationContainer5);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,function(){this.$MessengerConversationContainer3=false;this.$MessengerConversationContainer4=null;}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP_EMOJI,function(){this.$MessengerConversationContainer3=false;this.$MessengerConversationContainer4=null;}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').REMOVE,function(){clearInterval(this.$MessengerConversationContainer5);this.$MessengerConversationContainer3=false;this.setState({messages:this.$MessengerConversationContainer9(this.state.messages)});}.bind(this)));}.bind(this),this.$MessengerConversationContainer9=function(q){if(this.$MessengerConversationContainer3){q=q.set(q.size,this.$MessengerConversationContainer4);}else{q=q.filterNot(function(r){return r.is_like_preview;});this.$MessengerConversationContainer4=null;}return q;}.bind(this),m;}k.prototype.componentWillUnmount=function(){this.$MessengerConversationContainer2&&this.$MessengerConversationContainer2.release();clearTimeout(this.$MessengerConversationContainer6);};k.prototype.componentDidMount=function(){this.$MessengerConversationContainer7(this.props.threadID);};k.prototype.componentWillReceiveProps=function(l){if(this.props.threadID!==l.threadID){this.setState({isLoading:true,messages:c('immutable').List()});this.$MessengerConversationContainer7(l.threadID);}};k.prototype.render=function(){return c('React').createElement(c('MessengerConversation.react'),{className:this.props.className,contact:this.props.contact,fetchMessages:this.$MessengerConversationContainer8,isCanonical:c('MercuryIDs').isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,messages:this.state.messages,onRead:this.props.onMarkRead,participants:this.props.participants,ref:'conversation',thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer});};k.propTypes={contact:j.instanceOf(c('ImmutableObject')),onMarkRead:j.func.isRequired,participants:j.instanceOf(c('immutable').Map),thread:j.object,threadID:j.string.isRequired,viewer:j.string.isRequired};f.exports=k;}),null);
__d('ArchiveWarning.react',['cx','ix','Image.react','React','TooltipData'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=c('TooltipData').propsFor('All employee-to-employee conversations will be archived','above'),o=this.props,p=o.isFBAtWork,q=o.shown,r=o.useCSS,s=babelHelpers.objectWithoutProperties(o,['isFBAtWork','shown','useCSS']);if(!p&&r){if(!q)return null;return (c('React').createElement('div',babelHelpers['extends']({className:"_3a61"},n,s),c('React').createElement('i',{className:"_3olv _14lt"})));}var t=p?i('images/chat/tab/archive-grey.png'):i('images/chat/tab/archive.png');return (c('React').createElement(c('Image.react'),babelHelpers['extends']({src:t,className:"titanArchiveWarning"+(' '+"button")+(!q?' '+"hidden_elem":'')},n)));};function m(){j.apply(this,arguments);}m.propTypes={isFBAtWork:l.bool,shown:l.bool,useCSS:l.bool};f.exports=m;}),null);
__d('archiveWarningReact',['ArchiveWarning.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m={isFBAtWork:c('utilsRe').optionBoolToNullUndefinedBoolean(i),shown:c('utilsRe').optionBoolToNullUndefinedBoolean(j),useCSS:c('utilsRe').optionBoolToNullUndefinedBoolean(k),style:c('utilsRe').optionToJsNullUndefined(l)},n=c('ArchiveWarning.react');return function(o,p,q,r){return c('reactRe').wrapPropsShamelessly(n,m,o,p,q,r);};}g.createElement=h;}),null);
__d('mercuryThreadTitleReact',['MercuryThreadTitle.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o){var p={className:c('utilsRe').optionToJsNullUndefined(i),thread:j,viewer:k,isNewThread:c('utilsRe').optionBoolToNullUndefinedBoolean(l),showUnreadCount:c('utilsRe').optionBoolToNullUndefinedBoolean(m),useShortName:c('utilsRe').optionBoolToNullUndefinedBoolean(n),useAndSeparator:c('utilsRe').optionBoolToNullUndefinedBoolean(o)},q=c('MercuryThreadTitle.react');return function(r,s,t,u){return c('reactRe').wrapPropsShamelessly(q,p,r,s,t,u);};}g.createElement=h;}),null);
__d('messengerCalculateTruncationState',['Style'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){if(!l||!j)return;var n=m?m.offsetWidth:0,o=Math.ceil(.5*(i.offsetWidth+l.offsetWidth)),p=i.offsetWidth-k.offsetWidth-12;if(o<=p){c('Style').set(i,'text-align','center');c('Style').set(j,'width','auto');c('Style').set(j,'margin-left','auto');}else{if(document.body.dir==='rtl'){c('Style').set(i,'text-align','right');}else{c('Style').set(i,'text-align','left');c('Style').set(j,'margin-left',n+'px');}var q=Math.max(i.offsetWidth-n-k.offsetWidth-11,0);c('Style').set(j,'width',q+'px');}}f.exports=h;}),null);
__d('messengerCustomColorUtilsRe',['cssVar','bs_js_primitive','WorkGKs'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){var k=j.custom_color,l=0;if(c('bs_js_primitive').js_is_nil_undef(k)){l=1;}else if(k===""){l=1;}else return k;if(l===1){var m=+c('WorkGKs').workplace_www_chat_branding;if(m!==0){return "#1479fb";}else return "#0084ff";}}g.customColorOrBlue=i;}),null);
__d('messengerInfoPanelButtonReact',['bs_curry','React','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h=c('reactRe').Component[0],i=c('reactRe').Component[1],j=c('reactRe').Component[2],k=c('reactRe').Component[3],l=c('reactRe').Component[4],m=c('reactRe').Component[5],n=c('reactRe').Component[6],o="MessengerInfoPanelButtonReact",p={width:"32px",height:"32px"};function q(ba){return c('React').createElement("svg",{viewBox:"0 0 64 64"},c('React').createElement("g",undefined,c('React').createElement("g",undefined,c('React').createElement("path",{d:"M32,10c-12.2,0-22,9.8-22,22s9.8,22,22,22s22-9.8,22-22S44.2,10,32,10z M32,19c1.6,0,3,1.4,3,3s-1.4,3-3,3 c-1.6,0-3-1.4-3-3S30.4,19,32,19z M36,45h-2h-4h-2v-1h2V29h-2v-1h2h4v1v15h2V45z",style:{fill:ba}}))));}function r(ba){var ca={fill:ba};return c('React').createElement("svg",{viewBox:"0 0 64 64",style:{stroke:ba}},c('React').createElement("g",undefined,c('React').createElement("polygon",{points:"34,44 34,29 34,28 30,28 28,28 28,29 30,29 30,44 28,44 28,45 30,45 34,45 36,45 36,44",style:ca}),c('React').createElement("circle",{cx:"32",cy:"22",r:"3",style:ca})),c('React').createElement("path",{d:"M32,11c11.6,0,21,9.4,21,21s-9.4,21-21,21s-21-9.4-21-21S20.4,11,32,11z",style:{strokeWidth:2,strokeMiterlimit:10,stroke:ba,fill:"none"}}));}function s(ba){var ca=ba[1],da=ca[0];return c('React').createElement("div",{style:p},ca[1]!==0?r(da):q(da));}var t=c('reactRe').Component[7],u=c('reactRe').Component[8],v=c('reactRe').Component[9],w=[h,i,j,k,l,m,n,t,u,v,o,p,q,r,s],x=c('reactRe').CreateComponent([o,l,n,h,j,i,k,m,s]),y=x[1];function z(ba,ca){return c('bs_curry')._1(y,[ba,ca]);}var aa=x[0];g.MessengerInfoPanelButton=w;g.comp=aa;g.wrapProps=y;g.createElement=z;}),null);
__d('messengerPresenceStatusReact',['fbt','bs_curry','bs_js_primitive','React','reactRe'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').Component[8],j=i[0],k=i[1],l=i[2],m=i[3],n=i[4],o=i[5],p="MessengerPresenceStatusReact";function q(x){var y=x[1],z=y[3],aa=y[2],ba,ca=0;if(y[1]!==0&&z){ba=h._("Activo en {platform}",[h.param("platform",z[0])]);}else ca=1;if(ca===1)ba=aa?h._("Activo hace {time}",[h.param("time",aa[0])]):z?z[0]:null;return c('React').createElement("span",{className:c('bs_js_primitive').option_get(y[0])},ba);}var r=[function(x){return [c('bs_js_primitive').js_from_nullable_def(x.className),+x.isUserActive,c('bs_js_primitive').js_from_nullable_def(x.lastActive),c('bs_js_primitive').js_from_nullable_def(x.platform)];}],s=[j,k,l,m,n,o,p,q,r],t=c('reactRe').CreateComponent([p,n,o,j,l,k,m,r,q]),u=t[1];function v(x,y,z,aa){return c('bs_curry')._1(u,[x,y,z,aa]);}var w=t[0];g.MessengerPresenceStatus=s;g.comp=w;g.wrapProps=u;g.createElement=v;}),null);
__d('MNRTCCallabilityStore',['MessengerDispatcher','RTCCallabilityStore'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('RTCCallabilityStore'))(c('MessengerDispatcher'));}),null);
__d('MessengerRTCGroupCallUnsupportedBrowserDialog.react',['fbt','Link.react','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React','UserAgent'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('messengerDialogBodyReact').comp,j=c('React').PropTypes,k=function m(n){var o=n.onUnmount;return (c('React').createElement(c('MessengerDialog.react'),{onToggle:o},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Cambia de navegador para hacer llamadas de grupo")),c('React').createElement(i,null,h._("Lamentablemente {browser name, i.e. Internet Explorer or Safari} todav\u00eda no admite nuestra funci\u00f3n de llamada en grupo. Para hacer una llamada en grupo, abre {link to install chrome}",[h.param('browser name, i.e. Internet Explorer or Safari',l()),h.param('link to install chrome',c('React').createElement(c('Link.react'),{href:'https://www.google.com/chrome/index.html',onClick:o,target:'_blank'},'Google Chrome'))])),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{label:h._("Aceptar"),onClick:o,type:'primary'}))));},l=function m(){if(c('UserAgent').isBrowser('Firefox')){return h._("Firefox");}else if(c('UserAgent').isBrowser('IE')){return h._("Internet Explorer");}else if(c('UserAgent').isBrowser('Safari')){return h._("Safari");}else return h._("tu navegador");};k.propTypes={onUnmount:j.func.isRequired};f.exports=k;}),null);
__d('MessengerRTCGroupCallUnsupportedBrowserDialogController',['DOM','MessengerRTCGroupCallUnsupportedBrowserDialog.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={_container:c('DOM').create('div'),render:function i(){c('ReactDOM').render(c('React').createElement(c('MessengerRTCGroupCallUnsupportedBrowserDialog.react'),{onUnmount:function(){return this.unmount();}.bind(this)}),this._container);},unmount:function i(){c('ReactDOM').unmountComponentAtNode(this._container);}};f.exports=h;}),null);
__d('MessengerRTCUnavailableDialog.react',['fbt','MessengerActions','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerRTCUnavailableDialog2=function(){return (c('React').createElement('div',null,h._("{name} no est\u00e1 disponible en este momento.",[h.param('name',this.props.name)])));}.bind(this),this.$MessengerRTCUnavailableDialog1=function(s){if(!s)c('MessengerActions').hideDialog();},o;}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerRTCUnavailableDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("No se puede llamar")),c('React').createElement(k,null,this.$MessengerRTCUnavailableDialog2()),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{action:'cancel',label:h._("Aceptar"),type:'primary'})));};m.propTypes={name:l.string.isRequired};f.exports=m;}),null);
__d('MessengerRTCVideoCallButton.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k={width:'32px',height:'32px'},l={fillRule:'evenodd',clipRule:'evenodd',fill:'none',strokeWidth:'2',strokeMiterlimit:'10'},m=babelHelpers['extends']({},l,{stroke:'#888888'});i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;n.prototype.render=function(){var o=this.props.isGroupChat?h._("Iniciar un chat de v\u00eddeo en grupo"):h._("Iniciar una videollamada"),p=this.props.isAvailable?babelHelpers['extends']({},l,{stroke:this.props.customColor}):m;return (c('React').createElement('div',{style:k,title:o},c('React').createElement('svg',{viewBox:'0 0 64 64',style:p},c('React').createElement('title',null,o),c('React').createElement('g',null,c('React').createElement('g',null,c('React').createElement('path',{d:'M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3 c3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z'}))))));};function n(){i.apply(this,arguments);}f.exports=n;}),null);
__d('MessengerRTCVoiceCallButton.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k={width:'32px',height:'32px'},l={fillRule:'evenodd',clipRule:'evenodd',fill:'none',strokeWidth:'2',strokeMiterlimit:'10'},m=babelHelpers['extends']({},l,{stroke:'#888888'});i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;n.prototype.render=function(){var o=this.props.isGroupChat?h._("Iniciar una llamada en grupo"):h._("Iniciar una videollamada"),p=this.props.isAvailable?babelHelpers['extends']({},l,{stroke:this.props.customColor}):m;return (c('React').createElement('div',{style:k,title:o},c('React').createElement('svg',{viewBox:'0 0 64 64',style:p},c('React').createElement('title',null,o),c('React').createElement('path',{d:'M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7 c0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2 c1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z'}))));};function n(){i.apply(this,arguments);}f.exports=n;}),null);
__d('MessengerRTCCallButton.react',['invariant','immutable','ImmutableObject','FBRTCCallSummary','FBRTCCallUIWrapper','MercuryIDs','MessengerActions','MessengerRTCUnavailableDialog.react','MessengerRTCVideoCallButton.react','MessengerRTCVoiceCallButton.react','MNRTCCallabilityStore','React','RTCUtils','StoreAndPropBasedStateMixin','Link.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerRTCCallButton',mixins:[c('StoreAndPropBasedStateMixin')(c('MNRTCCallabilityStore'))],statics:{calculateState:function k(l){if(c('MercuryIDs').isGroupChat(l.threadID))return {isCallable:true};var m=c('MercuryIDs').getUserIDFromThreadID(l.threadID);m||h(0);return {isCallable:c('MNRTCCallabilityStore').isCallable(m)};}},propTypes:{className:i.string.isRequired,customColor:i.string.isRequired,isVideo:i.bool.isRequired,participants:i.instanceOf(c('immutable').Map).isRequired,thread:i.instanceOf(c('ImmutableObject')).isRequired,threadID:i.string.isRequired,viewer:i.string.isRequired,calleeName:i.string.isRequired},render:function k(){var l={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:c('MercuryIDs').isGroupChat(this.props.threadID)};return (c('React').createElement(c('Link.react'),{className:this.props.className,onClick:this._handleStartCall},this.props.isVideo?c('React').createElement(c('MessengerRTCVideoCallButton.react'),l):c('React').createElement(c('MessengerRTCVoiceCallButton.react'),l)));},_handleStartCall:function k(l){l.preventDefault();if(this.state.isCallable){if(c('MercuryIDs').isGroupChat(this.props.threadID)){e(['FBRTCSupport','MessengerRTCGroupCallUnsupportedBrowserDialogController','MessengerRTCGroupCallParticipantsPickerDialogController'],function(m,n,o){if(!m.isGroupCallWebtrcSupported()){n.render();return;}var p=this.props.thread.rtc_call_data;if(p&&p.call_state!=='NO_ONGOING_CALL'&&p.server_info_data){var q=c('RTCUtils').generateRandomInt(),r=new (c('FBRTCCallSummary'))({peerID:-1,callID:q,isCaller:false}),s='Join ongoing call button';if(p.call_state==='AUDIO_GROUP_CALL'){s=this.props.isVideo?'Join ongoing audio call with video button':'Join ongoing audio call without video button';}else if(p.call_state==='VIDEO_GROUP_CALL')s=this.props.isVideo?'Join ongoing video call with video button':'Join ongoing video call without video button';c('FBRTCCallUIWrapper').openGroupCallURI('GROUP:'+this.props.thread.thread_fbid,q,this.props.isVideo,p.server_info_data,s,r);return;}o.render({participants:this.props.participants.filter(function(t){var u=t.fbid;return u!==this.props.viewer;}.bind(this)),thread:this.props.thread,viewerID:this.props.viewer,clickSource:'multiway_messenger_dot_com',conferenceName:'GROUP:'+this.props.thread.thread_fbid,hasVideo:this.props.isVideo});}.bind(this));}else e(['FBRTCCore'],function(m){m.startOutgoingCall(c('MercuryIDs').getUserIDFromThreadID(this.props.threadID),'messenger_dot_com',!this.props.isVideo);}.bind(this));}else c('MessengerActions').showDialog(c('MessengerRTCUnavailableDialog.react'),{name:this.props.calleeName});}});f.exports=j;}),null);
__d('messengerRTCCallButtonReact',['bs_js_boolean','MessengerRTCCallButton.react','reactRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p){var q={className:i,customColor:j,isVideo:c('bs_js_boolean').to_js_boolean(k),participants:l,thread:m,threadID:n,viewer:o,calleeName:p},r=c('MessengerRTCCallButton.react');return function(s,t,u,v){return c('reactRe').wrapPropsShamelessly(r,q,s,t,u,v);};}g.createElement=h;}),null);
__d('montageThreadViewContainerReact',['MontageThreadViewContainer.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k={threadID:i,onResize:c('utilsRe').optionToJsNullUndefined(j)},l=c('MontageThreadViewContainer.react');return function(m,n,o,p){return c('reactRe').wrapPropsShamelessly(l,k,m,n,o,p);};}g.createElement=h;}),null);
__d('messengerDetailViewHeaderReact',['cx','fbt','invariant','archiveWarningReact','bs_curry','Event','FBRTCSupport','bs_js_boolean','bs_js_primitive','Link.react','MercuryConfig','MercuryParticipantTypes','MercuryThreadInfo','mercuryThreadTitleReact','messengerCustomColorUtilsRe','messengerDomIDsRe','messengerInfoPanelButtonReact','MessengerJoinableModeType','messengerLocalTimeReact','messengerPresenceStatusReact','messengerRTCCallButtonReact','MessengerWebDriverTestIDs','montageThreadViewContainerReact','RTCConfig','React','ReactDOM','reactRe','utilsRe','WorkFocusModeController','WorkModeConfig','debounce','messengerCalculateTruncationState'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('reactRe').Component[9][6],l=k[2],m=k[4],n="MessengerDetailViewHeaderReact",o=c('WorkFocusModeController').MessengerWorkAvailabilityStatus;function p(){return [0,0,0,0,0,0];}function q(ma){var na=ma[0],oa=ma[1],pa=ma[2],qa=ma[3],ra=ma[4],sa=c('utilsRe').optionToJsNullUndefined(na),ta=c('utilsRe').optionToJsNullUndefined(oa),ua=c('utilsRe').optionToJsNullUndefined(pa),va=c('utilsRe').optionToJsNullUndefined(qa),wa=c('utilsRe').optionToJsNullUndefined(ra);return c('messengerCalculateTruncationState')(sa,ta,ua,va,wa);}function r(ma){var na=ma[4];na[5]=[c('Event').listen(window,"resize",c('debounce')(function(){return q(na);},20))];return 0;}function s(ma){var na=ma[4][5];if(na){return na[0].remove();}else return 0;}function t(ma,na,oa){q(oa[4]);return 0;}function u(ma,na){na[4][3]=[c('ReactDOM').findDOMNode(ma)];return 0;}function v(ma,na){na[4][1]=[ma];return 0;}function w(ma,na){na[4][0]=[ma];return 0;}function x(ma,na){na[4][2]=[ma];return 0;}function y(ma,na){na[4][4]=[ma];return 0;}function z(ma){var na;if(o!==null){var oa=+o.displayFocusBanner(ma[5],ma[3]);na=oa!==0?[o]:0;}else na=0;if(na){return [0,c('React').createElement(na[0],{className:"_2v6o",viewer:ma[5],thread:c('utilsRe').optionToJsNullUndefined(ma[4]),participants:ma[3]})];}else{var pa=ma[0];if(pa){var qa=pa[0];return [0,c('bs_curry')._4(c('messengerPresenceStatusReact').createElement(["_2v6o"],+qa.isUserActive,c('bs_js_primitive').js_from_nullable_def(qa.lastActive),[qa.platform]),0,0,0,0)];}else return [1,null];}}function aa(ma){var na=ma[1][4];if(na){var oa=na[0];if(oa.has_montage&&c('MercuryConfig').MontageThreadViewer){return c('React').createElement("div",{ref:c('bs_curry')._1(ma[3],y),className:"_1cwz"},c('montageThreadViewContainerReact').createElement(oa.thread_id,0)(0,0,0,0));}else return null;}else return null;}function ba(ma){var na=ma[3].filter(function(oa){if(c('bs_js_primitive').js_is_nil_undef(oa)){return 0;}else return +(oa.fbid!==ma[5]);});if(na.count()!==1){return null;}else return c('bs_curry')._4(c('messengerLocalTimeReact').createElement("_5eu7",c('bs_js_primitive').js_from_nullable_def(na.first().timezone)),0,0,0,0);}function ca(ma,na){var oa=+(c('FBRTCSupport').isWebrtcSupported()&&c('FBRTCSupport').isOSSupported()),pa=ma[0],qa=pa?+(pa[0].contact.type===c('MercuryParticipantTypes').PAGE):0,ra=ma[4],sa;if(ra){var ta=ra[0].joinable_mode;sa=c('bs_js_primitive').js_is_nil_undef(ta)?0:+(ta.mode===c('MessengerJoinableModeType').JOINABLE);}else sa=0;var ua=ma[4],va;if(ua){var wa=ua[0],xa=wa.participants;va=c('bs_js_primitive').js_is_nil_undef(xa)?0:+(xa.length>1)&&+c('MercuryThreadInfo').canReply(wa)&&(+wa.is_canonical||na&&+c('RTCConfig').RtcConferencingVideoGK||1-na&&c('RTCConfig').RtcConferencingGK);}else va=0;if(oa&&!qa&&!sa){return va;}else return 0;}function da(ma){if(ca(ma,0)){var na=ma[4];if(na){var oa=na[0],pa=oa.thread_id,qa=ma[0];return c('React').createElement("li",undefined,c('messengerRTCCallButtonReact').createElement("_30yy",c('messengerCustomColorUtilsRe').customColorOrBlue(oa),0,ma[3],oa,pa,ma[5],qa?qa[0].contact.name:"")(0,0,0,0));}else return null;}else return null;}function ea(ma){if(ca(ma,1)){var na=ma[4];if(na){var oa=na[0],pa=oa.thread_id,qa=ma[0];return c('React').createElement("li",undefined,c('messengerRTCCallButtonReact').createElement("_30yy",c('messengerCustomColorUtilsRe').customColorOrBlue(oa),1,ma[3],oa,pa,ma[5],qa?qa[0].contact.name:"")(0,0,0,0));}else return null;}else return null;}function fa(ma){var na=ma[3],oa=ma[1],pa=oa[4];if(pa){var qa=pa[0],ra=1- +oa[3].isEmpty()&&+oa[3].every(function(va){if(c('bs_js_primitive').js_is_nil_undef(va)){return 0;}else return c('utilsRe').isTruthy(va.employee);}),sa=i._("Informaci\u00f3n de la conversaci\u00f3n"),ta=z(oa),ua=oa[1];return c('React').createElement("div",{ref:c('bs_curry')._1(na,w),className:"_5742"+(c('bs_js_boolean').to_js_boolean(ta[0])?' '+"_1_fz":'')},aa(ma),c('React').createElement("div",{key:"threadTitle",ref:c('bs_curry')._1(na,v),className:"_5743"},c('React').createElement("h2",{className:"_17w2",id:c('messengerDomIDsRe').ids.THREAD_TITLE},c('mercuryThreadTitleReact').createElement(["_3oh-"],qa,oa[5],0,0,0,0)(0,[c('bs_curry')._1(na,u)],0,0)),ta[1],ba(oa)),c('React').createElement("ul",{key:"buttonsContainer",ref:c('bs_curry')._1(na,x),className:"_fl2"},c('React').createElement("li",undefined,c('archiveWarningReact').createElement([+c('WorkModeConfig').is_work_user],[ra],[1],[{display:"block"}])(0,0,0,0)),da(oa),ea(oa),c('React').createElement("li",undefined,c('React').createElement(c('Link.react'),{"aria-expanded":ua!==0?false:true,"aria-label":sa,className:"_30yy","data-testid":c('MessengerWebDriverTestIDs').INFO_PANEL_BUTTON,onClick:oa[2],role:"button",title:sa},c('bs_curry')._4(c('messengerInfoPanelButtonReact').createElement(c('messengerCustomColorUtilsRe').customColorOrBlue(qa),oa[1]),0,0,0,0)),c('React').createElement("div",{"aria-owns":c('messengerDomIDsRe').ids.THREAD_INFO_PANEL}))));}else return null;}var ga=[function(ma){return [c('bs_js_primitive').js_from_nullable_def(ma.contactData),+ma.infoPanelCollapsed,ma.onInfoPanelToggle,ma.participants,c('bs_js_primitive').js_from_nullable_def(ma.thread),ma.viewer];}],ha=[l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga],ia=c('reactRe').CreateComponent([n,p,m,r,l,t,s,ga,fa]),ja=ia[1];function ka(ma,na,oa,pa,qa,ra){return c('bs_curry')._1(ja,[ma,na,oa,pa,qa,ra]);}var la=ia[0];g.MessengerDetailViewHeader=ha;g.comp=la;g.wrapProps=ja;g.createElement=ka;}),null);
__d('MessengerDetailViewHeaderContainer.react',['immutable','ImmutableObject','MercuryIDs','MercuryThreadIDMap','MercuryTypeaheadConstants','MessengerActions','MessengerComposerActions','MessengerComposeViewHeader.react','messengerDetailViewHeaderReact','MessengerView','React','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('messengerDetailViewHeaderReact').comp,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$MessengerDetailViewHeaderContainer1=function(r){var s=r.getUniqueID(),t=r.getType();if(t===c('MercuryTypeaheadConstants').THREAD_TYPE){var u=c('MercuryThreadIDMap').getForFBID(this.props.viewer);u.getClientIDFromServerID(s,function(v){c('MessengerComposerActions').moveDraftToNextThread(v);c('MessengerActions').selectThread(v);});c('MessengerComposerActions').exitComposeState();}else if(s===this.props.viewer||t===c('MercuryTypeaheadConstants').PAGE_TYPE){c('MessengerComposerActions').moveDraftToNextThread(c('MercuryIDs').getThreadIDFromUserID(s));c('MessengerComposerActions').exitComposeState();c('MessengerActions').selectThread(c('MercuryIDs').getThreadIDFromUserID(s));}else c('MessengerComposerActions').addToken(r);}.bind(this),this.$MessengerDetailViewHeaderContainer2=function(r){c('MessengerComposerActions').removeToken(r);},n;}l.prototype.shouldComponentUpdate=function(m){var n=m.contactData,o=babelHelpers.objectWithoutProperties(m,['contactData']),p=this.props,q=p.contactData,r=babelHelpers.objectWithoutProperties(p,['contactData']);return !c('shallowEqual')(o,r)||!c('shallowEqual')(n,q);};l.prototype.render=function(){return this.props.view===c('MessengerView').DETAIL.COMPOSE?c('React').createElement(c('MessengerComposeViewHeader.react'),{forceHideClearButton:true,onAddRecipient:this.$MessengerDetailViewHeaderContainer1,onRemoveRecipient:this.$MessengerDetailViewHeaderContainer2,onResize:this.props.onResize,recipients:this.props.recipients,viewer:this.props.viewer}):c('React').createElement(j,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer});};l.propTypes={contactData:k.object,infoPanelCollapsed:k.bool.isRequired,onInfoPanelToggle:k.func.isRequired,onResize:k.func.isRequired,participants:k.instanceOf(c('immutable').Map).isRequired,recipients:k.instanceOf(c('immutable').List).isRequired,thread:k.instanceOf(c('ImmutableObject')),view:k.string,viewer:k.string.isRequired};f.exports=l;}),null);
__d('MessengerErrorBoundary.react',['cx','fbt','ErrorBoundary.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=function o(p){return i._({"conversation list":"No se ha podido mostrar la lista de conversaciones.","conversation":"No se ha podido mostrar la conversaci\u00f3n.","composer":"No se ha podido mostrar el editor.","conversation information":"No se ha podido mostrar la informaci\u00f3n de la conversaci\u00f3n."},[i['enum'](p,{'conversation list':'conversation list',conversation:'conversation',composer:'composer','conversation information':'conversation information'})]);},m=function o(p,q){return function(){return (c('React').createElement('div',{className:c('joinClasses')("_5jpt",q)},p));};};j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerErrorBoundary1=function(t,u){this.props.onHandleError&&this.props.onHandleError(t,u);}.bind(this),p;}n.prototype.render=function(){var o=this.props,p=o.className,q=o.component,r=babelHelpers.objectWithoutProperties(o,['className','component']);return c('React').createElement(c('ErrorBoundary.react'),babelHelpers['extends']({},r,{fallbackComponent:m(l(q),p),onHandleError:this.$MessengerErrorBoundary1,bigRedBox:true}));};f.exports=n;}),null);
__d('MessengerPresenceStatusUtils',['fbt','AvailableListConstants','LastActiveTimes','MercuryIDs','PresenceStatus','WorkGKs'],(function a(b,c,d,e,f,g,h){'use strict';var i={getStatusFromCanonicalThread:function j(k,l){var m=null;if(l&&l.is_canonical){var n=k.get(c('MercuryIDs').getParticipantIDFromFromThreadID(l.thread_id));if(n){var o=c('PresenceStatus').get(n.fbid),p=void 0,q=void 0,r=c('WorkGKs').workplace_www_chat_branding?h._("Work Chat"):h._("Messenger"),s=n.is_messenger_user?r:h._("Facebook");if(o!==c('AvailableListConstants').ACTIVE){p=c('LastActiveTimes').get(n.fbid);q=c('LastActiveTimes').getShortDisplay(n.fbid);}m={contact:n,platform:s,isUserActive:o===c('AvailableListConstants').ACTIVE,lastActiveTS:p,lastActive:q};}}return m;}};f.exports=i;}),null);
__d('MessengerConfirmLeaveGroupDialog.react',['ImmutableObject','MessengerActions','MessengerAdminGroupUtils','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('messengerDialogBodyReact').comp,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$MessengerConfirmLeaveGroupDialog2=function(r){r.stopPropagation();this.props.onLeave();c('MessengerActions').hideDialog();}.bind(this),this.$MessengerConfirmLeaveGroupDialog1=function(r){if(!r)c('MessengerActions').hideDialog();},n;}l.prototype.render=function(){var m=this.props.isViewerAdmin,n=c('MessengerAdminGroupUtils').getLeaveGroupBodyText(m,this.props.thread),o=c('MessengerAdminGroupUtils').getLeaveGroupButtonText(m,this.props.thread),p=c('MessengerAdminGroupUtils').getLeaveGroupTitleText(m,this.props.thread);return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerConfirmLeaveGroupDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,p),c('React').createElement(j,null,n),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogButton.react'),{label:o,onClick:this.$MessengerConfirmLeaveGroupDialog2,type:'primary',use:'danger'})));};l.propTypes={isViewerAdmin:k.bool.isRequired,onCancel:k.func,onLeave:k.func.isRequired,thread:k.instanceOf(c('ImmutableObject')).isRequired};f.exports=l;}),null);
__d('MessengerApprovalRequester.react',['cx','fbt','Link.react','MercuryThreadActions','messengerContactImageReact','MessengerTextWithEmoticons.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreadActions').get(),m=c('messengerContactImageReact').comp,n=32;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;o.prototype.render=function(){var p=this.props,q=p.isMessengerUser,r=p.imageSRC,s=p.name,t=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:s});return (c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq _4fq"},c('React').createElement(m,{className:"_5l39 _5rmm",isMessengerUser:q,size:n,src:r}),c('React').createElement('span',{className:"_3tkx"},t)),c('React').createElement('div',{className:"_3ihq _4fs"},c('React').createElement(c('Link.react'),{className:"_5a73",href:'#',onClick:this.$MessengerApprovalRequester1.bind(this)},i._("Aceptar")),c('React').createElement(c('Link.react'),{className:"_5a73",href:'#',onClick:this.$MessengerApprovalRequester2.bind(this)},i._("Ignorar")))));};o.prototype.$MessengerApprovalRequester1=function(event){var p=this.props,q=p.threadFBID,r=p.userID;l.acceptToJoinableGroup(q,r);};o.prototype.$MessengerApprovalRequester2=function(event){var p=this.props,q=p.threadFBID,r=p.userID;l.rejectToJoinableGroup(q,r);};function o(){j.apply(this,arguments);}f.exports=o;}),null);
__d('customColorHighlightingReact',['CustomColorHighlighting.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j={customColor:c('utilsRe').optionToJsNullUndefined(i)},k=c('CustomColorHighlighting.react');return function(l,m,n,o){return c('reactRe').wrapPropsShamelessly(k,j,l,m,n,o);};}g.createElement=h;}),null);
__d('messengerMenuReact',['MessengerMenu.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';var h=c('MessengerMenu.react').Item,i=c('MessengerMenu.react').Separator,j={},k=c('MessengerMenu.react');function l(s,t,u,v){return c('reactRe').wrapPropsShamelessly(k,j,s,t,u,v);}var m=[l];function n(s,t){var u={label:s,onclick:c('utilsRe').optionToJsNullUndefined(t)};return function(v,w,x,y){return c('reactRe').wrapPropsShamelessly(h,u,v,w,x,y);};}var o=[n],p={};function q(s,t,u,v){return c('reactRe').wrapPropsShamelessly(i,p,s,t,u,v);}var r=[q];g.messengerMenuItem=h;g.messengerMenuSeparator=i;g.MessengerMenuReact=m;g.MessengerMenuItemReact=o;g.MessengerMenuSeparatorReact=r;}),null);
__d('messengerPopoverMenuReact',['MessengerPopoverMenu.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){var n={disableArrowKeyActivation:c('utilsRe').optionBoolToNullUndefinedBoolean(i),isOpen:c('utilsRe').optionBoolToNullUndefinedBoolean(j),menu:k,onHide:c('utilsRe').optionToJsNullUndefined(l),"onShow ":c('utilsRe').optionToJsNullUndefined(m)},o=c('MessengerPopoverMenu.react');return function(p,q,r,s){return c('reactRe').wrapPropsShamelessly(o,n,p,q,r,s);};}g.createElement=h;}),null);
__d('messengerInfoPanelSectionReact',['cx','fbt','bs_array','bs_curry','customColorHighlightingReact','bs_js_boolean','bs_js_primitive','Link.react','messengerMenuReact','messengerPopoverMenuReact','MessengerWebDriverTestIDs','React','reactRe','utilsRe'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reactRe').Component[8],k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q="MessengerInfoPanelSectionReact";function r(ba){var ca=c('utilsRe').isSomeTrue(ba[2]),da=ca!==0?i._("Mostrar secci\u00f3n"):i._("Ocultar secci\u00f3n");return c('bs_curry')._4(c('messengerMenuReact').MessengerMenuReact[0],[c('React').createElement(c('messengerMenuReact').messengerMenuItem,{"data-testid":c('MessengerWebDriverTestIDs').INFO_PANEL_TOGGLER_OPTION,label:da,onclick:c('utilsRe').optionToJsNullUndefined(ba[3])},da),0],0,0,0);}function s(ba){var ca=c('utilsRe').isSomeTrue(ba[1]);if(ca!==0){return c('messengerPopoverMenuReact').createElement(0,0,r(ba),0,0)([c('React').createElement(c('Link.react'),{"aria-haspopup":1,"aria-label":i._("Opciones del panel de informaci\u00f3n"),className:"_1lj1",role:"button"}),0],0,0,0);}else return null;}function t(ba){var ca=ba[4];if(ca){return c('React').createElement("h4",{className:"_1lj0"},ca[0],s(ba));}else return null;}function u(ba){var ca=ba[1],da=ca[1];return c('React').createElement("div",{className:"_1lix"+(c('bs_js_boolean').to_js_boolean(c('utilsRe').isSomeTrue(da))?' '+"_1liy":'')+(c('bs_js_boolean').to_js_boolean(c('utilsRe').isSomeTrue(da)&&c('utilsRe').isSomeTrue(ca[2]))?' '+"_1liz":'')},c('React').createElement("div",{className:"_1li-"}),t(ca),c('React').createElement("div",{className:"_1li_"},c('customColorHighlightingReact').createElement(ca[0])([c('bs_array').of_list(ca[5]),0],0,0,0)));}var v=[function(ba){return [c('bs_js_primitive').js_from_nullable_def(ba.customColor),c('utilsRe').nullUndefinedBooleanToOptionBool(ba.isCollapsible),c('utilsRe').nullUndefinedBooleanToOptionBool(ba.isCollapsed),c('bs_js_primitive').js_from_nullable_def(ba.onToggle),c('bs_js_primitive').js_from_nullable_def(ba.title),c('reactRe').jsToReasonChildren(ba.children)];}],w=[k,l,m,n,o,p,q,r,s,t,u,v],x=c('reactRe').CreateComponent([q,o,p,k,m,l,n,v,u]),y=x[1];function z(ba,ca,da,ea,fa,ga){return c('bs_curry')._2(y,[ba,ca,da,ea,fa,ga],ga);}var aa=x[0];g.MessengerInfoPanelSection=w;g.comp=aa;g.wrapProps=y;g.createElement=z;}),null);
__d('MessengerInfoPanelGroupSection.react',['cx','fbt','FBToggleSwitch.react','immutable','MercuryIDs','MercuryParticipants','MercuryThreadActions','MessengerAdminGroupUtils','MessengerApprovalModeTypes','MessengerApprovalRequester.react','messengerInfoPanelSectionReact','MessengerJoinableModeType','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreadActions').get(),m=c('messengerInfoPanelSectionReact').comp;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.state={approvalQueue:c('immutable').Map()};}n.prototype.componentDidMount=function(){this.$MessengerInfoPanelGroupSection1(this.props.thread);};n.prototype.render=function(){return (c('React').createElement('div',null,c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:this.props.isOptionsCollapsed,onToggle:this.props.onOptionsToggle,title:i._("Opciones del grupo")},c('React').createElement('div',{className:"_3iho"},this.$MessengerInfoPanelGroupSection2(),this.$MessengerInfoPanelGroupSection3())),this.$MessengerInfoPanelGroupSection4()));};n.prototype.componentWillReceiveProps=function(o){this.$MessengerInfoPanelGroupSection1(o.thread);};n.prototype.$MessengerInfoPanelGroupSection1=function(o){var p=o&&o.approval_queue_ids&&o.approval_queue_ids;if(p)c('MercuryParticipants').getMulti(p,function(q){this.setState({approvalQueue:c('immutable').Map(q)});}.bind(this));};n.prototype.$MessengerInfoPanelGroupSection2=function(){var o=this.props.thread,p=o.joinable_mode.link;if(!c('MessengerAdminGroupUtils').showJoinableLink(o))return null;return (c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq"},i._("Compartir el enlace"),c('React').createElement('div',{className:"_3ihp _3oh-"},p))));};n.prototype.$MessengerInfoPanelGroupSection3=function(){var o=this.props,p=o.viewer,q=o.thread,r=c('MessengerAdminGroupUtils').isApprovalOpenThread(q);if(!c('MessengerAdminGroupUtils').showJoinableApprovalToggle(q,p))return null;return (c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq"},i._("Aprobaci\u00f3n de nuevos miembros"),c('React').createElement('div',{className:"_3ihp"},i._("Aprueba qui\u00e9n puede unirse al grupo"))),c('React').createElement('div',{className:"_3ihq"},c('React').createElement(c('FBToggleSwitch.react'),{animate:true,checked:!r,onToggle:function s(t){return (l.setApprovalMode(t?c('MessengerApprovalModeTypes').APPROVALS:c('MessengerApprovalModeTypes').OPEN,q));}}))));};n.prototype.$MessengerInfoPanelGroupSection4=function(){var o=this.props,p=o.viewer,q=o.thread,r=0;if(q&&q.approval_queue_ids&&q.approval_queue_ids.length)r=q.approval_queue_ids.length;if(!c('MessengerAdminGroupUtils').showApprovalQueue(q,p))return null;return (c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:this.props.isApprovalsCollapsed,onToggle:this.props.onApprovalToggle,title:i._("Solicitudes pendientes ({pendingRequestCount})",[i.param('pendingRequestCount',r)])},c('React').createElement('div',{className:"_3iho _3oh-"},this.state.approvalQueue.map(function(s){return (c('React').createElement(c('MessengerApprovalRequester.react'),{key:s.id,imageSRC:s.image_src,isMessengerUser:s.is_messenger_user,name:s.name,threadFBID:this.props.thread.thread_fbid,userID:c('MercuryIDs').getUserIDFromParticipantID(s.id)}));}.bind(this)).toArray())));};f.exports=n;}),null);
__d('MessengerAddIconSVG.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=function j(k){return (c('React').createElement('div',{className:k.className},c('React').createElement('svg',{viewBox:'-8 -8 48 48'},c('React').createElement('title',null,'add to group'),c('React').createElement('path',{d:'M16,0 V32 M0,16 H32',fillRule:'evenodd',clipRule:'evenodd',fill:'none',stroke:k.customColor,strokeWidth:2,strokeMiterlimit:10,strokeLinecap:'round'}))));};i.propTypes={className:h.string,customColor:h.string.isRequired};f.exports=i;}),null);
__d('MessengerMakeAsOwnerDialog.react',['MessengerAdminGroupUtils','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('messengerDialogBodyReact').comp,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').PureComponent);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$MessengerMakeAsOwnerDialog1=function(r){this.props.onToggle&&this.props.onToggle(false);this.props.onMakeOwner&&this.props.onMakeOwner(r);}.bind(this),n;}l.prototype.render=function(){var m=c('MessengerAdminGroupUtils').getMakeOwnerTitleText(this.props.isUserViewer,this.props.name),n=c('MessengerAdminGroupUtils').getMakeOwnerBodyText(this.props.isUserViewer,this.props.name),o=c('MessengerAdminGroupUtils').getMakeOwnerButtonText(this.props.isUserViewer,this.props.name);return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onToggle},c('React').createElement(c('MessengerDialogHeader.react'),null,m),c('React').createElement(j,null,n),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogButton.react'),{label:o,onClick:this.$MessengerMakeAsOwnerDialog1,type:'primary',use:'danger'})));};l.propTypes={onMakeOwner:k.func,onToggle:k.func.isRequired,name:k.string.isRequired,isUserViewer:k.bool.isRequired};f.exports=l;}),null);
__d('MessengerRemoveAsOwnerDialog.react',['fbt','MessengerAdminGroupUtils','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerRemoveAsOwnerDialog1=function(s){this.props.onToggle&&this.props.onToggle(false);this.props.onRemove&&this.props.onRemove(s);}.bind(this),o;}m.prototype.render=function(){var n=c('MessengerAdminGroupUtils').getRemoveOwnerBodyText(this.props.isUserViewer,this.props.isLastAdminInThread,this.props.name);return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onToggle},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("\u00bfEliminar de la lista de propietarios del grupo?")),c('React').createElement(k,null,n),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogButton.react'),{label:h._("Eliminar administrador"),onClick:this.$MessengerRemoveAsOwnerDialog1,type:'primary',use:'danger'})));};m.propTypes={onRemove:l.func,onToggle:l.func.isRequired,name:l.string.isRequired,isLastAdminInThread:l.bool.isRequired,isUserViewer:l.bool.isRequired};f.exports=m;}),null);
__d('MessengerRemoveFromGroupDialog.react',['fbt','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerRemoveFromGroupDialog1=function(s){this.props.onToggle&&this.props.onToggle(false);this.props.onRemove&&this.props.onRemove(s);}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onToggle},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Eliminar del grupo")),c('React').createElement(k,null,h._("\u00bfSeguro que quieres eliminar a esta persona del grupo? Ya no podr\u00e1 enviar ni recibir mensajes.")),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogButton.react'),{label:h._("Eliminar"),onClick:this.$MessengerRemoveFromGroupDialog1,type:'primary',use:'danger'})));};m.propTypes={onRemove:l.func,onToggle:l.func};f.exports=m;}),null);
__d('MessengerInfoPanelContactActions.react',['cx','fbt','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryThreads','MessengerActions','MessengerAdminGroupUtils','messengerContactActionsRe','MessengerMakeAsOwnerDialog.react','MessengerMenu.react','MessengerPopoverMenu.react','MessengerRemoveAsOwnerDialog.react','MessengerRemoveFromGroupDialog.react','MessengerStateStore','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('messengerContactActionsRe').actions,k=c('MessengerMenu.react').Item,l=c('MessengerMenu.react').Separator,m=c('React').PropTypes,n=c('React').createClass({displayName:'MessengerInfoPanelContactActions',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerStateStore'))],propTypes:{adminIds:m.arrayOf(m.string),extrasEnabled:m.bool.isRequired,contact:m.instanceOf(c('ImmutableObject')).isRequired,isOpen:m.bool,onAction:m.func.isRequired,onToggle:m.func.isRequired,viewer:m.string.isRequired},statics:{calculateState:function o(p){var q=c('MercuryThreads').getForFBID(p.viewer),r=c('MessengerStateStore').getState().activeThreadID,s=r?q.getOrFetch(r):null;return {thread:s};}},render:function o(){var p=this._isViewerAdmin(),q=c('MessengerAdminGroupUtils').isAdmin(this.props.adminIds,this.props.contact.uid),r=this._isUserViewer(),s=c('MessengerAdminGroupUtils').canRemoveAdmin(p,q,this.state.thread)?c('React').createElement(k,{label:i._("Eliminar de la lista de administradores"),onclick:this._handleRemoveAsOwnerClick}):null,t=null,u=c('MessengerAdminGroupUtils').canMakeOthersAdmins(p,q,this.state.thread),v=c('MessengerAdminGroupUtils').canMakeSelfAdmin(r,this.state.thread);if(u||v)t=c('React').createElement(k,{label:i._("Nombrar administrador"),onclick:this._hanleMakeOwnerClick});var w=void 0;if(r){if(t||s){w=c('React').createElement(c('MessengerMenu.react'),null,t,s);}else return null;}else w=c('React').createElement(c('MessengerMenu.react'),null,c('React').createElement(k,{label:i._("Mensaje"),onclick:this._makeActionHandler(j.MESSAGE)}),this.props.contact.href?c('React').createElement(k,{label:i._("Ver perfil"),onclick:this._makeActionHandler(j.PROFILE)}):null,t,s,this._renderExtras());return (c('React').createElement(c('MessengerPopoverMenu.react'),{menu:w,onHide:function(){return this.props.onToggle(false);}.bind(this),onShow:function(){return this.props.onToggle(true);}.bind(this)},c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_57gs"+(this.props.isOpen?' '+"_57gt":'')),onClick:this._handleClick,role:'button',tabIndex:0})));},_renderExtras:function o(){if(!this.props.extrasEnabled)return null;var p=[c('React').createElement(l,{key:'separator'})],q=this._isViewerAdmin();if(c('MessengerAdminGroupUtils').canRemoveFromGroup(q,this.state.thread))p.push(c('React').createElement(k,{key:'remove-from-group',label:i._("Eliminar del grupo"),onclick:this._handleRemoveClick}));return p.length>=2?p:null;},_handleClick:function o(p){p.stopPropagation();p.preventDefault();},_makeActionHandler:function o(p){return function(q){this._handleClick(q);this.props.onAction(p,q);}.bind(this);},_handleRemoveClick:function o(p){this._handleClick(p);c('MessengerActions').showDialog(c('MessengerRemoveFromGroupDialog.react'),{onToggle:this._handleDialogToggle,onRemove:this._handleDialogRemoveClick});},_handleRemoveAsOwnerClick:function o(p){this._handleClick(p);var q=c('MercuryParticipants').getNow(this.props.contact.uid);c('MessengerActions').showDialog(c('MessengerRemoveAsOwnerDialog.react'),{onToggle:this._handleDialogToggle,onRemove:this._handleOwnerRemoveClick,name:q&&q.name,isUserViewer:this._isUserViewer(),isLastAdminInThread:this.props.adminIds&&this.props.adminIds.length===1});},_handleDialogRemoveClick:function o(p){this.props.onAction(j.REMOVE,p);},_handleOwnerRemoveClick:function o(p){this.props.onAction(j.REMOVE_OWNER,p);},_hanleMakeOwnerClick:function o(p){this._handleClick(p);var q=c('MercuryParticipants').getNow(this.props.contact.uid);c('MessengerActions').showDialog(c('MessengerMakeAsOwnerDialog.react'),{onToggle:this._handleDialogToggle,onMakeOwner:this._handleOwnerAddClick,name:q&&q.name,isUserViewer:this._isUserViewer()});},_handleOwnerAddClick:function o(p){this.props.onAction(j.ADD_OWNER,p);},_handleDialogToggle:function o(p){if(!p)c('MessengerActions').hideDialog();},_isUserViewer:function o(){return c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid;},_isViewerAdmin:function o(){return c('MessengerAdminGroupUtils').isViewerAdmin(this.props.adminIds,this.props.viewer);}});f.exports=n;}),null);
__d("MessengerSortParticipants",[],(function a(b,c,d,e,f,g){var h={sortAlphabeticalWithAdmins:function i(j,k){var l=k.filter(function(n){return !!n&&j&&j.indexOf(n.id)!==-1;}).toArray().sort(function(n,o){return n.name.localeCompare(o.name);}),m=k.filter(function(n){return !!n&&(!j||j.indexOf(n.id)===-1);}).toArray().sort(function(n,o){return n.name.localeCompare(o.name);});return l.concat(m);}};f.exports=h;}),null);
__d('MessengerInfoPanelPeopleSection.react',['cssVar','cx','fbt','immutable','ImmutableObject','Link.react','MessengerAddIconSVG.react','MessengerAdminGroupUtils','MessengerContactList.react','MessengerInfoPanelContactActions.react','messengerInfoPanelSectionReact','MessengerSortParticipants','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('messengerInfoPanelSectionReact').comp,n=c('React').PropTypes;k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.render=function(){var p=this.props,q=p.adminIds,r=p.contactAdapter,s=p.isCollapsed,t=p.isViewerSubscribed,u=p.onContactAction,v=p.onContactSelect,w=p.onToggle,x=p.participants,y=p.thread,z=p.viewer;return (c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:s,onToggle:w,title:j._("Personas")},this.$MessengerInfoPanelPeopleSection1(),c('React').createElement(c('MessengerContactList.react'),{actionsClass:c('MessengerInfoPanelContactActions.react'),className:"_4wc-",contactAdapter:r,disableRole:true,extraActionsEnabled:t,listSections:c('immutable').OrderedMap([[null,c('MessengerSortParticipants').sortAlphabeticalWithAdmins(q,x)]]),onSelect:v,onAction:u,viewer:z,adminIds:q,thread:y})));};o.prototype.$MessengerInfoPanelPeopleSection1=function(){if(!this.props.canViewerReply)return null;var p=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread)?j._("Invitar"):j._("A\u00f1adir personas"),q=this.props.thread.custom_color||"#0084ff";return (c('React').createElement(c('Link.react'),{className:"_4rph",onClick:this.props.onAddPeopleClick},c('React').createElement(c('MessengerAddIconSVG.react'),{className:"_4rpi",customColor:q}),c('React').createElement('div',{className:"_4rpj"},p)));};function o(){k.apply(this,arguments);}o.propTypes={adminIds:n.arrayOf(n.string),canViewerReply:n.bool.isRequired,contactAdapter:n.func.isRequired,isCollapsed:n.bool.isRequired,isViewerSubscribed:n.bool.isRequired,onAddPeopleClick:n.func.isRequired,onContactAction:n.func.isRequired,onContactSelect:n.func.isRequired,onToggle:n.func.isRequired,participants:n.instanceOf(c('immutable').Map).isRequired,thread:n.instanceOf(c('ImmutableObject')).isRequired,viewer:n.string.isRequired};f.exports=o;}),null);
__d('MessengerSharedPhotos.react',['cx','MercuryConfig','MessengerSharedPhoto.react','MessengerSpinner.react','MessagesViewerSetID','MessengerAttachmentViewer','MessengerSharedPhotosAlbumViewContainer.react','React','Relay','RelayQL','SpotlightViewer','SpotlightMessengerSharedMediaViewerContainer.react','URI','Vector','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=10,m=80;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={albumView:null,imagesLoaded:l,shownID:null},this.$MessengerSharedPhotos1=null,this.$MessengerSharedPhotos2=function(){c('cancelAnimationFrame')(this.$MessengerSharedPhotos1);var t=c('MercuryConfig').SharedPhotoNewView,u=t?this.props.sharedPhotoAndVideos:this.props.sharedPhotos;if(this.state.imagesLoaded<u.edges.length){this.$MessengerSharedPhotos1=c('requestAnimationFrame')(function(){this.setState({imagesLoaded:Math.min(u.edges.length,this.state.imagesLoaded+l)});}.bind(this));}else if(!this.props.allPhotosDisplayed)this.props.onAllPhotosDisplayed();}.bind(this),this.$MessengerSharedPhotos3=function(t){var u=c('Vector').getViewportDimensions().x,v=this.props.sharedPhotoAndVideos.edges.length,w=this.props.sharedPhotoAndVideos.edges.find(function(aa){return aa.node.id===t;});if(!w)return;var x=this.props.sharedPhotoAndVideos.edges.indexOf(w),y=(v-x)*m;if(y>u/2)return;var z=Math.ceil((u/2-y)/m);this.props.fetchMore(z);}.bind(this),this.$MessengerSharedPhotos4=function(t){var u=this.props,v=u.threadFBID,w=u.sharedPhotos.edges,x=new (c('URI'))('/ajax/messaging/attachments/sharedphotos.php').setQueryData({thread_id:v,image_id:t}),y=w.find(function(z){var aa=z.node;return aa.legacy_attachment_id===t;}).node;c('MessengerAttachmentViewer').bootstrapWithConfig({dimensions:y.original_dimensions.x+','+y.original_dimensions.y,disablePaging:w.length===1,endpoint:x,fbid:t,setID:c('MessagesViewerSetID').MESSAGES_VIEW_ALL_IN_THREAD,snapToPhoto:true,src:y.image.uri,threadFBID:this.props.threadFBID});}.bind(this),this.$MessengerSharedPhotos5=function(t){var u=this.props.sharedPhotoAndVideos,v=u.edges.find(function(w){var x=w.node;return x.id===t;});return v.node;}.bind(this),this.$MessengerSharedPhotos6=function(t){this.setState({shownID:t});}.bind(this),this.$MessengerSharedPhotos7=function(t){this.setState({shownID:t},function(){this.$MessengerSharedPhotos3(this.state.shownID);this.$MessengerSharedPhotos8();}.bind(this));}.bind(this),this.$MessengerSharedPhotos9=function(t){this.setState({shownID:t});}.bind(this),this.$MessengerSharedPhotos8=function(){this.setState({albumView:null});}.bind(this),this.$MessengerSharedPhotos10=function(t){this.setState({albumView:t,shownID:null});}.bind(this),this.$MessengerSharedPhotos11=function(t){this.setState({albumView:null,shownID:t});}.bind(this),this.$MessengerSharedPhotos12=function(){this.setState({shownID:null});}.bind(this),p;}n.prototype.componentDidMount=function(){this.$MessengerSharedPhotos2();};n.prototype.componentWillReceiveProps=function(o){if(o.threadFBID!==this.props.threadFBID)this.setState({imagesLoaded:l});};n.prototype.componentDidUpdate=function(){this.$MessengerSharedPhotos2();};n.prototype.componentWillUnmount=function(){c('cancelAnimationFrame')(this.$MessengerSharedPhotos1);};n.prototype.shouldComponentUpdate=function(o,p){var q=c('MercuryConfig').SharedPhotoNewView?o.sharedPhotoAndVideos:o.sharedPhotos,r=q.edges,s=q.pageInfo&&q.pageInfo.has_next_page,t=r.find(function(u){var v=u.node;return v.id===p.shownID;});if(!t&&s&&r.length<p.imagesLoaded){setTimeout(function(){return this.props.fetchMore(p.imagesLoaded);}.bind(this),1000);return false;}return true;};n.prototype.$MessengerSharedPhotos13=function(){return (c('React').createElement(c('SpotlightMessengerSharedMediaViewerContainer.react'),{onClosePhotoView:this.$MessengerSharedPhotos12,openAlbum:this.$MessengerSharedPhotos10,photoID:this.state.shownID,rootClassName:'',threadID:this.props.threadFBID,disableForward:false}));};n.prototype.$MessengerSharedPhotos14=function(){return (c('React').createElement(c('SpotlightViewer'),{className:"_3ode",onHide:this.$MessengerSharedPhotos8,open:true,ref:'spotlightViewer'},c('React').createElement(c('MessengerSharedPhotosAlbumViewContainer.react'),{onClick:this.$MessengerSharedPhotos11,onCloseSharedPhotos:this.$MessengerSharedPhotos8,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView})));};n.prototype.$MessengerSharedPhotos15=function(){return (c('React').createElement('div',{className:"_2n20"},c('React').createElement(c('MessengerSpinner.react'),null)));};n.prototype.render=function(){var o=this.props,p=o.isLoadingImages,q=o.sharedPhotos,r=o.sharedPhotoAndVideos,s=c('MercuryConfig').SharedPhotoNewView,t=s?r:q,u=t.edges,v=this.state.imagesLoaded,w="_3m31",x=s?this.$MessengerSharedPhotos6:this.$MessengerSharedPhotos4,y=p?this.$MessengerSharedPhotos15():null,z=s&&this.state.shownID?this.$MessengerSharedPhotos13():null,aa=s&&this.state.albumView?this.$MessengerSharedPhotos14():null;return (c('React').createElement('div',null,z,aa,c('React').createElement('div',{className:"_40jj _5l-3"},u.slice(0,v).map(function(ba){var ca=ba.node;return (c('React').createElement(c('MessengerSharedPhoto.react'),{className:w,fbid:ca.legacy_attachment_id,key:ca.legacy_attachment_id,onClick:x,photoID:ca.id,uri:ca.image.uri}));})),y));};n.propTypes={allPhotosDisplayed:k.bool.isRequired,isLoadingImages:k.bool.isRequired,fetchMore:k.func.isRequired,onAllPhotosDisplayed:k.func.isRequired,sharedPhotos:k.object.isRequired,sharedPhotoAndVideos:k.object.isRequired,threadFBID:k.string.isRequired};f.exports=c('Relay').createContainer(n,{fragments:{sharedPhotos:function o(){return function(){return {children:[{children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:250}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:250}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'MessageImage'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessageImagesEdge'},{fieldName:'count',kind:'Field',metadata:{},type:'Int'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isRequisite:true},type:'PageInfo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedPhotos_react_SharedPhotosRelayQL',type:'MessageImagesConnection'};}();},sharedPhotoAndVideos:function o(){return function(){return {children:[{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'Node',type:'Node'},{children:[{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:250}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:250}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageImage',type:'MessageImage'},{children:[{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:250}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:250}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageVideo',type:'MessageVideo'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isRequisite:true},type:'MessageSharedPhotoAndVideo'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessageSharedPhotoAndVideoEdge'},{fieldName:'count',kind:'Field',metadata:{},type:'Int'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isRequisite:true},type:'PageInfo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedPhotos_react_SharedPhotoAndVideosRelayQL',type:'MessageSharedPhotoAndVideoConnection'};}();}}});}),null);
__d('MessengerSharedPhotosContainer.react',['fbt','messengerInfoPanelSectionReact','MessengerSharedPhotos.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('messengerInfoPanelSectionReact').comp,j=c('React').PropTypes,k=10,l=c('React').createClass({displayName:'MessengerSharedPhotosContainer',propTypes:{customColor:j.string,clearForceFetch:j.func.isRequired,getIsScrolledToBottom:j.func.isRequired,getScrollableHeight:j.func.isRequired,isCollapsed:j.bool.isRequired,newViewGK:j.bool,onToggle:j.func.isRequired,sharedPhotos:j.object,threadFBID:j.string},getInitialState:function m(){return {allPhotosDisplayed:false,isLoadingImages:false};},componentWillReceiveProps:function m(n){if(n.threadFBID!==this.props.threadFBID)this.setState({allPhotosDisplayed:false});},componentDidMount:function m(){this._maybeLoadMore();},componentDidUpdate:function m(){this._maybeLoadMore();},_maybeLoadMore:function m(){var n=this.props,o=n.getIsScrolledToBottom,p=n.getScrollableHeight,q=n.isCollapsed,r=n.sharedPhotos,s=this.state.isLoadingImages;if(s||q||!r||!this.state.allPhotosDisplayed||!o()||!p())return;var t=this.props.newViewGK?r.message_shared_photo_and_video.page_info.has_next_page:r.message_images.page_info.has_next_page;if(!t)return;this.setState({isLoadingImages:true},function(){this.props.relay.setVariables({count:this.props.relay.variables.count+k},function(u){if(u.done||u.aborted)if(this.isMounted()){this.props.clearForceFetch();this.setState({allPhotosDisplayed:false,isLoadingImages:false});}}.bind(this));}.bind(this));},_loadMore:function m(n){if(n<=0)return;this.setState({isLoadingImages:true},function(){this.props.relay.setVariables({count:this.props.relay.variables.count+n},function(o){if(o.done||o.aborted)this.setState({isLoadingImages:false});}.bind(this));}.bind(this));},_handleAllPhotosDisplayed:function m(){this.setState({allPhotosDisplayed:true});},render:function m(){var n=this.props,o=n.isCollapsed,p=n.onToggle,q=n.sharedPhotos,r=n.threadFBID,s=this.state.isLoadingImages;if(!r||!q)return null;var t=this.props.newViewGK?q.message_shared_photo_and_video:q.message_images;if(!t.page_info.has_next_page&&t.count===0)return null;return (c('React').createElement(i,{customColor:this.props.customColor,isCollapsible:true,isCollapsed:o,onToggle:p,title:h._("Fotos compartidas")},c('React').createElement(c('MessengerSharedPhotos.react'),{allPhotosDisplayed:this.state.allPhotosDisplayed,fetchMore:this._loadMore,isLoadingImages:s,sharedPhotos:t,sharedPhotoAndVideos:t,onAllPhotosDisplayed:this._handleAllPhotosDisplayed,threadFBID:r})));}});f.exports=c('Relay').createContainer(l,{initialVariables:{newViewGK:false,count:k},fragments:{sharedPhotos:function m(n){return function(o,p){return {children:[{calls:[{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true},type:'PageInfo'},{fieldName:'count',kind:'Field',metadata:{},type:'Int'},c('RelayQL').__frag(o)]),directives:[{kind:'Directive',name:'skip',args:[{name:'if',value:{kind:'CallVariable',callVariableName:'newViewGK'}}]}],fieldName:'message_images',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'MessageImagesConnection'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true},type:'PageInfo'},{fieldName:'count',kind:'Field',metadata:{},type:'Int'},c('RelayQL').__frag(p)]),directives:[{kind:'Directive',name:'include',args:[{name:'if',value:{kind:'CallVariable',callVariableName:'newViewGK'}}]}],fieldName:'message_shared_photo_and_video',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'MessageSharedPhotoAndVideoConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedPhotosContainer_react_SharedPhotosRelayQL',type:'MessageThread'};}(c('MessengerSharedPhotos.react').getFragment('sharedPhotos'),c('MessengerSharedPhotos.react').getFragment('sharedPhotoAndVideos'));}}});}),null);
__d('MessengerSharedPhotosContainerRoute',['RelayRoute','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='MessengerSharedPhotosContainerRoute';j.paramDefinitions={threadFBID:{type:'String',required:true},newViewGK:{type:'Boolean',required:false}};j.queries={sharedPhotos:function k(l,m){var n=m.newViewGK;return function(o){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'threadFBID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(o)]),fieldName:'message_thread',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'MessengerSharedPhotosContainerRoute',type:'MessageThread'};}(l.getFragment('sharedPhotos',{newViewGK:n}));}};f.exports=j;}),null);
__d('messengerInfoPanelContactNameSectionReact',['cx','bs_curry','bs_js_primitive','messengerLocalTimeReact','messengerPresenceStatusReact','React','reactRe'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').Component[0],j=c('reactRe').Component[1],k=c('reactRe').Component[2],l=c('reactRe').Component[3],m=c('reactRe').Component[4],n=c('reactRe').Component[5],o=c('reactRe').Component[6],p="MessengerInfoPanelContactNameSectionReact";function q(z){var aa=z[1];return c('React').createElement("div",{className:"_2jnq"},aa[4],c('React').createElement("div",{className:"_2jnt"},c('React').createElement("div",{className:"_3eur"},c('React').createElement("span",{className:"_3oh-"},aa[0].name)),c('React').createElement("div",{className:"_3eus"},c('bs_curry')._4(c('messengerPresenceStatusReact').createElement(0,aa[1],aa[2],aa[3]),0,0,0,0)),c('React').createElement("div",undefined,c('bs_curry')._4(c('messengerLocalTimeReact').createElement("_5uh",c('bs_js_primitive').js_from_nullable_def(aa[0].timezone)),0,0,0,0))));}var r=c('reactRe').Component[7],s=c('reactRe').Component[8],t=c('reactRe').Component[9],u=[i,j,k,l,m,n,o,r,s,t,p,q],v=c('reactRe').CreateComponent([p,m,o,i,k,j,l,n,q]),w=v[1];function x(z,aa,ba,ca,da){return c('bs_curry')._1(w,[z,aa,ba,ca,da]);}var y=v[0];g.MessengerInfoPanelContactNameSection=u;g.comp=y;g.wrapProps=w;g.createElement=x;}),null);
__d('keysRe',[],(function a(b,c,d,e,f,g){'use strict';var h=8,i=9,j=13,k=18,l=27,m=32,n=33,o=34,p=35,q=36,r=37,s=38,t=39,u=40,v=46,w=188,x=190,y=65,z=90,aa=48,ba=96,ca=105;g.backspace=h;g.tab=i;g.$$return=j;g.alt=k;g.esc=l;g.space=m;g.page_up=n;g.page_down=o;g.end_=p;g.home=q;g.left=r;g.up=s;g.right=t;g.down=u;g.$$delete=v;g.comma=w;g.period=x;g.a=y;g.z=z;g.zero=aa;g.numpad_0=ba;g.numpad_9=ca;}),null);
__d('messengerButtonReact',['MessengerButton.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p){var q={className:c('utilsRe').optionToJsNullUndefined(i),role:c('utilsRe').optionToJsNullUndefined(j),disabled:c('utilsRe').optionToJsNullUndefined(k),customColor:c('utilsRe').optionToJsNullUndefined(l),use:c('utilsRe').optionToJsNullUndefined(m),onClick:c('utilsRe').optionToJsNullUndefined(n),label:o,type:p},r=c('MessengerButton.react');return function(s,t,u,v){return c('reactRe').wrapPropsShamelessly(r,q,s,t,u,v);};}g.createElement=h;}),null);
__d('messengerSpinnerReact',['MessengerSpinner.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l={className:c('utilsRe').optionToJsNullUndefined(i),color:c('utilsRe').optionToJsNullUndefined(j),size:c('utilsRe').optionToJsNullUndefined(k)},m=c('MessengerSpinner.react');return function(n,o,p,q){return c('reactRe').wrapPropsShamelessly(m,l,n,o,p,q);};}g.createElement=h;}),null);
__d('createContentStateForTextWithMessengerEmoji',['ContentState','DraftModifier','MessengerSupportedEmojiUtils','insertMessengerEmojiIntoContentState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('ContentState').createFromText('');while(i){var k=c('MessengerSupportedEmojiUtils').getEmojiMatchObj(i);if(k){var l=k.offset+k.length,m=i.substr(0,k.is_supported?k.offset:l),n=i.substr(l);j=c('DraftModifier').insertText(j,j.getSelectionAfter(),m);if(k.is_supported)j=c('insertMessengerEmojiIntoContentState')(k.emoji_key,j,j.getSelectionAfter(),j.getFirstBlock().getInlineStyleAt(0));i=n;}else break;}if(i)j=c('DraftModifier').insertText(j,j.getSelectionAfter(),i);return j;}f.exports=h;}),null);
__d('MessengerTextWithEmojiInput.react',['cx','CompositeDraftDecorator','ContentState','DraftEditor.react','EditorState','FbtResult','MercuryConfig','MessengerEmojiSpan.react','React','XUICloseButton.react','createContentStateForTextWithMessengerEmoji','getEntityMatcher','getVisibleValueForContentState','getVisibleValueForContentStateWithMessengerEmoji','handleBeforeInputForMessengerEmoji','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerTextWithEmojiInput5=function(r){if(r!==this.state.editorState){var s=!r.getCurrentContent().hasText();this.setState({editorState:r,isEmpty:s});this.props.onChange&&this.props.onChange(s);}}.bind(this),this.$MessengerTextWithEmojiInput2=function(){return new (c('CompositeDraftDecorator'))([{strategy:c('getEntityMatcher')(function(r){return r.getType()==='EMOJI';}),component:c('MessengerEmojiSpan.react')}]);},this.focusInput=function(){this.refs.input.focus();this.$MessengerTextWithEmojiInput5(c('EditorState').moveFocusToEnd(this.state.editorState));}.bind(this),this.$MessengerTextWithEmojiInput3=function(r){if(this.props.maxLength&&this.props.maxLength<=this.getValue().length)return 'handled';var s=c('handleBeforeInputForMessengerEmoji')(this.state.editorState,r);if(s===this.state.editorState)return 'not-handled';this.setState({editorState:s});return 'handled';}.bind(this),this.$MessengerTextWithEmojiInput4=function(r){this.props.onReturn&&this.props.onReturn(r);return 'handled';}.bind(this),this.$MessengerTextWithEmojiInput6=function(){this.setState({editorState:this.$MessengerTextWithEmojiInput1('')});}.bind(this),this.state={editorState:this.$MessengerTextWithEmojiInput1(this.props.initialValue),isEmpty:!this.props.initialValue||this.props.initialValue.length===0},n;}l.prototype.$MessengerTextWithEmojiInput1=function(m){return c('EditorState').createWithContent(c('createContentStateForTextWithMessengerEmoji')(m||''),this.$MessengerTextWithEmojiInput2());};l.prototype.componentDidMount=function(){this.focusInput();};l.prototype.render=function(){var m=this.props.placeholder&&this.props.placeholder.toString();return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_30e7")},c('React').createElement('div',{className:"_5j5f _3oh-"},c('React').createElement(c('DraftEditor.react'),{editorState:this.state.editorState,handleBeforeInput:this.$MessengerTextWithEmojiInput3,handleReturn:this.$MessengerTextWithEmojiInput4,onChange:this.$MessengerTextWithEmojiInput5,placeholder:m,ref:'input',spellCheck:false,stripPastedStyles:true,textAlignment:'left'})),c('React').createElement(c('XUICloseButton.react'),{size:'small',onMouseDown:this.$MessengerTextWithEmojiInput6,className:(this.state.isEmpty?"hidden_elem":'')+(' '+"_5j5l")}));};l.prototype.getValue=function(){var m=this.state.editorState.getCurrentContent();return c('getVisibleValueForContentStateWithMessengerEmoji')(m);};l.propTypes={onReturn:k.func,maxLength:k.number,onChange:k.func,placeholder:k.node,initialValue:k.string};f.exports=l;}),null);
__d('messengerTextWithEmojiInputReact',['MessengerTextWithEmojiInput.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){var o={className:c('utilsRe').optionToJsNullUndefined(i),onReturn:c('utilsRe').optionToJsNullUndefined(j),maxLength:c('utilsRe').optionToJsNullUndefined(k),onChange:c('utilsRe').optionToJsNullUndefined(l),placeholder:c('utilsRe').optionToJsNullUndefined(m),initialValue:c('utilsRe').optionToJsNullUndefined(n)},p=c('MessengerTextWithEmojiInput.react');return function(q,r,s,t){return c('reactRe').wrapPropsShamelessly(p,o,q,r,s,t);};}g.createElement=h;}),null);
__d('MessengerThreadPhotoUploader.react',['cx','fbt','FileInput','FileInputUploader','Link.react','MercuryConfig','React','ReactDOM','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerThreadPhotoUploader',_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:false,propTypes:{onComplete:j.func.isRequired,onFail:j.func,onStart:j.func,uri:j.string},getDefaultProps:function l(){return {uri:c('MercuryConfig').upload_url};},componentDidMount:function l(){var m=c('ReactDOM').findDOMNode(this.refs.input),n=new (c('FileInput'))(c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.uploadButton),m),o=new (c('FileInputUploader'))(m).setURI(this.props.uri).setAllowCrossOrigin(true).setAllowCrossPageTransition(true).setData({images_only:true}),p=new (c('SubscriptionsHandler'))();p.addSubscriptions(o.subscribe('success',this._handleAllUploadsCompleted),o.subscribe('failure',this._handleLastUploadFailed));this._subscriptions=p;this._uploader=o;this._fileInput=n;},componentWillUnmount:function l(){if(!this._uploadIsInProgress)this._doUnmountComponents();},render:function l(){var m=i._("Click to change the image");return (c('React').createElement('form',{action:this.props.uri,method:'post',ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement('input',{type:'hidden',name:'images_only',value:'true'}),c('React').createElement('div',{className:"_m _4q60 _2lyy"},c('React').createElement(c('Link.react'),{className:"_4q61 _2lyz",ref:'uploadButton'},i._("editar")),c('React').createElement('input',{type:'file',className:"_n",name:'attachment[]',accept:'.jpg,.png,.jpeg,.bmp,.tif,.tiff',ref:'input',onChange:this._handleFileInputChange,title:m}))));},_handleAllUploadsCompleted:function l(m,n){this._uploadIsInProgress=false;this.props.onComplete&&this.props.onComplete(n.response.payload);if(!this.isMounted())this._doUnmountComponents();},_handleLastUploadFailed:function l(m,n){this._uploadIsInProgress=false;this.props.onFail&&this.props.onFail(n);if(!this.isMounted())this._doUnmountComponents();},_handleFileInputChange:function l(m){if(m.target.value&&this._uploader){this._uploader.send();this._uploadIsInProgress=true;this.props.onStart&&this.props.onStart();}},_doUnmountComponents:function l(){this._subscriptions&&this._subscriptions.release();this._fileInput&&this._fileInput.destroy();delete this._subscriptions;delete this._uploader;}});f.exports=k;}),null);
__d('messengerThreadPhotoUploaderReact',['MessengerThreadPhotoUploader.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m={onComplete:i,onFail:c('utilsRe').optionToJsNullUndefined(j),onStart:c('utilsRe').optionToJsNullUndefined(k),uri:c('utilsRe').optionToJsNullUndefined(l)},n=c('MessengerThreadPhotoUploader.react');return function(o,p,q,r){return c('reactRe').wrapPropsShamelessly(n,m,o,p,q,r);};}g.createElement=h;}),null);
__d('messengerInfoPanelThreadNameSectionReact',['cx','fbt','bs_curry','bs_js_boolean','bs_js_primitive','keysRe','MercuryGenericConstants','mercuryThreadTitleReact','messengerButtonReact','messengerSpinnerReact','messengerTextWithEmojiInputReact','messengerThreadPhotoUploaderReact','React','ReactDOM','reactRe','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reactRe').Component[7][7],k=j[0],l=j[3],m=j[4],n="MessengerInfoPanelThreadNameSectionReact";function o(){return [0];}function p(){return [0,0];}function q(ma,na){var oa=+(na[1][5]!==ma[5]);if(oa!==0){return [[0]];}else return 0;}function r(ma,na){var oa=na[4][0];if(oa)oa[0].focusInput();return 0;}function s(ma,na,oa){var pa=ma[7],qa=oa[1][7];if(pa===1)if(qa!==1)setTimeout(c('bs_curry')._1(oa[2],r),1);return 0;}function t(){return c('React').createElement("div",{className:"_2jnw"},c('messengerSpinnerReact').createElement(0,0,0)(0,0,0,0));}function u(ma,na){var oa=na[1];c('bs_curry')._1(oa[2],[oa[5].thread_id,ma]);return [[0]];}function v(ma,na){return [[0]];}function w(ma,na){return [[1]];}function x(ma,na){var oa=na[4][1];if(oa)c('ReactDOM').findDOMNode(oa[0]).focus();return 0;}function y(ma,na){ma.stopPropagation();var oa=na[4][0];if(oa)c('bs_curry')._1(na[1][1],oa[0].getValue());c('bs_curry')._1(c('setImmediate'),c('bs_curry')._1(na[2],x));return 0;}function z(ma,na){var oa=na[1];ma.stopPropagation();var pa=oa[0],qa=oa[7];if(pa!==0)if(!(qa!==1))c('bs_curry')._1(oa[8],0);return 0;}function aa(ma,na){var oa=na[1][7],pa=ma.charCode;if(oa!==1||!(pa===c('keysRe').$$return||pa===c('keysRe').space)){return 0;}else{ma.preventDefault();return z(ma,na);}}function ba(ma,na){var oa=na[1];if(ma.currentTarget.contains(ma.relatedTarget)){ma.stopPropagation();}else{var pa=oa[7];if(pa>=2){c('bs_curry')._1(oa[8],0);}else c('bs_curry')._1(oa[8],1);}return 0;}function ca(ma,na){na[4][0]=[ma];return 0;}function da(ma,na){na[4][1]=[ma];return 0;}function ea(ma){var na=ma[2];return c('React').createElement("div",{className:"_2jnx",onBlur:c('bs_curry')._1(na,ba)},c('React').createElement("div",{className:"_2jny"},c('messengerTextWithEmojiInputReact').createElement(["_2jnz"],[c('bs_curry')._1(na,y)],[c('MercuryGenericConstants').MAX_THREAD_NAME_LENGTH],0,[i._("Asigna un nombre a esta conversaci\u00f3n")],c('bs_js_primitive').js_from_nullable_def(ma[1][5].name))(0,[c('bs_curry')._1(ma[3],ca)],0,0)),c('React').createElement("div",{className:"_2jn-"},c('messengerButtonReact').createElement(0,["button"],0,0,0,[c('bs_curry')._1(na,y)],i._("Listo"),"primary")(0,0,0,0)));}function fa(ma){var na=ma[2],oa=ma[1],pa=ma[0],qa=oa[7],ra=qa!==1?1:0,sa=pa[0],ta=oa[0];return c('React').createElement("div",{className:"_2jnq"},c('React').createElement("div",{className:("_2jnr")+(c('bs_js_boolean').to_js_boolean(pa[0])?' '+"_2jns":'')},oa[4],sa!==0?t(0):null,ta!==0?c('messengerThreadPhotoUploaderReact').createElement(c('bs_curry')._1(na,u),[c('bs_curry')._1(na,v)],[c('bs_curry')._1(na,w)],0)(0,0,0,0):null),c('React').createElement("div",{ref:c('bs_curry')._1(ma[3],da),className:"_2jnt"+(c('bs_js_boolean').to_js_boolean(1-ra)?' '+"_1sw_":'')+(c('bs_js_boolean').to_js_boolean(1-oa[0])?' '+"disabled":''),role:ra!==0?"":"button",tabIndex:"0",onClick:c('bs_curry')._1(na,z),onKeyPress:c('bs_curry')._1(na,aa)},c('React').createElement("div",{className:"_2jnu"},ra!==0?ea(ma):c('mercuryThreadTitleReact').createElement(["_2jnv"],oa[5],oa[6],0,[0],[0],0)(0,0,0,0))));}var ga=j[5],ha=[k,l,m,ga,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa],ia=c('reactRe').CreateComponent([n,p,o,k,q,s,l,m,fa]),ja=ia[1];function ka(ma,na,oa,pa,qa,ra,sa,ta,ua){return c('bs_curry')._1(ja,[ma,na,oa,pa,qa,ra,ua,ta,sa]);}var la=ia[0];g.MessengerInfoPanelThreadNameSection=ha;g.comp=la;g.wrapProps=ja;g.createElement=ka;}),null);
__d('MessengerDeleteDialog.react',['fbt','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerDeleteDialog1=function(){this.props.onToggle&&this.props.onToggle(false);this.props.onArchive&&this.props.onArchive();}.bind(this),this.$MessengerDeleteDialog2=function(){this.props.onToggle&&this.props.onToggle(false);this.props.onDelete&&this.props.onDelete();}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onToggle},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Eliminar conversaci\u00f3n")),c('React').createElement(k,null,h._("El historial de la conversaci\u00f3n se eliminar\u00e1 permanentemente.")),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogButton.react'),{label:h._("Archivar"),onClick:this.$MessengerDeleteDialog1,type:'secondary'}),c('React').createElement(c('MessengerDialogButton.react'),{label:h._("Eliminar"),onClick:this.$MessengerDeleteDialog2,type:'primary',use:'danger'})));};m.propTypes={onArchive:l.func,onDelete:l.func,onToggle:l.func};f.exports=m;}),null);
__d('MessengerMarkSpamDialog.react',['fbt','MessengerActions','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerMarkSpamDialog1=function(s){s.stopPropagation();this.props.onToggle&&this.props.onToggle(false);this.props.onMarkSpam&&this.props.onMarkSpam();c('MessengerActions').hideDialog();}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onToggle},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Marcar como spam")),c('React').createElement(k,null,h._("Esta conversaci\u00f3n se denunciar\u00e1 como spam y se eliminar\u00e1.")),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogButton.react'),{label:h._("Marcar como spam"),onClick:this.$MessengerMarkSpamDialog1,type:'primary',use:'danger'})));};m.propTypes={onMarkSpam:l.func,onToggle:l.func};f.exports=m;}),null);
__d('MessengerMuteDialog.react',['fbt','MercuryThreadMuter','MessengerDialog.react','MessengerDialogBody.react','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','messengerDomIDsRe','MessengerRadioList.react','React','ReactDOM'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDomIDsRe').ids,l=c('MessengerRadioList.react').Item,m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={muteSetting:'30minutes'},this.$MessengerMuteDialog2=function(){var t=c('MercuryThreadMuter').convertRawMuteSetting(this.state.muteSetting);this.props.onMute(t);this.props.onToggle&&this.props.onToggle(false,t);}.bind(this),this.$MessengerMuteDialog1=function(t){this.setState({muteSetting:t});}.bind(this),p;}n.prototype.componentDidMount=function(){var o=c('ReactDOM').findDOMNode(this.refs.confirmButton);if(o&&o.focus)o.focus();};n.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onToggle,titleID:k.MUTE_DIALOG_TITLE},c('React').createElement(c('MessengerDialogHeader.react'),{id:k.MUTE_DIALOG_TITLE},h._("Silenciar conversaci\u00f3n")),c('React').createElement(c('MessengerDialogBody.react'),null,c('React').createElement(c('MessengerRadioList.react'),{name:'messengerMuteOptions',selectedValue:this.state.muteSetting,onValueChange:this.$MessengerMuteDialog1},c('React').createElement(l,{value:'30minutes'},h._("Durante 30 minutos")),c('React').createElement(l,{value:'1hour'},h._("Durante una hora")),c('React').createElement(l,{value:'8hours'},h._("Durante ocho horas")),c('React').createElement(l,{value:'24hours'},h._("Durante 24 horas")),c('React').createElement(l,{value:'always'},h._("Indefinidamente")))),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogButton.react'),{label:h._("Silenciar"),onClick:this.$MessengerMuteDialog2,ref:'confirmButton',type:'primary'})));};n.propTypes={onMute:m.func.isRequired,onToggle:m.func.isRequired};f.exports=n;}),null);
__d('messengerThreadlistRowActionsReact',['cx','fbt','bs_curry','bs_js_boolean','bs_js_primitive','MessengerActions','MessengerDeleteDialog.react','MessengerMarkSpamDialog.react','messengerMenuReact','MessengerMuteDialog.react','messengerPopoverMenuReact','React','reactRe','utilsRe','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reactRe').Component[8],k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q="MessengerThreadlistRowActionsReact";function r(ga,ha){if(!ga)c('MessengerActions').hideDialog();return 0;}function s(ga,ha){ga.preventDefault();return ga.stopPropagation();}function t(ga,ha){c('bs_curry')._1(ha[1][14],true);return 0;}function u(ga,ha){c('bs_curry')._1(ha[1][14],false);return 0;}function v(ga,ha){var ia=ha[1];c('MessengerActions').showDialog(c('MessengerDeleteDialog.react'),{onArchive:ia[5],onDelete:ia[6],onToggle:c('bs_curry')._1(ha[2],r)});return 0;}function w(ga,ha){var ia=ha[1];if(ia[2]){c('bs_curry')._1(ia[15],0);}else c('MessengerActions').showDialog(c('MessengerMuteDialog.react'),{onMute:ia[12],onToggle:c('bs_curry')._1(ha[2],r)});return 0;}function x(ga,ha){var ia=ha[1];if(ia[4]){c('bs_curry')._1(ia[9],0);}else c('bs_curry')._1(ia[11],0);return 0;}function y(ga,ha){c('MessengerActions').showDialog(c('MessengerMarkSpamDialog.react'),{onMarkSpam:ha[1][10],onToggle:c('bs_curry')._1(ha[2],r)});return 0;}function z(ga){var ha=ga[2],ia=ga[1],ja=ia[1],ka=ja!==0?i._("Abandonar la sala"):i._("Abandonar el grupo"),la=ia[17],ma;if(la!==0){var na=ia[2];ma=c('bs_curry')._6(c('messengerMenuReact').MessengerMenuItemReact[0],na!==0?i._("Reactivar"):i._("Silenciar"),[c('bs_curry')._1(ha,w)],0,0,0,0);}else ma=null;var oa=c('utilsRe').isSomeTrue(ia[18]),pa=ia[17]||c('utilsRe').isSomeTrue(ia[18]),qa=ia[16],ra=ia[4],sa=c('utilsRe').isSomeTrue(ia[19]),ta=c('bs_curry')._4(c('messengerMenuReact').MessengerMenuReact[0],[ma,[oa!==0?c('bs_curry')._6(c('messengerMenuReact').MessengerMenuItemReact[0],i._("Cambiar nombre"),ia[13],0,0,0,0):null,[pa!==0?c('bs_curry')._4(c('messengerMenuReact').MessengerMenuSeparatorReact[0],0,0,0,0):null,[qa!==0?c('bs_curry')._6(c('messengerMenuReact').MessengerMenuItemReact[0],ka,ia[7],0,0,0,0):null,[c('bs_curry')._6(c('messengerMenuReact').MessengerMenuItemReact[0],i._("Archivar"),[ia[5]],0,0,0,0),[c('bs_curry')._6(c('messengerMenuReact').MessengerMenuItemReact[0],i._("Eliminar"),[c('bs_curry')._1(ha,v)],0,0,0,0),[c('bs_curry')._4(c('messengerMenuReact').MessengerMenuSeparatorReact[0],0,0,0,0),[c('bs_curry')._6(c('messengerMenuReact').MessengerMenuItemReact[0],ra!==0?i._("Marcar como le\u00edda"):i._("Marcar como no le\u00edda"),[c('bs_curry')._1(ha,x)],0,0,0,0),[c('bs_curry')._6(c('messengerMenuReact').MessengerMenuItemReact[0],i._("Marcar como spam"),[c('bs_curry')._1(ha,y)],0,0,0,0),[sa!==0?c('bs_curry')._6(c('messengerMenuReact').MessengerMenuItemReact[0],i._("Denunciar spam o abuso..."),ia[8],0,0,0,0):null,0]]]]]]]]]],0,0,0);return c('React').createElement("div",{className:"_3d85"},c('messengerPopoverMenuReact').createElement([1],[ia[3]],ta,[c('bs_curry')._1(ha,u)],[c('bs_curry')._1(ha,t)])([c('React').createElement("div",{"aria-label":i._("Acciones de conversaciones"),className:c('joinClasses')(c('utilsRe').$pipe$unknown(ia[0],""),"_4-0h"+(c('bs_js_boolean').to_js_boolean(ia[3])?' '+"_4-0i":'')),onClick:c('bs_curry')._1(ha,s),role:"button",ref:"button",tabIndex:0}),0],0,0,0));}var aa=[function(ga){return [c('bs_js_primitive').js_from_nullable_def(ga.className),+ga.isMessengerRoom,+ga.isMuted,+ga.isOpen,+ga.isUnread,ga.onArchive,ga.onDelete,c('bs_js_primitive').js_from_nullable_def(ga.onLeaveGroup),c('bs_js_primitive').js_from_nullable_def(ga.onReportThread),ga.onMarkRead,ga.onMarkSpam,ga.onMarkUnread,ga.onMute,c('bs_js_primitive').js_from_nullable_def(ga.onRename),ga.onToggle,ga.onUnmute,+ga.showLeaveGroup,+ga.showMute,c('utilsRe').nullUndefinedBooleanToOptionBool(ga.showRename),c('utilsRe').nullUndefinedBooleanToOptionBool(ga.showReport)];}],ba=[k,l,m,n,o,p,q,c('utilsRe').$pipe$unknown,r,s,t,u,v,w,x,y,z,aa],ca=c('reactRe').CreateComponent([q,o,p,k,m,l,n,aa,z]),da=ca[1];function ea(ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za){return c('bs_curry')._1(da,[ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za]);}var fa=ca[0];g.MessengerThreadlistRowActions=ba;g.comp=fa;g.wrapProps=da;g.createElement=ea;}),null);
__d("messengerInfoPanelNameSectionReact",["cx","AsyncDialog","AsyncRequest","bs_curry","bs_js_primitive","MercuryThreadIDMap","MercuryThreadInfo","MessengerAdminGroupUtils","messengerInfoPanelContactNameSectionReact","messengerInfoPanelThreadNameSectionReact","messengerThreadImageReact","messengerThreadlistRowActionsReact","React","reactRe","XNFXStartForMessageThreadController"],(function a(b,c,d,e,f,g,h){'use strict';var i=c("reactRe").Component[7][7][5],j=i[0],k=i[1],l=i[2],m=i[3],n="MessengerInfoPanelNameSectionReact";function o(){return [0];}function p(){return [0,1];}function q(ia,ja){return [[+ia,ja[0][1]]];}function r(ia,ja){var ka=ja[1],la=ka[16].name;if(c("bs_js_primitive").js_is_nil_undef(la)){if(ia!=="")c("bs_curry")._1(ka[10],ia);}else if(ia!==la)c("bs_curry")._1(ka[10],ia);return [[ja[0][0],1]];}function s(ia,ja){return [[ja[0][0],ia]];}function t(ia,ja){ja[4][0]=[ia];return 0;}function u(ia,ja){var ka=ja[4][0];if(ka){return [[ja[0][0],2]];}else return 0;}function v(ia,ja){var ka=c("MercuryThreadIDMap").get();ka.getServerIDFromClientID(ja[1][16].thread_id,function(la){return c("AsyncDialog").send(new (c("AsyncRequest"))(c("XNFXStartForMessageThreadController").getURIBuilder().setString("thread_fbid",la).getURI()));});return 0;}function w(ia){var ja=ia[2],ka=ia[1],la=+ka[16].is_subscribed&&1- +ka[16].is_canonical&&+c("MessengerAdminGroupUtils").canUpdateThreadCustomization(ka[16],ka[17]),ma=+c("MessengerAdminGroupUtils").isJoinableThread(ka[16]);return c("React").createElement("div",{className:"_3-ne"},c("bs_curry")._4(c("messengerThreadlistRowActionsReact").createElement(["_5blh"],ma,+c("MercuryThreadInfo").isMuted(ka[16]),ia[0][0],+(ka[16].unread_count>0),ka[9],ka[3],ka[4],[c("bs_curry")._1(ja,v)],ka[5],ka[6],ka[7],ka[8],[c("bs_curry")._1(ja,u)],c("bs_curry")._1(ja,q),ka[12],ka[15],0,[la],[1]),0,0,0,0));}function x(ia){return c("React").createElement("div",{className:"_1jt8"},c("messengerThreadImageReact").createElement(0,0,[50],ia[13],ia[16],ia[17])(0,0,0,0));}function y(ia,ja){return c("bs_curry")._4(c("messengerInfoPanelContactNameSectionReact").createElement(ia,ja[1],ja[2],ja[14],x(ja)),0,0,0,0);}function z(ia,ja){c("bs_curry")._2(ja[1][11],ia[0],ia[1]);return 0;}function aa(ia){var ja=ia[2],ka=ia[1],la=c("MessengerAdminGroupUtils").canUpdateThreadCustomization(ka[16],ka[17]);return c("bs_curry")._4(c("messengerInfoPanelThreadNameSectionReact").createElement(la,c("bs_curry")._1(ja,r),c("bs_curry")._1(ja,z),ka[13],x(ka),ka[16],c("bs_curry")._1(ja,s),ia[0][1],ka[17]),0,[c("bs_curry")._1(ia[3],t)],0,0);}function ba(ia){var ja=ia[1],ka=+(ja[16].is_subscribed||ja[16].is_canonical),la=ja[0];return c("React").createElement("div",{className:"_1jt6"},la?y(la[0],ja):aa(ia),ka!==0?w(ia):null);}var ca=[function(ia){return [c("bs_js_primitive").js_from_nullable_def(ia.contact),+ia.isUserActive,c("bs_js_primitive").js_from_nullable_def(ia.lastActive),ia.onDelete,c("bs_js_primitive").js_from_nullable_def(ia.onLeaveGroup),ia.onMarkRead,ia.onMarkSpam,ia.onMarkUnread,ia.onMute,ia.onArchive,ia.onThreadNameChange,ia.onThreadPhotoChange,ia.onUnmute,ia.participants,c("bs_js_primitive").js_from_nullable_def(ia.platform),+ia.showLeaveGroup,ia.thread,ia.viewer];}],da=[j,k,l,m,n,50,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca],ea=c("reactRe").CreateComponent([n,o,p,j,l,k,m,ca,ba]),fa=ea[1];function ga(ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za){return c("bs_curry")._1(fa,[ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za]);}var ha=ea[0];g.MessengerInfoPanelNameSection=da;g.comp=ha;g.wrapProps=fa;g.createElement=ga;}),null);
__d('bs_block',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){j.tag=i;return j;}g.__=h;}),null);
__d('bs_caml_obj',['bs_caml_builtin_exceptions','bs_block'],(function a(b,c,d,e,f,g){'use strict';function h(v){var w=v.length,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v[y];x.tag=v.tag|0;return x;}function i(v,w){var x=v.length;if(w<=0||w>x){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Obj.truncate"];}else if(x!==w){for(var y=w,z=x-1|0;y<=z;++y)v[y]=0;v.length=w;return 0;}else return 0;}function j(v){return c('bs_block').__(250,[v]);}function k(v,w){var x=w.length;for(var y=0,z=x-1|0;y<=z;++y)v[y]=w[y];v.tag=w.tag|0;v.length=w.length;return 0;}function l(v,w){if(v<w){return -1;}else if(v===w){return 0;}else return 1;}function m(v,w){while(true){var x=w,y=v;if(typeof y==="string"){var z=y,aa=x;if(z<aa){return -1;}else if(z===aa){return 0;}else return 1;}else if(typeof y==="number"){return l(y,x);}else if(typeof y==="boolean"||typeof y==="null"||typeof y==="undefined"){var ba=y,ca=x;if(ba===ca){return 0;}else if(ba<ca){return -1;}else return 1;}else{var da=y.tag|0,ea=x.tag|0;if(da===250){v=y[0];continue;}else if(ea===250){w=x[0];continue;}else if(da===248){return l(y[1],x[1]);}else if(da===251){throw [c('bs_caml_builtin_exceptions').invalid_argument,"equal: abstract value"];}else if(da!==ea){if(da<ea){return -1;}else return 1;}else{var fa=y.length,ga=x.length;if(fa===ga){var ha=y,ia=x,ja=0,ka=fa;while(true){var la=ja;if(la===ka){return 0;}else{var ma=m(ha[la],ia[la]);if(ma!==0){return ma;}else{ja=la+1|0;continue;}}}}else if(fa<ga){var na=y,oa=x,pa=0,qa=fa;while(true){var ra=pa;if(ra===qa){return -1;}else{var sa=m(na[ra],oa[ra]);if(sa!==0){return sa;}else{pa=ra+1|0;continue;}}}}else{var ta=y,ua=x,va=0,wa=ga;while(true){var xa=va;if(xa===wa){return 1;}else{var ya=m(ta[xa],ua[xa]);if(ya!==0){return ya;}else{va=xa+1|0;continue;}}}}}}}}function n(v,w){while(true){var x=w,y=v;if(typeof y==="string"||typeof y==="number"||typeof y==="boolean"||typeof y==="undefined"||typeof y==="null"){return +(y===x);}else{var z=y.tag|0,aa=x.tag|0;if(z===250){v=y[0];continue;}else if(aa===250){w=x[0];continue;}else if(z===248){return +(y[1]===x[1]);}else if(z===251){throw [c('bs_caml_builtin_exceptions').invalid_argument,"equal: abstract value"];}else if(z!==aa){return 0;}else{var ba=y.length,ca=x.length;if(ba===ca){var da=y,ea=x,fa=0,ga=ba;while(true){var ha=fa;if(ha===ga){return 1;}else if(n(da[ha],ea[ha])){fa=ha+1|0;continue;}else return 0;}}else return 0;}}}}function o(v,w){return 1-n(v,w);}function p(v,w){return +(m(v,w)>=0);}function q(v,w){return +(m(v,w)>0);}function r(v,w){return +(m(v,w)<=0);}function s(v,w){return +(m(v,w)<0);}var t=l,u=l;g.caml_obj_dup=h;g.caml_obj_truncate=i;g.caml_lazy_make_forward=j;g.caml_update_dummy=k;g.caml_int_compare=l;g.caml_int32_compare=t;g.caml_nativeint_compare=u;g.caml_compare=m;g.caml_equal=n;g.caml_notequal=o;g.caml_greaterequal=p;g.caml_greaterthan=q;g.caml_lessthan=s;g.caml_lessequal=r;}),null);
__d('bs_caml_string',['bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(v){return String.fromCharCode(v);}function i(v,w){if(w>=v.length||w<0){throw [c('bs_caml_builtin_exceptions').invalid_argument,"index out of bounds"];}else return v.charCodeAt(w);}function j(v){if(v<0){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.create"];}else return new Array(v);}function k(v,w){if(v===w){return 0;}else if(v<w){return -1;}else return 1;}function l(v,w,x,y){if(x>0){for(var z=w,aa=(x+w|0)-1|0;z<=aa;++z)v[z]=y;return 0;}else return 0;}function m(v,w,x,y,z){if(z>0){var aa=v.length-w|0;if(z<=aa){for(var ba=0,ca=z-1|0;ba<=ca;++ba)x[y+ba|0]=v.charCodeAt(w+ba|0);return 0;}else{for(var da=0,ea=aa-1|0;da<=ea;++da)x[y+da|0]=v.charCodeAt(w+da|0);for(var fa=aa,ga=z-1|0;fa<=ga;++fa)x[y+fa|0]=0;return 0;}}else return 0;}function n(v,w,x,y,z){if(z>0){if(v===x){var aa=v,ba=w,ca=y,da=z;if(ba<ca){var ea=(aa.length-ca|0)-1|0,fa=da-1|0,ga=ea>fa?fa:ea;for(var ha=ga;ha>=0;--ha)aa[ca+ha|0]=aa[ba+ha|0];return 0;}else if(ba>ca){var ia=(aa.length-ba|0)-1|0,ja=da-1|0,ka=ia>ja?ja:ia;for(var la=0;la<=ka;++la)aa[ca+la|0]=aa[ba+la|0];return 0;}else return 0;}else{var ma=v.length-w|0;if(z<=ma){for(var na=0,oa=z-1|0;na<=oa;++na)x[y+na|0]=v[w+na|0];return 0;}else{for(var pa=0,qa=ma-1|0;pa<=qa;++pa)x[y+pa|0]=v[w+pa|0];for(var ra=ma,sa=z-1|0;ra<=sa;++ra)x[y+ra|0]=0;return 0;}}}else return 0;}function o(v){var w=v.length,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v.charCodeAt(y);return x;}function p(v){var w=v,x=0,y=v.length,z="",aa=y;if(x===0&&y<=4096&&y===w.length){return String.fromCharCode.apply(null,w);}else{var ba=0;while(aa>0){var ca=aa<1024?aa:1024,da=new Array(ca);n(w,ba,da,0,ca);z=z+String.fromCharCode.apply(null,da);aa=aa-ca|0;ba=ba+ca|0;}return z;}}function q(v){var w=v.length,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v[y];return p(x);}function r(v){if(v>31){return +(v<127);}else return 0;}function s(v,w){return v.charCodeAt(w)+(v.charCodeAt(w+1|0)<<8)|0;}function t(v,w){return ((v.charCodeAt(w)+(v.charCodeAt(w+1|0)<<8)|0)+(v.charCodeAt(w+2|0)<<16)|0)+(v.charCodeAt(w+3|0)<<24)|0;}function u(v,w){if(w<0||w>=v.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"index out of bounds"];}else return v.charCodeAt(w);}g.bytes_of_string=o;g.bytes_to_string=p;g.caml_is_printable=r;g.caml_string_of_char_array=q;g.caml_string_get=i;g.caml_string_compare=k;g.caml_create_string=j;g.caml_fill_string=l;g.caml_blit_string=m;g.caml_blit_bytes=n;g.caml_string_get16=s;g.caml_string_get32=t;g.js_string_of_char=h;g.get=u;}),null);
__d('bs_char',['bs_caml_builtin_exceptions','bs_caml_string'],(function a(b,c,d,e,f,g){'use strict';function h(m){if(m<0||m>255){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Char.chr"];}else return m;}function i(m){var n=0;if(m>=40){if(m!==92){n=m>=127?1:2;}else return "\\\\";}else if(m>=32){if(m>=39){return "\\'";}else n=2;}else if(m>=14){n=1;}else switch(m){case 8:return "\\b";case 9:return "\\t";case 10:return "\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:n=1;break;case 13:return "\\r";}switch(n){case 1:var o=new Array(4);o[0]=92;o[1]=48+(m/100|0)|0;o[2]=48+(m/10|0)%10|0;o[3]=48+m%10|0;return c('bs_caml_string').bytes_to_string(o);case 2:var p=new Array(1);p[0]=m;return c('bs_caml_string').bytes_to_string(p);}}function j(m){if(m>=65&&m<=90||m>=192&&m<=214||m>=216&&m<=222){return m+32|0;}else return m;}function k(m){if(m>=97&&m<=122||m>=224&&m<=246||m>=248&&m<=254){return m-32|0;}else return m;}function l(m,n){return m-n|0;}g.chr=h;g.escaped=i;g.lowercase=j;g.uppercase=k;g.compare=l;}),null);
__d('bs_caml_utils',[],(function a(b,c,d,e,f,g){'use strict';var h=String.prototype.repeat&&function(i,j){return j.repeat(i);}||function(i,j){if(j.length==0||i==0)return '';if(j.length*i>=1<<28)throw new RangeError('repeat count must not overflow maximum string size');var k='';for(;;){if((i&1)==1)k+=j;i>>>=1;if(i==0)break;j+=j;}return k;};g.repeat=h;}),null);
__d('bs_caml_int64',['bs_caml_builtin_exceptions','bs_caml_obj','bs_caml_int32','bs_caml_utils'],(function a(b,c,d,e,f,g){'use strict';var h=[-2147483648,0],i=[134217727,1],j=[0,1],k=[0,0],l=[-1,4294967295];function m(ta){return +((ta&2147483648)!==0);}function n(ta,ua){var va=ua[1],wa=ta[1],xa=wa+va&4294967295,ya=m(wa)&&(m(va)||!m(xa))||m(va)&&!m(xa)?1:0,za=ta[0]+ua[0]+ya&4294967295;return [za,xa>>>0];}function o(ta){var ua=ta[0]^-1,va=ta[1]^-1;return [ua,va>>>0];}function p(ta,ua){if(ta[0]===ua[0]){return +(ta[1]===ua[1]);}else return 0;}function q(ta){if(p(ta,h)){return h;}else return n(o(ta),j);}function r(ta,ua){return n(ta,q(ua));}function s(ta,ua){var va=ta[1];if(ua){if(ua>=32){return [va<<(ua-32|0),0];}else{var wa=va>>>(32-ua|0)|ta[0]<<ua;return [wa,va<<ua>>>0];}}else return ta;}function t(ta,ua){var va=ta[0];if(ua){var wa=ua-32|0;if(wa){if(wa>0){var xa=va>>>wa;return [0,xa>>>0];}else{var ya=va>>>ua,za=va<<-wa|ta[1]>>>ua;return [ya,za>>>0];}}else return [0,va>>>0];}else return ta;}function u(ta,ua){var va=ta[0];if(ua){if(ua<32){var wa=va>>ua,xa=va<<(32-ua|0)|ta[1]>>>ua;return [wa,xa>>>0];}else{var ya=va>>(ua-32|0);return [va>=0?0:-1,ya>>>0];}}else return ta;}function v(ta){if(ta[0]!==0||ta[1]!==0){return 0;}else return 1;}function w(ta,ua){while(true){var va=ua,wa=ta,xa=0,ya,za=wa[0],ab=0,bb=0,cb=0;if(za!==0){cb=4;}else if(wa[1]!==0){cb=4;}else return k;if(cb===4)if(va[0]!==0){bb=3;}else if(va[1]!==0){bb=3;}else return k;if(bb===3)if(za!==-2147483648){ab=2;}else if(wa[1]!==0){ab=2;}else{ya=va[1];xa=1;}if(ab===2){var db=va[0],eb=wa[1],fb=0;if(db!==-2147483648){fb=3;}else if(va[1]!==0){fb=3;}else{ya=eb;xa=1;}if(fb===3){var gb=va[1];if(za<0){if(db<0){ua=q(va);ta=q(wa);continue;}else return q(w(q(wa),va));}else if(db<0){return q(w(wa,q(va)));}else{var hb=za>>>16,ib=za&65535,jb=eb>>>16,kb=eb&65535,lb=db>>>16,mb=db&65535,nb=gb>>>16,ob=gb&65535,pb=0,qb=0,rb=0,sb=kb*ob;rb=(sb>>>16)+jb*ob;qb=rb>>>16;rb=(rb&65535)+kb*nb;qb=qb+(rb>>>16)+ib*ob;pb=qb>>>16;qb=(qb&65535)+jb*nb;pb+=qb>>>16;qb=(qb&65535)+kb*mb;pb+=qb>>>16;qb=qb&65535;pb=pb+(hb*ob+ib*nb+jb*mb+kb*lb)&65535;var tb=qb|pb<<16,ub=sb&65535|(rb&65535)<<16;return [tb,ub>>>0];}}}if(xa===1)if((ya&1)===0){return k;}else return h;}}function x(ta){var ua=c('bs_caml_int32').caml_int32_bswap(ta[1]),va=c('bs_caml_int32').caml_int32_bswap(ta[0]);return [ua,va>>>0];}function y(ta,ua){var va=ua[0],wa=ta[0];if(wa>va){return 1;}else if(wa<va){return 0;}else return +(ta[1]>=ua[1]);}function z(ta,ua){return 1-p(ta,ua);}function aa(ta,ua){return 1-y(ta,ua);}function ba(ta,ua){if(ta[0]>ua[0]){return 1;}else if(ta[0]<ua[0]){return 0;}else return +(ta[1]>ua[1]);}function ca(ta,ua){return 1-ba(ta,ua);}function da(ta){return ta[0]*4294967296+ta[1];}var ea=Math.pow(2,32),fa=Math.pow(2,63),ga=-Math.pow(2,63);function ha(ta){if(isNaN(ta)||!isFinite(ta)){return k;}else if(ta<=ga){return h;}else if(ta+1>=fa){return i;}else if(ta<0){return q(ha(-ta));}else{var ua=ta/ea|0,va=ta%ea|0;return [ua,va>>>0];}}function ia(ta,ua){while(true){var va=ua,wa=ta,xa=wa[0],ya=0,za=0;if(va[0]!==0){za=2;}else if(va[1]!==0){za=2;}else throw c('bs_caml_builtin_exceptions').division_by_zero;if(za===2)if(xa!==-2147483648){if(xa!==0){ya=1;}else if(wa[1]!==0){ya=1;}else return k;}else if(wa[1]!==0){ya=1;}else if(p(va,j)||p(va,l)){return wa;}else if(p(va,h)){return j;}else{var ab=va[0],bb=u(wa,1),cb=s(ia(bb,va),1),db=0;if(cb[0]!==0){db=3;}else if(cb[1]!==0){db=3;}else if(ab<0){return j;}else return q(j);if(db===3){var eb=w(va,cb),fb=n(wa,q(eb));return n(cb,ia(fb,va));}}if(ya===1){var gb=va[0],hb=0;if(gb!==-2147483648){hb=2;}else if(va[1]!==0){hb=2;}else return k;if(hb===2)if(xa<0){if(gb<0){ua=q(va);ta=q(wa);continue;}else return q(ia(q(wa),va));}else if(gb<0){return q(ia(wa,q(va)));}else{var ib=k,jb=wa;while(y(jb,va)){var kb=Math.max(1,Math.floor(da(jb)/da(va))),lb=Math.ceil(Math.log(kb)/Math.LN2),mb=lb<=48?1:Math.pow(2,lb-48),nb=ha(kb),ob=w(nb,va);while(ob[0]<0||ba(ob,jb)){kb-=mb;nb=ha(kb);ob=w(nb,va);}if(v(nb))nb=j;ib=n(ib,nb);jb=n(jb,q(ob));}return ib;}}}}function ja(ta,ua){var va=w(ia(ta,ua),ua);return n(ta,q(va));}function ka(ta,ua){var va=ia(ta,ua),wa=w(va,ua);return [va,n(ta,q(wa))];}function la(ta,ua){var va=c('bs_caml_obj').caml_nativeint_compare(ta[0],ua[0]);if(va){return va;}else return c('bs_caml_obj').caml_nativeint_compare(ta[1],ua[1]);}function ma(ta){return [ta<0?-1:0,ta>>>0];}function na(ta){return ta[1]|0;}function oa(ta){var ua=function ab(bb){return (bb>>>0).toString(16);},va=ta[0],wa=ta[1],xa=0;if(va!==0){xa=1;}else if(wa!==0){xa=1;}else return "0";if(xa===1)if(wa!==0){if(va!==0){var ya=ua(ta[1]),za=8-ya.length|0;if(za<=0){return ua(ta[0])+ya;}else return ua(ta[0])+(c('bs_caml_utils').repeat(za,"0")+ya);}else return ua(ta[1]);}else return ua(ta[0])+"00000000";}function pa(ta){return [2147483647&ta[0],ta[1]];}function qa(ta){var ua=new Int32Array([ta[1],ta[0]]);return new Float64Array(ua.buffer)[0];}function ra(ta){var ua=function za(ab){return ab;},va=new Float64Array([ta]),wa=new Int32Array(va.buffer),xa=ua(wa[1]),ya=ua(wa[0]);return [xa,ya>>>0];}function sa(ta,ua){var va=ta.charCodeAt(ua+4|0)<<32|ta.charCodeAt(ua+5|0)<<40|ta.charCodeAt(ua+6|0)<<48|ta.charCodeAt(ua+7|0)<<56,wa=ta.charCodeAt(ua)|ta.charCodeAt(ua+1|0)<<8|ta.charCodeAt(ua+2|0)<<16|ta.charCodeAt(ua+3|0)<<24;return [va,wa>>>0];}g.min_int=h;g.max_int=i;g.one=j;g.zero=k;g.not=o;g.of_int32=ma;g.to_int32=na;g.add=n;g.neg=q;g.sub=r;g.lsl_=s;g.lsr_=t;g.asr_=u;g.is_zero=v;g.mul=w;g.swap=x;g.ge=y;g.eq=p;g.neq=z;g.lt=aa;g.gt=ba;g.le=ca;g.to_float=da;g.of_float=ha;g.div=ia;g.mod_=ja;g.div_mod=ka;g.compare=la;g.to_hex=oa;g.discard_sign=pa;g.float_of_bits=qa;g.bits_of_float=ra;g.get64=sa;}),null);
__d('bs_caml_format',['bs_caml_int64','bs_caml_builtin_exceptions','bs_caml_int32','bs_curry','bs_caml_utils','bs_caml_string'],(function a(b,c,d,e,f,g){'use strict';function h(aa){throw [c('bs_caml_builtin_exceptions').failure,aa];}function i(aa){if(aa>=65){if(aa>=97){if(aa>=123){return -1;}else return aa-87|0;}else if(aa>=91){return -1;}else return aa-55|0;}else if(aa>57||aa<48){return -1;}else return aa-48|0;}function j(aa){switch(aa){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2;}}function k(aa){var ba=1,ca=2,da=0;if(aa[da]==="-"){ba=-1;da=da+1|0;}var ea=aa.charCodeAt(da),fa=aa.charCodeAt(da+1|0);if(ea===48)if(fa>=89){if(fa!==98){if(fa!==111){if(fa===120){ca=1;da=da+2|0;}}else{ca=0;da=da+2|0;}}else{ca=3;da=da+2|0;}}else if(fa!==66){if(fa!==79){if(fa>=88){ca=1;da=da+2|0;}}else{ca=0;da=da+2|0;}}else{ca=3;da=da+2|0;}return [da,ba,ca];}function l(aa){var ba=k(aa),ca=ba[0],da=j(ba[2]),ea=4294967295,fa=aa.length,ga=ca<fa?aa.charCodeAt(ca):0,ha=i(ga);if(ha<0||ha>=da)throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"];var ia=function la(ma,na){while(true){var oa=na,pa=ma;if(oa===fa){return pa;}else{var qa=aa.charCodeAt(oa);if(qa===95){na=oa+1|0;continue;}else{var ra=i(qa);if(ra<0||ra>=da){throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"];}else{var sa=da*pa+ra;if(sa>ea){throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"];}else{na=oa+1|0;ma=sa;continue;}}}}}},ja=ba[1]*ia(ha,ca+1|0),ka=ja|0;if(da===10&&ja!==ka)throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"];return ka;}function m(aa){var ba=k(aa),ca=ba[2],da=ba[0],ea=c('bs_caml_int64').of_int32(j(ca)),fa=c('bs_caml_int64').of_int32(ba[1]),ga;switch(ca){case 0:ga=[536870911,4294967295];break;case 1:ga=[268435455,4294967295];break;case 2:ga=[429496729,2576980377];break;case 3:ga=[2147483647,4294967295];break;}var ha=aa.length,ia=da<ha?aa.charCodeAt(da):0,ja=c('bs_caml_int64').of_int32(i(ia));if(c('bs_caml_int64').lt(ja,[0,0])||c('bs_caml_int64').ge(ja,ea))throw [c('bs_caml_builtin_exceptions').failure,"int64_of_string"];var ka=function pa(qa,ra){while(true){var sa=ra,ta=qa;if(sa===ha){return ta;}else{var ua=aa.charCodeAt(sa);if(ua===95){ra=sa+1|0;continue;}else{var va=c('bs_caml_int64').of_int32(i(ua));if(c('bs_caml_int64').lt(va,[0,0])||c('bs_caml_int64').ge(va,ea)){throw [c('bs_caml_builtin_exceptions').failure,"int64_of_string"];}else{var wa=c('bs_caml_int64').add(c('bs_caml_int64').mul(ea,ta),va);if(c('bs_caml_int64').gt(wa,ga)){throw [c('bs_caml_builtin_exceptions').failure,"int64_of_string"];}else{ra=sa+1|0;qa=wa;continue;}}}}}},la=c('bs_caml_int64').mul(fa,ka(ja,da+1|0)),ma=la[0]|0,na=la[1]>>>0,oa=[ma,na];if(c('bs_caml_int64').eq(ea,[0,10])&&c('bs_caml_int64').neq(la,oa))throw [c('bs_caml_builtin_exceptions').failure,"int64_of_string"];return oa;}function n(aa){switch(aa){case 0:return 8;case 1:return 16;case 2:return 10;}}function o(aa){if(aa>=65&&aa<=90||aa>=192&&aa<=214||aa>=216&&aa<=222){return aa+32|0;}else return aa;}function p(aa){var ba=aa.length;if(ba>31)throw [c('bs_caml_builtin_exceptions').invalid_argument,"format_int: format too long"];var ca=["+","-"," ",0,2,0,0,0,1,-1,"f"],da=0;while(true){var ea=da;if(ea>=ba){return ca;}else{var fa=aa.charCodeAt(ea),ga=0;if(fa>=69){if(fa>=88){if(fa>=121){ga=1;}else switch(fa-88|0){case 0:ca[4]=1;ca[7]=1;da=ea+1|0;continue;case 13:case 14:case 15:ga=5;break;case 12:case 17:ga=4;break;case 23:ca[4]=0;da=ea+1|0;continue;case 29:ca[4]=2;da=ea+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:ga=1;break;case 32:ca[4]=1;da=ea+1|0;continue;}}else if(fa>=72){ga=1;}else{ca[5]=1;ca[7]=1;ca[10]=String.fromCharCode(o(fa));da=ea+1|0;continue;}}else{var ha=fa-32|0;if(ha>25||ha<0){ga=1;}else switch(ha){case 3:ca[3]=1;da=ea+1|0;continue;case 0:case 11:ga=2;break;case 13:ca[0]="-";da=ea+1|0;continue;case 14:ca[9]=0;var ia=ea+1|0;while(function(ka){return function(){var la=aa.charCodeAt(ka)-48|0;return +(la>=0&&la<=9);};}(ia)()){ca[9]=(c('bs_caml_int32').imul(ca[9],10)+aa.charCodeAt(ia)|0)-48|0;ia=ia+1|0;}da=ia;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:ga=1;break;case 16:ca[2]="0";da=ea+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:ga=3;break;}}switch(ga){case 1:da=ea+1|0;continue;case 2:ca[1]=String.fromCharCode(fa);da=ea+1|0;continue;case 3:ca[6]=0;var ja=ea;while(function(ka){return function(){var la=aa.charCodeAt(ka)-48|0;return +(la>=0&&la<=9);};}(ja)()){ca[6]=(c('bs_caml_int32').imul(ca[6],10)+aa.charCodeAt(ja)|0)-48|0;ja=ja+1|0;}da=ja;continue;case 4:ca[5]=1;ca[4]=2;da=ea+1|0;continue;case 5:ca[5]=1;ca[10]=String.fromCharCode(fa);da=ea+1|0;continue;}}}}function q(aa,ba){var ca=aa[0],da=aa[1],ea=aa[2],fa=aa[3],ga=aa[4],ha=aa[5],ia=aa[6],ja=aa[7],ka=aa[8],la=ba.length;if(ha&&(ka<0||da!=="-"))la=la+1|0;if(fa)if(ga){if(ga===1)la=la+2|0;}else la=la+1|0;var ma="";if(ca==="+"&&ea===" ")for(var na=la,oa=ia-1|0;na<=oa;++na)ma=ma+ea;if(ha)if(ka<0){ma=ma+"-";}else if(da!=="-")ma=ma+da;if(fa&&ga===0)ma=ma+"0";if(fa&&ga===1)ma=ma+"0x";if(ca==="+"&&ea==="0")for(var pa=la,qa=ia-1|0;pa<=qa;++pa)ma=ma+ea;ma=ja?ma+ba.toUpperCase():ma+ba;if(ca==="-")for(var ra=la,sa=ia-1|0;ra<=sa;++ra)ma=ma+" ";return ma;}function r(aa,ba){if(aa==="%d"){return ""+ba;}else{var ca=p(aa),da=ca,ea=ba,fa=ea<0?da[5]?(da[8]=-1,-ea):ea>>>0:ea,ga=fa.toString(n(da[4]));if(da[9]>=0){da[2]=" ";var ha=da[9]-ga.length|0;if(ha>0)ga=c('bs_caml_utils').repeat(ha,"0")+ga;}return q(da,ga);}}function s(aa,ba){var ca=p(aa),da=ca[5]&&c('bs_caml_int64').lt(ba,[0,0])?(ca[8]=-1,c('bs_caml_int64').neg(ba)):ba,ea="",fa=ca[4];switch(fa){case 0:var ga=[0,8],ha="01234567";if(c('bs_caml_int64').lt(da,[0,0])){var ia=c('bs_caml_int64').discard_sign(da),ja=c('bs_caml_int64').div_mod(ia,ga),ka=c('bs_caml_int64').add([268435456,0],ja[0]),la=ja[1];ea=c('bs_caml_string').js_string_of_char(ha.charCodeAt(la[1]|0))+ea;while(c('bs_caml_int64').neq(ka,[0,0])){var ma=c('bs_caml_int64').div_mod(ka,ga);ka=ma[0];la=ma[1];ea=c('bs_caml_string').js_string_of_char(ha.charCodeAt(la[1]|0))+ea;}}else{var na=c('bs_caml_int64').div_mod(da,ga),oa=na[0],pa=na[1];ea=c('bs_caml_string').js_string_of_char(ha.charCodeAt(pa[1]|0))+ea;while(c('bs_caml_int64').neq(oa,[0,0])){var qa=c('bs_caml_int64').div_mod(oa,ga);oa=qa[0];pa=qa[1];ea=c('bs_caml_string').js_string_of_char(ha.charCodeAt(pa[1]|0))+ea;}}break;case 1:ea=c('bs_caml_int64').to_hex(da)+ea;break;case 2:var ra=[0,10],sa="0123456789";if(c('bs_caml_int64').lt(da,[0,0])){var ta=c('bs_caml_int64').discard_sign(da),ua=c('bs_caml_int64').div_mod(ta,ra),va=c('bs_caml_int64').div_mod(c('bs_caml_int64').add([0,8],ua[1]),ra),wa=c('bs_caml_int64').add(c('bs_caml_int64').add([214748364,3435973836],ua[0]),va[0]),xa=va[1];ea=c('bs_caml_string').js_string_of_char(sa.charCodeAt(xa[1]|0))+ea;while(c('bs_caml_int64').neq(wa,[0,0])){var ya=c('bs_caml_int64').div_mod(wa,ra);wa=ya[0];xa=ya[1];ea=c('bs_caml_string').js_string_of_char(sa.charCodeAt(xa[1]|0))+ea;}}else{var za=c('bs_caml_int64').div_mod(da,ra),ab=za[0],bb=za[1];ea=c('bs_caml_string').js_string_of_char(sa.charCodeAt(bb[1]|0))+ea;while(c('bs_caml_int64').neq(ab,[0,0])){var cb=c('bs_caml_int64').div_mod(ab,ra);ab=cb[0];bb=cb[1];ea=c('bs_caml_string').js_string_of_char(sa.charCodeAt(bb[1]|0))+ea;}}break;}if(ca[9]>=0){ca[2]=" ";var db=ca[9]-ea.length|0;if(db>0)ea=c('bs_caml_utils').repeat(db,"0")+ea;}return q(ca,ea);}function t(aa,ba){var ca=p(aa),da=ca[9]<0?6:ca[9],ea=ba<0?(ca[8]=-1,-ba):ba,fa="";if(isNaN(ea)){fa="nan";ca[2]=" ";}else if(isFinite(ea)){var ga=ca[10];switch(ga){case "e":fa=ea.toExponential(da);var ha=fa.length;if(fa[ha-3|0]==="e")fa=fa.slice(0,ha-1|0)+("0"+fa.slice(ha-1|0));break;case "f":fa=ea.toFixed(da);break;case "g":var ia=da!==0?da:1;fa=ea.toExponential(ia-1|0);var ja=fa.indexOf("e"),ka=+fa.slice(ja+1|0);if(ka<-4||ea>=1e+21||ea.toFixed(0).length>ia){var la=ja-1|0;while(fa[la]==="0")la=la-1|0;if(fa[la]===".")la=la-1|0;fa=fa.slice(0,la+1|0)+fa.slice(ja);var ma=fa.length;if(fa[ma-3|0]==="e")fa=fa.slice(0,ma-1|0)+("0"+fa.slice(ma-1|0));}else{var na=ia;if(ka<0){na=na-(ka+1|0)|0;fa=ea.toFixed(na);}else while(function(){fa=ea.toFixed(na);return +(fa.length>(ia+1|0));}())na=na-1|0;if(na!==0){var oa=fa.length-1|0;while(fa[oa]==="0")oa=oa-1|0;if(fa[oa]===".")oa=oa-1|0;fa=fa.slice(0,oa+1|0);}}break;default:}}else{fa="inf";ca[2]=" ";}return q(ca,fa);}var u=function aa(ba,ca){var da=+ba;if(ba.length>0&&da===da)return da;ba=ba.replace(/_/g,"");da=+ba;if(ba.length>0&&da===da||/^[+-]?nan$/i.test(ba))return da;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(ba)){var ea=ba.indexOf('p');ea=ea==-1?ba.indexOf('P'):ea;var fa=+ba.substring(ea+1);da=+ba.substring(0,ea);return da*Math.pow(2,fa);}if(/^\+?inf(inity)?$/i.test(ba))return Infinity;if(/^-inf(inity)?$/i.test(ba))return -Infinity;ca("float_of_string");};function v(aa){return c('bs_curry')._2(u,aa,h);}var w=r,x=r,y=l,z=l;g.caml_format_float=t;g.caml_format_int=r;g.caml_nativeint_format=w;g.caml_int32_format=x;g.caml_float_of_string=v;g.caml_int64_format=s;g.caml_int_of_string=l;g.caml_int32_of_string=y;g.caml_int64_of_string=m;g.caml_nativeint_of_string=z;}),null);
__d('bs_caml_io',['bs_caml_builtin_exceptions','bs_curry'],(function a(b,c,d,e,f,g){'use strict';function h(u,v){return u+v;}var i=undefined,j=["",function(u,v){var w=v.length-1|0;if(typeof process!=="undefined"&&process.stdout&&process.stdout.write){return process.stdout.write(v);}else if(v[w]==="\n"){return 0;}else return 0;}],k=["",function(u,v){var w=v.length-1|0;if(v[w]==="\n"){return 0;}else return 0;}];function l(){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_open_descriptor_in not implemented"];}function m(){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_open_descriptor_out not implemented"];}function n(u){if(u[0]!==""){c('bs_curry')._2(u[1],u,u[0]);u[0]="";return 0;}else return 0;}var o=function u(v){return typeof process!=="undefined"&&process.stdout&&(process.stdout.write(v),true);};function p(u,v,w,x){var y=w===0&&x===v.length?v:v.slice(w,x);if(typeof process!=="undefined"&&process.stdout&&process.stdout.write&&u===j){return process.stdout.write(y);}else{var z=y.lastIndexOf("\n");if(z<0){u[0]=u[0]+y;return 0;}else{u[0]=u[0]+y.slice(0,z+1|0);n(u);u[0]=u[0]+y.slice(z+1|0);return 0;}}}function q(u,v){return p(u,String.fromCharCode(v),0,1);}function r(u,v,w,x){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_input ic not implemented"];}function s(){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_input_char not implemnted"];}function t(){return [j,[k,0]];}g.$caret=h;g.stdin=i;g.stdout=j;g.stderr=k;g.caml_ml_open_descriptor_in=l;g.caml_ml_open_descriptor_out=m;g.caml_ml_flush=n;g.node_std_output=o;g.caml_ml_output=p;g.caml_ml_output_char=q;g.caml_ml_input=r;g.caml_ml_input_char=s;g.caml_ml_out_channels_list=t;}),null);
__d('bs_camlinternalFormatBasics',['bs_block'],(function a(b,c,d,e,f,g){'use strict';function h(k){if(typeof k==="number"){return 0;}else switch(k.tag|0){case 0:return c('bs_block').__(0,[h(k[0])]);case 1:return c('bs_block').__(1,[h(k[0])]);case 2:return c('bs_block').__(2,[h(k[0])]);case 3:return c('bs_block').__(3,[h(k[0])]);case 4:return c('bs_block').__(4,[h(k[0])]);case 5:return c('bs_block').__(5,[h(k[0])]);case 6:return c('bs_block').__(6,[h(k[0])]);case 7:return c('bs_block').__(7,[h(k[0])]);case 8:return c('bs_block').__(8,[k[0],h(k[1])]);case 9:var l=k[0];return c('bs_block').__(9,[l,l,h(k[2])]);case 10:return c('bs_block').__(10,[h(k[0])]);case 11:return c('bs_block').__(11,[h(k[0])]);case 12:return c('bs_block').__(12,[h(k[0])]);case 13:return c('bs_block').__(13,[h(k[0])]);case 14:return c('bs_block').__(14,[h(k[0])]);}}function i(k,l){if(typeof k==="number"){return l;}else switch(k.tag|0){case 0:return c('bs_block').__(0,[i(k[0],l)]);case 1:return c('bs_block').__(1,[i(k[0],l)]);case 2:return c('bs_block').__(2,[i(k[0],l)]);case 3:return c('bs_block').__(3,[i(k[0],l)]);case 4:return c('bs_block').__(4,[i(k[0],l)]);case 5:return c('bs_block').__(5,[i(k[0],l)]);case 6:return c('bs_block').__(6,[i(k[0],l)]);case 7:return c('bs_block').__(7,[i(k[0],l)]);case 8:return c('bs_block').__(8,[k[0],i(k[1],l)]);case 9:return c('bs_block').__(9,[k[0],k[1],i(k[2],l)]);case 10:return c('bs_block').__(10,[i(k[0],l)]);case 11:return c('bs_block').__(11,[i(k[0],l)]);case 12:return c('bs_block').__(12,[i(k[0],l)]);case 13:return c('bs_block').__(13,[i(k[0],l)]);case 14:return c('bs_block').__(14,[i(k[0],l)]);}}function j(k,l){if(typeof k==="number"){return l;}else switch(k.tag|0){case 0:return c('bs_block').__(0,[j(k[0],l)]);case 1:return c('bs_block').__(1,[j(k[0],l)]);case 2:return c('bs_block').__(2,[k[0],j(k[1],l)]);case 3:return c('bs_block').__(3,[k[0],j(k[1],l)]);case 4:return c('bs_block').__(4,[k[0],k[1],k[2],j(k[3],l)]);case 5:return c('bs_block').__(5,[k[0],k[1],k[2],j(k[3],l)]);case 6:return c('bs_block').__(6,[k[0],k[1],k[2],j(k[3],l)]);case 7:return c('bs_block').__(7,[k[0],k[1],k[2],j(k[3],l)]);case 8:return c('bs_block').__(8,[k[0],k[1],k[2],j(k[3],l)]);case 9:return c('bs_block').__(9,[j(k[0],l)]);case 10:return c('bs_block').__(10,[j(k[0],l)]);case 11:return c('bs_block').__(11,[k[0],j(k[1],l)]);case 12:return c('bs_block').__(12,[k[0],j(k[1],l)]);case 13:return c('bs_block').__(13,[k[0],k[1],j(k[2],l)]);case 14:return c('bs_block').__(14,[k[0],k[1],j(k[2],l)]);case 15:return c('bs_block').__(15,[j(k[0],l)]);case 16:return c('bs_block').__(16,[j(k[0],l)]);case 17:return c('bs_block').__(17,[k[0],j(k[1],l)]);case 18:return c('bs_block').__(18,[k[0],j(k[1],l)]);case 19:return c('bs_block').__(19,[j(k[0],l)]);case 20:return c('bs_block').__(20,[k[0],k[1],j(k[2],l)]);case 21:return c('bs_block').__(21,[k[0],j(k[1],l)]);case 22:return c('bs_block').__(22,[j(k[0],l)]);case 23:return c('bs_block').__(23,[k[0],j(k[1],l)]);case 24:return c('bs_block').__(24,[k[0],k[1],j(k[2],l)]);}}g.concat_fmtty=i;g.erase_rel=h;g.concat_fmt=j;}),null);
__d('bs_pervasives',['bs_caml_builtin_exceptions','bs_caml_obj','bs_caml_io','bs_caml_exceptions','bs_caml_format','bs_curry','bs_camlinternalFormatBasics','bs_caml_string'],(function a(b,c,d,e,f,g){'use strict';function h(wc){throw [c('bs_caml_builtin_exceptions').failure,wc];}function i(wc){throw [c('bs_caml_builtin_exceptions').invalid_argument,wc];}var j=c('bs_caml_exceptions').create("Pervasives.Exit");function k(wc,xc){if(c('bs_caml_obj').caml_lessequal(wc,xc)){return wc;}else return xc;}function l(wc,xc){if(c('bs_caml_obj').caml_greaterequal(wc,xc)){return wc;}else return xc;}function m(wc){if(wc>=0){return wc;}else return -wc;}function n(wc){return wc^-1;}var o=-2147483648;function p(wc,xc){return wc+xc;}function q(wc){if(wc<0||wc>255){throw [c('bs_caml_builtin_exceptions').invalid_argument,"char_of_int"];}else return wc;}function r(wc){if(wc){return "true";}else return "false";}function s(wc){switch(wc){case "false":return 0;case "true":return 1;default:throw [c('bs_caml_builtin_exceptions').invalid_argument,"bool_of_string"];}}function t(wc){return ""+wc;}function u(wc){var xc=wc.length,yc=0;while(true){var zc=yc;if(zc>=xc){return p(wc,".");}else{var ad=c('bs_caml_string').get(wc,zc);if(ad>=48){if(ad>=58){return wc;}else{yc=zc+1|0;continue;}}else if(ad!==45){return wc;}else{yc=zc+1|0;continue;}}}}function v(wc){return u(c('bs_caml_format').caml_format_float("%.12g",wc));}function w(wc,xc){if(wc){return [wc[0],w(wc[1],xc)];}else return xc;}var x=c('bs_caml_io').stdin,y=c('bs_caml_io').stdout,z=c('bs_caml_io').stderr;function aa(wc,xc,yc){return c('bs_caml_io').caml_ml_open_descriptor_out(function(){throw "caml_sys_open not implemented by bucklescript yet\n";}());}function ba(wc){return aa([1,[3,[4,[7,0]]]],438,wc);}function ca(wc){return aa([1,[3,[4,[6,0]]]],438,wc);}function da(){var wc=c('bs_caml_io').caml_ml_out_channels_list(0);while(true){var xc=wc;if(xc){try{c('bs_caml_io').caml_ml_flush(xc[0]);}catch(yc){}wc=xc[1];continue;}else return 0;}}function ea(wc,xc){return c('bs_caml_io').caml_ml_output(wc,xc,0,xc.length);}function fa(wc,xc){return c('bs_caml_io').caml_ml_output(wc,xc,0,xc.length);}function ga(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"output"];}else return c('bs_caml_io').caml_ml_output(wc,xc,yc,zc);}function ha(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"output_substring"];}else return c('bs_caml_io').caml_ml_output(wc,xc,yc,zc);}function ia(wc,xc){return function(){throw "caml_output_value not implemented by bucklescript yet\n";}();}function ja(wc){c('bs_caml_io').caml_ml_flush(wc);return function(){throw "caml_ml_close_channel not implemented by bucklescript yet\n";}();}function ka(wc){try{c('bs_caml_io').caml_ml_flush(wc);}catch(xc){}try{return function(){throw "caml_ml_close_channel not implemented by bucklescript yet\n";}();}catch(yc){return 0;}}function la(wc,xc,yc){return c('bs_caml_io').caml_ml_open_descriptor_in(function(){throw "caml_sys_open not implemented by bucklescript yet\n";}());}function ma(wc){return la([0,[7,0]],0,wc);}function na(wc){return la([0,[6,0]],0,wc);}function oa(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"input"];}else return function(){throw "caml_ml_input not implemented by bucklescript yet\n";}();}function pa(wc,xc,yc,zc){while(true){var ad=zc,bd=yc;if(ad<=0){return 0;}else{var cd=function(){throw "caml_ml_input not implemented by bucklescript yet\n";}();if(cd){zc=ad-cd|0;yc=bd+cd|0;continue;}else throw c('bs_caml_builtin_exceptions').end_of_file;}}}function qa(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"really_input"];}else return pa(wc,xc,yc,zc);}function ra(wc,xc){var yc=c('bs_caml_string').caml_create_string(xc);qa(wc,yc,0,xc);return c('bs_caml_string').bytes_to_string(yc);}function sa(wc){var xc=function zc(ad,bd,cd){while(true){var dd=cd,ed=bd;if(dd){var fd=dd[0],gd=fd.length;c('bs_caml_string').caml_blit_bytes(fd,0,ad,ed-gd|0,gd);cd=dd[1];bd=ed-gd|0;continue;}else return ad;}},yc=function zc(ad,bd){while(true){var cd=bd,dd=ad,ed=function(){throw "caml_ml_input_scan_line not implemented by bucklescript yet\n";}();if(ed){if(ed>0){var fd=c('bs_caml_string').caml_create_string(ed-1|0);(function(){throw "caml_ml_input not implemented by bucklescript yet\n";})();c('bs_caml_io').caml_ml_input_char(wc);if(dd){var gd=(cd+ed|0)-1|0;return xc(c('bs_caml_string').caml_create_string(gd),gd,[fd,dd]);}else return fd;}else{var hd=c('bs_caml_string').caml_create_string(-ed);(function(){throw "caml_ml_input not implemented by bucklescript yet\n";})();bd=cd-ed|0;ad=[hd,dd];continue;}}else if(dd){return xc(c('bs_caml_string').caml_create_string(cd),cd,dd);}else throw c('bs_caml_builtin_exceptions').end_of_file;}};return c('bs_caml_string').bytes_to_string(yc(0,0));}function ta(){try{return function(){throw "caml_ml_close_channel not implemented by bucklescript yet\n";}();}catch(wc){return 0;}}function ua(wc){return c('bs_caml_io').caml_ml_output_char(y,wc);}function va(wc){return fa(y,wc);}function wa(wc){return ea(y,wc);}function xa(wc){return fa(y,""+wc);}function ya(wc){return fa(y,u(c('bs_caml_format').caml_format_float("%.12g",wc)));}function za(wc){return 0;}function ab(){c('bs_caml_io').caml_ml_output_char(y,10);return c('bs_caml_io').caml_ml_flush(y);}function bb(wc){return c('bs_caml_io').caml_ml_output_char(z,wc);}function cb(wc){return fa(z,wc);}function db(wc){return ea(z,wc);}function eb(wc){return fa(z,""+wc);}function fb(wc){return fa(z,u(c('bs_caml_format').caml_format_float("%.12g",wc)));}function gb(wc){return 0;}function hb(){c('bs_caml_io').caml_ml_output_char(z,10);return c('bs_caml_io').caml_ml_flush(z);}function ib(){c('bs_caml_io').caml_ml_flush(y);return sa(x);}function jb(){return c('bs_caml_format').caml_int_of_string((c('bs_caml_io').caml_ml_flush(y),sa(x)));}function kb(){return c('bs_caml_format').caml_float_of_string((c('bs_caml_io').caml_ml_flush(y),sa(x)));}function lb(wc){return wc[1];}function mb(wc,xc){return [c('bs_camlinternalFormatBasics').concat_fmt(wc[0],xc[0]),p(wc[1],p("%,",xc[1]))];}var nb=[da];function ob(wc){var xc=nb[0];nb[0]=function(){c('bs_curry')._1(wc,0);return c('bs_curry')._1(xc,0);};return 0;}function pb(){return c('bs_curry')._1(nb[0],0);}function qb(){pb(0);return function(){throw "caml_sys_exit not implemented by bucklescript yet\n";}();}var rb=2147483647,sb=Infinity,tb=-Infinity,ub=NaN,vb=Number.MAX_VALUE,wb=Number.MIN_VALUE,xb=2.220446049250313e-16,yb=c('bs_caml_io').caml_ml_flush,zb=c('bs_caml_io').caml_ml_output_char,ac=c('bs_caml_io').caml_ml_output_char;function bc(wc,xc){return function(){throw "caml_ml_output_int not implemented by bucklescript yet\n";}();}function cc(wc,xc){return function(){throw "caml_ml_seek_out not implemented by bucklescript yet\n";}();}function dc(){return function(){throw "caml_ml_pos_out not implemented by bucklescript yet\n";}();}function ec(){return function(){throw "caml_ml_channel_size not implemented by bucklescript yet\n";}();}function fc(wc,xc){return function(){throw "caml_ml_set_binary_mode not implemented by bucklescript yet\n";}();}var gc=c('bs_caml_io').caml_ml_input_char,hc=c('bs_caml_io').caml_ml_input_char;function ic(){return function(){throw "caml_ml_input_int not implemented by bucklescript yet\n";}();}function jc(){return function(){throw "caml_input_value not implemented by bucklescript yet\n";}();}function kc(wc,xc){return function(){throw "caml_ml_seek_in not implemented by bucklescript yet\n";}();}function lc(){return function(){throw "caml_ml_pos_in not implemented by bucklescript yet\n";}();}function mc(){return function(){throw "caml_ml_channel_size not implemented by bucklescript yet\n";}();}function nc(){return function(){throw "caml_ml_close_channel not implemented by bucklescript yet\n";}();}function oc(wc,xc){return function(){throw "caml_ml_set_binary_mode not implemented by bucklescript yet\n";}();}function pc(wc,xc){return function(){throw "caml_ml_seek_out_64 not implemented by bucklescript yet\n";}();}function qc(){return function(){throw "caml_ml_pos_out_64 not implemented by bucklescript yet\n";}();}function rc(){return function(){throw "caml_ml_channel_size_64 not implemented by bucklescript yet\n";}();}function sc(wc,xc){return function(){throw "caml_ml_seek_in_64 not implemented by bucklescript yet\n";}();}function tc(){return function(){throw "caml_ml_pos_in_64 not implemented by bucklescript yet\n";}();}function uc(){return function(){throw "caml_ml_channel_size_64 not implemented by bucklescript yet\n";}();}var vc=[pc,qc,rc,sc,tc,uc];g.invalid_arg=i;g.failwith=h;g.Exit=j;g.min=k;g.max=l;g.abs=m;g.max_int=rb;g.min_int=o;g.lnot=n;g.infinity=sb;g.neg_infinity=tb;g.nan=ub;g.max_float=vb;g.min_float=wb;g.epsilon_float=xb;g.$caret=p;g.char_of_int=q;g.string_of_bool=r;g.bool_of_string=s;g.string_of_int=t;g.string_of_float=v;g.$at=w;g.stdin=x;g.stdout=y;g.stderr=z;g.print_char=ua;g.print_string=va;g.print_bytes=wa;g.print_int=xa;g.print_float=ya;g.print_endline=za;g.print_newline=ab;g.prerr_char=bb;g.prerr_string=cb;g.prerr_bytes=db;g.prerr_int=eb;g.prerr_float=fb;g.prerr_endline=gb;g.prerr_newline=hb;g.read_line=ib;g.read_int=jb;g.read_float=kb;g.open_out=ba;g.open_out_bin=ca;g.open_out_gen=aa;g.flush=yb;g.flush_all=da;g.output_char=zb;g.output_string=fa;g.output_bytes=ea;g.output=ga;g.output_substring=ha;g.output_byte=ac;g.output_binary_int=bc;g.output_value=ia;g.seek_out=cc;g.pos_out=dc;g.out_channel_length=ec;g.close_out=ja;g.close_out_noerr=ka;g.set_binary_mode_out=fc;g.open_in=ma;g.open_in_bin=na;g.open_in_gen=la;g.input_char=gc;g.input_line=sa;g.input=oa;g.really_input=qa;g.really_input_string=ra;g.input_byte=hc;g.input_binary_int=ic;g.input_value=jc;g.seek_in=kc;g.pos_in=lc;g.in_channel_length=mc;g.close_in=nc;g.close_in_noerr=ta;g.set_binary_mode_in=oc;g.LargeFile=vc;g.string_of_format=lb;g.$caret$caret=mb;g.exit=qb;g.at_exit=ob;g.valid_float_lexem=u;g.unsafe_really_input=pa;g.do_at_exit=pb;}),null);
__d('bs_list',['bs_caml_builtin_exceptions','bs_caml_obj','bs_pervasives','bs_curry'],(function a(b,c,d,e,f,g){'use strict';function h(bb){var cb=0,db=bb;while(true){var eb=db,fb=cb;if(eb){db=eb[1];cb=fb+1|0;continue;}else return fb;}}function i(bb){if(bb){return bb[0];}else throw [c('bs_caml_builtin_exceptions').failure,"hd"];}function j(bb){if(bb){return bb[1];}else throw [c('bs_caml_builtin_exceptions').failure,"tl"];}function k(bb,cb){if(cb<0){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.nth"];}else{var db=bb,eb=cb;while(true){var fb=eb,gb=db;if(gb){if(fb){eb=fb-1|0;db=gb[1];continue;}else return gb[0];}else throw [c('bs_caml_builtin_exceptions').failure,"nth"];}}}function l(bb,cb){while(true){var db=cb,eb=bb;if(eb){cb=[eb[0],db];bb=eb[1];continue;}else return db;}}function m(bb){return l(bb,0);}function n(bb){if(bb){return c('bs_pervasives').$at(bb[0],n(bb[1]));}else return 0;}function o(bb,cb){if(cb){var db=c('bs_curry')._1(bb,cb[0]);return [db,o(bb,cb[1])];}else return 0;}function p(bb,cb,db){if(db){var eb=c('bs_curry')._2(cb,bb,db[0]);return [eb,p(bb+1|0,cb,db[1])];}else return 0;}function q(bb,cb){return p(0,bb,cb);}function r(bb,cb){var db=0,eb=cb;while(true){var fb=eb,gb=db;if(fb){eb=fb[1];db=[c('bs_curry')._1(bb,fb[0]),gb];continue;}else return gb;}}function s(bb,cb){while(true){var db=cb;if(db){c('bs_curry')._1(bb,db[0]);cb=db[1];continue;}else return 0;}}function t(bb,cb){var db=0,eb=bb,fb=cb;while(true){var gb=fb,hb=db;if(gb){c('bs_curry')._2(eb,hb,gb[0]);fb=gb[1];db=hb+1|0;continue;}else return 0;}}function u(bb,cb,db){while(true){var eb=db,fb=cb;if(eb){db=eb[1];cb=c('bs_curry')._2(bb,fb,eb[0]);continue;}else return fb;}}function v(bb,cb,db){if(cb){return c('bs_curry')._2(bb,cb[0],v(bb,cb[1],db));}else return db;}function w(bb,cb,db){if(cb){if(db){var eb=c('bs_curry')._2(bb,cb[0],db[0]);return [eb,w(bb,cb[1],db[1])];}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.map2"];}else if(db){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.map2"];}else return 0;}function x(bb,cb,db){var eb=0,fb=cb,gb=db;while(true){var hb=gb,ib=fb,jb=eb;if(ib){if(hb){gb=hb[1];fb=ib[1];eb=[c('bs_curry')._2(bb,ib[0],hb[0]),jb];continue;}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.rev_map2"];}else if(hb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.rev_map2"];}else return jb;}}function y(bb,cb,db){while(true){var eb=db,fb=cb;if(fb){if(eb){c('bs_curry')._2(bb,fb[0],eb[0]);db=eb[1];cb=fb[1];continue;}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.iter2"];}else if(eb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.iter2"];}else return 0;}}function z(bb,cb,db,eb){while(true){var fb=eb,gb=db,hb=cb;if(gb){if(fb){eb=fb[1];db=gb[1];cb=c('bs_curry')._3(bb,hb,gb[0],fb[0]);continue;}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_left2"];}else if(fb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_left2"];}else return hb;}}function aa(bb,cb,db,eb){if(cb){if(db){return c('bs_curry')._3(bb,cb[0],db[0],aa(bb,cb[1],db[1],eb));}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_right2"];}else if(db){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_right2"];}else return eb;}function ba(bb,cb){while(true){var db=cb;if(db){if(c('bs_curry')._1(bb,db[0])){cb=db[1];continue;}else return 0;}else return 1;}}function ca(bb,cb){while(true){var db=cb;if(db){if(c('bs_curry')._1(bb,db[0])){return 1;}else{cb=db[1];continue;}}else return 0;}}function da(bb,cb,db){while(true){var eb=db,fb=cb;if(fb){if(eb){if(c('bs_curry')._2(bb,fb[0],eb[0])){db=eb[1];cb=fb[1];continue;}else return 0;}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.for_all2"];}else if(eb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.for_all2"];}else return 1;}}function ea(bb,cb,db){while(true){var eb=db,fb=cb;if(fb){if(eb){if(c('bs_curry')._2(bb,fb[0],eb[0])){return 1;}else{db=eb[1];cb=fb[1];continue;}}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.exists2"];}else if(eb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.exists2"];}else return 0;}}function fa(bb,cb){while(true){var db=cb;if(db){if(c('bs_caml_obj').caml_compare(db[0],bb)){cb=db[1];continue;}else return 1;}else return 0;}}function ga(bb,cb){while(true){var db=cb;if(db){if(db[0]===bb){return 1;}else{cb=db[1];continue;}}else return 0;}}function ha(bb,cb){while(true){var db=cb;if(db){var eb=db[0];if(c('bs_caml_obj').caml_compare(eb[0],bb)){cb=db[1];continue;}else return eb[1];}else throw c('bs_caml_builtin_exceptions').not_found;}}function ia(bb,cb){while(true){var db=cb;if(db){var eb=db[0];if(eb[0]===bb){return eb[1];}else{cb=db[1];continue;}}else throw c('bs_caml_builtin_exceptions').not_found;}}function ja(bb,cb){while(true){var db=cb;if(db){if(c('bs_caml_obj').caml_compare(db[0][0],bb)){cb=db[1];continue;}else return 1;}else return 0;}}function ka(bb,cb){while(true){var db=cb;if(db){if(db[0][0]===bb){return 1;}else{cb=db[1];continue;}}else return 0;}}function la(bb,cb){if(cb){var db=cb[1],eb=cb[0];if(c('bs_caml_obj').caml_compare(eb[0],bb)){return [eb,la(bb,db)];}else return db;}else return 0;}function ma(bb,cb){if(cb){var db=cb[1],eb=cb[0];if(eb[0]===bb){return db;}else return [eb,ma(bb,db)];}else return 0;}function na(bb,cb){while(true){var db=cb;if(db){var eb=db[0];if(c('bs_curry')._1(bb,eb)){return eb;}else{cb=db[1];continue;}}else throw c('bs_caml_builtin_exceptions').not_found;}}function oa(bb){return function(cb){var db=0,eb=cb;while(true){var fb=eb,gb=db;if(fb){var hb=fb[1],ib=fb[0];if(c('bs_curry')._1(bb,ib)){eb=hb;db=[ib,gb];continue;}else{eb=hb;continue;}}else return l(gb,0);}};}function pa(bb,cb){var db=0,eb=0,fb=cb;while(true){var gb=fb,hb=eb,ib=db;if(gb){var jb=gb[1],kb=gb[0];if(c('bs_curry')._1(bb,kb)){fb=jb;db=[kb,ib];continue;}else{fb=jb;eb=[kb,hb];continue;}}else return [l(ib,0),l(hb,0)];}}function qa(bb){if(bb){var cb=bb[0],db=qa(bb[1]);return [[cb[0],db[0]],[cb[1],db[1]]];}else return [0,0];}function ra(bb,cb){if(bb){if(cb){return [[bb[0],cb[0]],ra(bb[1],cb[1])];}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.combine"];}else if(cb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.combine"];}else return 0;}function sa(bb,cb,db){if(cb){if(db){var eb=db[0],fb=cb[0];if(c('bs_curry')._2(bb,fb,eb)<=0){return [fb,sa(bb,cb[1],db)];}else return [eb,sa(bb,cb,db[1])];}else return cb;}else return db;}function ta(bb,cb){while(true){var db=cb,eb=bb;if(eb){if(db){cb=db[1];bb=eb-1|0;continue;}else throw [c('bs_caml_builtin_exceptions').assert_failure,["list.ml",223,11]];}else return db;}}function ua(bb,cb){var db=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1;}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0];if(c('bs_curry')._2(bb,ob,nb)<=0){if(c('bs_curry')._2(bb,nb,mb)<=0){return [ob,[nb,[mb,0]]];}else if(c('bs_curry')._2(bb,ob,mb)<=0){return [ob,[mb,[nb,0]]];}else return [mb,[ob,[nb,0]]];}else if(c('bs_curry')._2(bb,ob,mb)<=0){return [nb,[ob,[mb,0]]];}else if(c('bs_curry')._2(bb,nb,mb)<=0){return [nb,[mb,[ob,0]]];}else return [mb,[nb,[ob,0]]];}else jb=1;}else jb=1;}else jb=1;}else if(ib){var pb=ib[1];if(pb){var qb=pb[0],rb=ib[0];if(c('bs_curry')._2(bb,rb,qb)<=0){return [rb,[qb,0]];}else return [qb,[rb,0]];}else jb=1;}else jb=1;if(jb===1){var sb=hb>>1,tb=hb-sb|0,ub=ta(sb,ib),vb=eb(sb,ib),wb=eb(tb,ub),xb=vb,yb=wb,zb=0;while(true){var ac=zb,bc=yb,cc=xb;if(cc){if(bc){var dc=bc[0],ec=cc[0];if(c('bs_curry')._2(bb,ec,dc)>0){zb=[ec,ac];xb=cc[1];continue;}else{zb=[dc,ac];yb=bc[1];continue;}}else return l(cc,ac);}else return l(bc,ac);}}},eb=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1;}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0];if(c('bs_curry')._2(bb,ob,nb)>0){if(c('bs_curry')._2(bb,nb,mb)>0){return [ob,[nb,[mb,0]]];}else if(c('bs_curry')._2(bb,ob,mb)>0){return [ob,[mb,[nb,0]]];}else return [mb,[ob,[nb,0]]];}else if(c('bs_curry')._2(bb,ob,mb)>0){return [nb,[ob,[mb,0]]];}else if(c('bs_curry')._2(bb,nb,mb)>0){return [nb,[mb,[ob,0]]];}else return [mb,[nb,[ob,0]]];}else jb=1;}else jb=1;}else jb=1;}else if(ib){var pb=ib[1];if(pb){var qb=pb[0],rb=ib[0];if(c('bs_curry')._2(bb,rb,qb)>0){return [rb,[qb,0]];}else return [qb,[rb,0]];}else jb=1;}else jb=1;if(jb===1){var sb=hb>>1,tb=hb-sb|0,ub=ta(sb,ib),vb=db(sb,ib),wb=db(tb,ub),xb=vb,yb=wb,zb=0;while(true){var ac=zb,bc=yb,cc=xb;if(cc){if(bc){var dc=bc[0],ec=cc[0];if(c('bs_curry')._2(bb,ec,dc)<=0){zb=[ec,ac];xb=cc[1];continue;}else{zb=[dc,ac];yb=bc[1];continue;}}else return l(cc,ac);}else return l(bc,ac);}}},fb=h(cb);if(fb<2){return cb;}else return db(fb,cb);}function va(bb,cb){var db=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1;}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0],pb=c('bs_curry')._2(bb,ob,nb);if(pb){if(pb<0){var qb=c('bs_curry')._2(bb,nb,mb);if(qb){if(qb<0){return [ob,[nb,[mb,0]]];}else{var rb=c('bs_curry')._2(bb,ob,mb);if(rb){if(rb<0){return [ob,[mb,[nb,0]]];}else return [mb,[ob,[nb,0]]];}else return [ob,[nb,0]];}}else return [ob,[nb,0]];}else{var sb=c('bs_curry')._2(bb,ob,mb);if(sb){if(sb<0){return [nb,[ob,[mb,0]]];}else{var tb=c('bs_curry')._2(bb,nb,mb);if(tb){if(tb<0){return [nb,[mb,[ob,0]]];}else return [mb,[nb,[ob,0]]];}else return [nb,[ob,0]];}}else return [nb,[ob,0]];}}else{var ub=c('bs_curry')._2(bb,nb,mb);if(ub){if(ub<0){return [nb,[mb,0]];}else return [mb,[nb,0]];}else return [nb,0];}}else jb=1;}else jb=1;}else jb=1;}else if(ib){var vb=ib[1];if(vb){var wb=vb[0],xb=ib[0],yb=c('bs_curry')._2(bb,xb,wb);if(yb){if(yb<0){return [xb,[wb,0]];}else return [wb,[xb,0]];}else return [xb,0];}else jb=1;}else jb=1;if(jb===1){var zb=hb>>1,ac=hb-zb|0,bc=ta(zb,ib),cc=eb(zb,ib),dc=eb(ac,bc),ec=cc,fc=dc,gc=0;while(true){var hc=gc,ic=fc,jc=ec;if(jc){if(ic){var kc=ic[1],lc=ic[0],mc=jc[1],nc=jc[0],oc=c('bs_curry')._2(bb,nc,lc);if(oc){if(oc>0){gc=[nc,hc];ec=mc;continue;}else{gc=[lc,hc];fc=kc;continue;}}else{gc=[nc,hc];fc=kc;ec=mc;continue;}}else return l(jc,hc);}else return l(ic,hc);}}},eb=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1;}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0],pb=c('bs_curry')._2(bb,ob,nb);if(pb){if(pb>0){var qb=c('bs_curry')._2(bb,nb,mb);if(qb){if(qb>0){return [ob,[nb,[mb,0]]];}else{var rb=c('bs_curry')._2(bb,ob,mb);if(rb){if(rb>0){return [ob,[mb,[nb,0]]];}else return [mb,[ob,[nb,0]]];}else return [ob,[nb,0]];}}else return [ob,[nb,0]];}else{var sb=c('bs_curry')._2(bb,ob,mb);if(sb){if(sb>0){return [nb,[ob,[mb,0]]];}else{var tb=c('bs_curry')._2(bb,nb,mb);if(tb){if(tb>0){return [nb,[mb,[ob,0]]];}else return [mb,[nb,[ob,0]]];}else return [nb,[ob,0]];}}else return [nb,[ob,0]];}}else{var ub=c('bs_curry')._2(bb,nb,mb);if(ub){if(ub>0){return [nb,[mb,0]];}else return [mb,[nb,0]];}else return [nb,0];}}else jb=1;}else jb=1;}else jb=1;}else if(ib){var vb=ib[1];if(vb){var wb=vb[0],xb=ib[0],yb=c('bs_curry')._2(bb,xb,wb);if(yb){if(yb>0){return [xb,[wb,0]];}else return [wb,[xb,0]];}else return [xb,0];}else jb=1;}else jb=1;if(jb===1){var zb=hb>>1,ac=hb-zb|0,bc=ta(zb,ib),cc=db(zb,ib),dc=db(ac,bc),ec=cc,fc=dc,gc=0;while(true){var hc=gc,ic=fc,jc=ec;if(jc){if(ic){var kc=ic[1],lc=ic[0],mc=jc[1],nc=jc[0],oc=c('bs_curry')._2(bb,nc,lc);if(oc){if(oc<0){gc=[nc,hc];ec=mc;continue;}else{gc=[lc,hc];fc=kc;continue;}}else{gc=[nc,hc];fc=kc;ec=mc;continue;}}else return l(jc,hc);}else return l(ic,hc);}}},fb=h(cb);if(fb<2){return cb;}else return db(fb,cb);}var wa=c('bs_pervasives').$at,xa=n,ya=oa,za=ua,ab=ua;g.length=h;g.hd=i;g.tl=j;g.nth=k;g.rev=m;g.append=wa;g.rev_append=l;g.concat=xa;g.flatten=n;g.iter=s;g.iteri=t;g.map=o;g.mapi=q;g.rev_map=r;g.fold_left=u;g.fold_right=v;g.iter2=y;g.map2=w;g.rev_map2=x;g.fold_left2=z;g.fold_right2=aa;g.for_all=ba;g.exists=ca;g.for_all2=da;g.exists2=ea;g.mem=fa;g.memq=ga;g.find=na;g.filter=ya;g.find_all=oa;g.partition=pa;g.assoc=ha;g.assq=ia;g.mem_assoc=ja;g.mem_assq=ka;g.remove_assoc=la;g.remove_assq=ma;g.split=qa;g.combine=ra;g.sort=za;g.stable_sort=ua;g.fast_sort=ab;g.sort_uniq=va;g.merge=sa;}),null);
__d('bs_bytes',['bs_caml_builtin_exceptions','bs_caml_obj','bs_pervasives','bs_caml_int32','bs_char','bs_curry','bs_caml_string','bs_list'],(function a(b,c,d,e,f,g){'use strict';function h(ta,ua){var va=c('bs_caml_string').caml_create_string(ta);c('bs_caml_string').caml_fill_string(va,0,ta,ua);return va;}function i(ta,ua){var va=c('bs_caml_string').caml_create_string(ta);for(var wa=0,xa=ta-1|0;wa<=xa;++wa)va[wa]=c('bs_curry')._1(ua,wa);return va;}var j=[];function k(ta){var ua=ta.length,va=c('bs_caml_string').caml_create_string(ua);c('bs_caml_string').caml_blit_bytes(ta,0,va,0,ua);return va;}function l(ta){return c('bs_caml_string').bytes_to_string(k(ta));}function m(ta){return k(c('bs_caml_string').bytes_of_string(ta));}function n(ta,ua,va){if(ua<0||va<0||ua>(ta.length-va|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.sub / Bytes.sub"];}else{var wa=c('bs_caml_string').caml_create_string(va);c('bs_caml_string').caml_blit_bytes(ta,ua,wa,0,va);return wa;}}function o(ta,ua,va){return c('bs_caml_string').bytes_to_string(n(ta,ua,va));}function p(ta,ua,va){var wa=(ta.length+ua|0)+va|0,xa=c('bs_caml_string').caml_create_string(wa),ya=ua<0?[-ua,0]:[0,ua],za=ya[1],ab=ya[0],bb=c('bs_pervasives').min(ta.length-ab|0,wa-za|0);if(bb>0)c('bs_caml_string').caml_blit_bytes(ta,ab,xa,za,bb);return xa;}function q(ta,ua,va,wa){if(ua<0||va<0||ua>(ta.length-va|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.fill / Bytes.fill"];}else return c('bs_caml_string').caml_fill_string(ta,ua,va,wa);}function r(ta,ua,va,wa,xa){if(xa<0||ua<0||ua>(ta.length-xa|0)||wa<0||wa>(va.length-xa|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Bytes.blit"];}else return c('bs_caml_string').caml_blit_bytes(ta,ua,va,wa,xa);}function s(ta,ua,va,wa,xa){if(xa<0||ua<0||ua>(ta.length-xa|0)||wa<0||wa>(va.length-xa|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.blit / Bytes.blit_string"];}else return c('bs_caml_string').caml_blit_string(ta,ua,va,wa,xa);}function t(ta,ua){for(var va=0,wa=ua.length-1|0;va<=wa;++va)c('bs_curry')._1(ta,ua[va]);return 0;}function u(ta,ua){for(var va=0,wa=ua.length-1|0;va<=wa;++va)c('bs_curry')._2(ta,va,ua[va]);return 0;}function v(ta,ua){if(ua){var va=ua[0],wa=[0],xa=[0];c('bs_list').iter(function(ab){wa[0]=wa[0]+1|0;xa[0]=xa[0]+ab.length|0;return 0;},ua);var ya=c('bs_caml_string').caml_create_string(xa[0]+c('bs_caml_int32').imul(ta.length,wa[0]-1|0)|0);c('bs_caml_string').caml_blit_bytes(va,0,ya,0,va.length);var za=[va.length];c('bs_list').iter(function(ab){c('bs_caml_string').caml_blit_bytes(ta,0,ya,za[0],ta.length);za[0]=za[0]+ta.length|0;c('bs_caml_string').caml_blit_bytes(ab,0,ya,za[0],ab.length);za[0]=za[0]+ab.length|0;return 0;},ua[1]);return ya;}else return j;}function w(ta,ua){return ta.concat(ua);}function x(ta){var ua=ta-9|0;if(ua>4||ua<0){if(ua!==23){return 0;}else return 1;}else if(ua!==2){return 1;}else return 0;}function y(ta){var ua=ta.length,va=0;while(va<ua&&x(ta[va]))va=va+1|0;var wa=ua-1|0;while(wa>=va&&x(ta[wa]))wa=wa-1|0;if(wa>=va){return n(ta,va,(wa-va|0)+1|0);}else return j;}function z(ta){var ua=0;for(var va=0,wa=ta.length-1|0;va<=wa;++va){var xa=ta[va],ya;if(xa>=32){var za=xa-34|0;ya=za>58||za<0?za>=93?4:1:za>57||za<1?2:1;}else ya=xa>=11?xa!==13?4:2:xa>=8?2:4;ua=ua+ya|0;}if(ua===ta.length){return k(ta);}else{var ab=c('bs_caml_string').caml_create_string(ua);ua=0;for(var bb=0,cb=ta.length-1|0;bb<=cb;++bb){var db=ta[bb],eb=0;if(db>=35){if(db!==92){if(db>=127){eb=1;}else ab[ua]=db;}else eb=2;}else if(db>=32){if(db>=34){eb=2;}else ab[ua]=db;}else if(db>=14){eb=1;}else switch(db){case 8:ab[ua]=92;ua=ua+1|0;ab[ua]=98;break;case 9:ab[ua]=92;ua=ua+1|0;ab[ua]=116;break;case 10:ab[ua]=92;ua=ua+1|0;ab[ua]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:eb=1;break;case 13:ab[ua]=92;ua=ua+1|0;ab[ua]=114;break;}switch(eb){case 1:ab[ua]=92;ua=ua+1|0;ab[ua]=48+(db/100|0)|0;ua=ua+1|0;ab[ua]=48+(db/10|0)%10|0;ua=ua+1|0;ab[ua]=48+db%10|0;break;case 2:ab[ua]=92;ua=ua+1|0;ab[ua]=db;break;}ua=ua+1|0;}return ab;}}function aa(ta,ua){var va=ua.length;if(va){var wa=c('bs_caml_string').caml_create_string(va);for(var xa=0,ya=va-1|0;xa<=ya;++xa)wa[xa]=c('bs_curry')._1(ta,ua[xa]);return wa;}else return ua;}function ba(ta,ua){var va=ua.length;if(va){var wa=c('bs_caml_string').caml_create_string(va);for(var xa=0,ya=va-1|0;xa<=ya;++xa)wa[xa]=c('bs_curry')._2(ta,xa,ua[xa]);return wa;}else return ua;}function ca(ta){return aa(c('bs_char').uppercase,ta);}function da(ta){return aa(c('bs_char').lowercase,ta);}function ea(ta,ua){if(ua.length){var va=k(ua);va[0]=c('bs_curry')._1(ta,ua[0]);return va;}else return ua;}function fa(ta){return ea(c('bs_char').uppercase,ta);}function ga(ta){return ea(c('bs_char').lowercase,ta);}function ha(ta,ua,va,wa){while(true){var xa=va;if(xa>=ua){throw c('bs_caml_builtin_exceptions').not_found;}else if(ta[xa]===wa){return xa;}else{va=xa+1|0;continue;}}}function ia(ta,ua){return ha(ta,ta.length,0,ua);}function ja(ta,ua,va){var wa=ta.length;if(ua<0||ua>wa){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.index_from / Bytes.index_from"];}else return ha(ta,wa,ua,va);}function ka(ta,ua,va){while(true){var wa=ua;if(wa<0){throw c('bs_caml_builtin_exceptions').not_found;}else if(ta[wa]===va){return wa;}else{ua=wa-1|0;continue;}}}function la(ta,ua){return ka(ta,ta.length-1|0,ua);}function ma(ta,ua,va){if(ua<-1||ua>=ta.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.rindex_from / Bytes.rindex_from"];}else return ka(ta,ua,va);}function na(ta,ua,va){var wa=ta.length;if(ua<0||ua>wa){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.contains_from / Bytes.contains_from"];}else try{ha(ta,wa,ua,va);return 1;}catch(xa){if(xa===c('bs_caml_builtin_exceptions').not_found){return 0;}else throw xa;}}function oa(ta,ua){return na(ta,0,ua);}function pa(ta,ua,va){if(ua<0||ua>=ta.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.rcontains_from / Bytes.rcontains_from"];}else try{ka(ta,ua,va);return 1;}catch(wa){if(wa===c('bs_caml_builtin_exceptions').not_found){return 0;}else throw wa;}}var qa=c('bs_caml_obj').caml_compare,ra=c('bs_caml_string').bytes_to_string,sa=c('bs_caml_string').bytes_of_string;g.make=h;g.init=i;g.empty=j;g.copy=k;g.of_string=m;g.to_string=l;g.sub=n;g.sub_string=o;g.extend=p;g.fill=q;g.blit=r;g.blit_string=s;g.concat=v;g.cat=w;g.iter=t;g.iteri=u;g.map=aa;g.mapi=ba;g.trim=y;g.escaped=z;g.index=ia;g.rindex=la;g.index_from=ja;g.rindex_from=ma;g.contains=oa;g.contains_from=na;g.rcontains_from=pa;g.uppercase=ca;g.lowercase=da;g.capitalize=fa;g.uncapitalize=ga;g.compare=qa;g.unsafe_to_string=ra;g.unsafe_of_string=sa;}),null);
__d('bs_string',['bs_bytes','bs_caml_int32','bs_caml_string','bs_list'],(function a(b,c,d,e,f,g){'use strict';function h(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').make(ha,ia));}function i(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').init(ha,ia));}function j(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').copy(c('bs_caml_string').bytes_of_string(ha)));}function k(ha,ia,ja){return c('bs_caml_string').bytes_to_string(c('bs_bytes').sub(c('bs_caml_string').bytes_of_string(ha),ia,ja));}function l(ha,ia){if(ia){var ja=ia[0],ka=[0],la=[0];c('bs_list').iter(function(oa){ka[0]=ka[0]+1|0;la[0]=la[0]+oa.length|0;return 0;},ia);var ma=c('bs_caml_string').caml_create_string(la[0]+c('bs_caml_int32').imul(ha.length,ka[0]-1|0)|0);c('bs_caml_string').caml_blit_string(ja,0,ma,0,ja.length);var na=[ja.length];c('bs_list').iter(function(oa){c('bs_caml_string').caml_blit_string(ha,0,ma,na[0],ha.length);na[0]=na[0]+ha.length|0;c('bs_caml_string').caml_blit_string(oa,0,ma,na[0],oa.length);na[0]=na[0]+oa.length|0;return 0;},ia[1]);return c('bs_caml_string').bytes_to_string(ma);}else return "";}function m(ha,ia){return c('bs_bytes').iter(ha,c('bs_caml_string').bytes_of_string(ia));}function n(ha,ia){return c('bs_bytes').iteri(ha,c('bs_caml_string').bytes_of_string(ia));}function o(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').map(ha,c('bs_caml_string').bytes_of_string(ia)));}function p(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').mapi(ha,c('bs_caml_string').bytes_of_string(ia)));}function q(ha){var ia=ha-9|0;if(ia>4||ia<0){if(ia!==23){return 0;}else return 1;}else if(ia!==2){return 1;}else return 0;}function r(ha){if(ha===""||!(q(ha.charCodeAt(0))||q(ha.charCodeAt(ha.length-1|0)))){return ha;}else return c('bs_caml_string').bytes_to_string(c('bs_bytes').trim(c('bs_caml_string').bytes_of_string(ha)));}function s(ha){var ia=function ja(ka){while(true){var la=ka;if(la>=ha.length){return 0;}else{var ma=ha.charCodeAt(la);if(ma>=32){var na=ma-34|0;if(na>58||na<0){if(na>=93){return 1;}else{ka=la+1|0;continue;}}else if(na>57||na<1){return 1;}else{ka=la+1|0;continue;}}else return 1;}}};if(ia(0)){return c('bs_caml_string').bytes_to_string(c('bs_bytes').escaped(c('bs_caml_string').bytes_of_string(ha)));}else return ha;}function t(ha,ia){return c('bs_bytes').index(c('bs_caml_string').bytes_of_string(ha),ia);}function u(ha,ia){return c('bs_bytes').rindex(c('bs_caml_string').bytes_of_string(ha),ia);}function v(ha,ia,ja){return c('bs_bytes').index_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function w(ha,ia,ja){return c('bs_bytes').rindex_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function x(ha,ia){return c('bs_bytes').contains(c('bs_caml_string').bytes_of_string(ha),ia);}function y(ha,ia,ja){return c('bs_bytes').contains_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function z(ha,ia,ja){return c('bs_bytes').rcontains_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function aa(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').uppercase(c('bs_caml_string').bytes_of_string(ha)));}function ba(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').lowercase(c('bs_caml_string').bytes_of_string(ha)));}function ca(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').capitalize(c('bs_caml_string').bytes_of_string(ha)));}function da(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').uncapitalize(c('bs_caml_string').bytes_of_string(ha)));}var ea=c('bs_caml_string').caml_string_compare,fa=c('bs_bytes').fill,ga=c('bs_bytes').blit_string;g.make=h;g.init=i;g.copy=j;g.sub=k;g.fill=fa;g.blit=ga;g.concat=l;g.iter=m;g.iteri=n;g.map=o;g.mapi=p;g.trim=r;g.escaped=s;g.index=t;g.rindex=u;g.index_from=v;g.rindex_from=w;g.contains=x;g.contains_from=y;g.rcontains_from=z;g.uppercase=aa;g.lowercase=ba;g.capitalize=ca;g.uncapitalize=da;g.compare=ea;}),null);
__d('gridReact',['Grid.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';var h=c('Grid.react').GridItem;function i(m,n,o,p,q,r){var s={className:c('utilsRe').optionToJsNullUndefined(m),cols:n,fixed:c('utilsRe').optionBoolToNullUndefinedBoolean(o),alignv:c('utilsRe').optionToJsNullUndefined(p),alignh:c('utilsRe').optionToJsNullUndefined(q),spacing:c('utilsRe').optionToJsNullUndefined(r)},t=c('Grid.react');return function(u,v,w,x){return c('reactRe').wrapPropsShamelessly(t,s,u,v,w,x);};}var j=[i];function k(m,n,o){var p={className:c('utilsRe').optionToJsNullUndefined(m),alignv:c('utilsRe').optionToJsNullUndefined(n),alignh:c('utilsRe').optionToJsNullUndefined(o)};return function(q,r,s,t){return c('reactRe').wrapPropsShamelessly(h,p,q,r,s,t);};}var l=[k];g.item=h;g.Grid=j;g.Item=l;}),null);
__d('MessengerCustomThreadColorButton.react',['cx','Keys','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerCustomThreadColorButton1=function(event){event.preventDefault();this.props.onChoose(this.props.colorChoice);}.bind(this),this.$MessengerCustomThreadColorButton2=function(event){if(event.keyCode===c('Keys').RETURN){event.preventDefault();this.props.onChoose(this.props.colorChoice);}}.bind(this),n;}l.prototype.render=function(){return c('React').createElement('div',{'aria-label':this.props.colorName,'aria-pressed':this.props.isSelected,className:"_5dr3",onClick:this.$MessengerCustomThreadColorButton1,onKeyDown:this.$MessengerCustomThreadColorButton2,role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_5dr4",style:{backgroundColor:this.props.colorChoice}}));};l.propTypes={colorChoice:k.string.isRequired,colorName:k.string.isRequired,isSelected:k.bool.isRequired,onChoose:k.func.isRequired};f.exports=l;}),null);
__d('messengerCustomThreadColorButtonReact',['bs_js_boolean','MessengerCustomThreadColorButton.react','reactRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m={colorChoice:i,colorName:j,isSelected:c('bs_js_boolean').to_js_boolean(k),onChoose:l},n=c('MessengerCustomThreadColorButton.react');return function(o,p,q,r){return c('reactRe').wrapPropsShamelessly(n,m,o,p,q,r);};}g.createElement=h;}),null);
__d('messengerDialogReact',['MessengerDialog.react','messengerDialogBodyReact','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(s,t,u,v,w,x){var y={className:c('utilsRe').optionToJsNullUndefined(s),onToggle:t,repositionOnUpdate:c('utilsRe').optionBoolToNullUndefinedBoolean(u),shown:c('utilsRe').optionBoolToNullUndefinedBoolean(v),type:c('utilsRe').optionToJsNullUndefined(w),width:c('utilsRe').optionToJsNullUndefined(x)},z=c('MessengerDialog.react');return function(aa,ba,ca,da){return c('reactRe').wrapPropsShamelessly(z,y,aa,ba,ca,da);};}var i=[h];function j(s,t){var u={className:c('utilsRe').optionToJsNullUndefined(s),id:c('utilsRe').optionToJsNullUndefined(t)},v=c('MessengerDialogHeader.react');return function(w,x,y,z){return c('reactRe').wrapPropsShamelessly(v,u,w,x,y,z);};}var k=[j];function l(s,t){var u={className:c('utilsRe').optionToJsNullUndefined(s),leftContent:c('utilsRe').optionToJsNullUndefined(t)},v=c('MessengerDialogFooter.react');return function(w,x,y,z){return c('reactRe').wrapPropsShamelessly(v,u,w,x,y,z);};}var m=[l],n={},o=c('MessengerDialogCancelButton.react');function p(s,t,u,v){return c('reactRe').wrapPropsShamelessly(o,n,s,t,u,v);}var q=[p],r=0;g.Dialog=i;g.Header=k;g.Footer=m;g.CancelButton=q;g.Body=r;}),null);
__d('messengerChangeColorDialogReact',['ix','cssVar','cx','fbt','bs_array','bs_curry','gridReact','imageReact','bs_js_primitive','MessagingThreadCustomizationConfig','MessengerActions','messengerCustomThreadColorButtonReact','messengerDialogBodyReact','messengerDialogReact','React','reactRe','bs_string','fbglyph'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l=c('reactRe').Component[8],m=l[0],n=l[1],o=l[2],p=l[3],q=l[4],r=l[5],s="MessengerChangeColorDialogReact",t="Unknown Color";function u(da,ea){if(!da){var fa=ea[1][2];if(fa)c('bs_curry')._1(fa[0],0);c('MessengerActions').hideDialog();}return 0;}function v(da,ea){var fa=ea[1],ga=+(da===fa[0]),ha=fa[1];if(!ga)if(ha)c('bs_curry')._1(ha[0],da);return u(false,ea);}function w(da){var ea=da[2],fa=da[1],ga=c('bs_curry')._1(c('bs_array').concat,[["#0084ff"],[c('MessagingThreadCustomizationConfig').colorChoices,0]]),ha=c('bs_array').map(function(ia){var ja=c('MessagingThreadCustomizationConfig').colorNames[ia],ka=ja!==undefined?ja:t,la=+(c('bs_string').lowercase(ia)===c('bs_string').lowercase(fa[0]));return c('bs_curry')._7(c('gridReact').Item[0],["_gs0"],0,0,[c('React').createElement("div",undefined,la!==0?c('imageReact').createElement(["_gs2"],0,[h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/checkmark_20_white.png")],0,0)(0,0,0,0):null,c('messengerCustomThreadColorButtonReact').createElement(ia,ka,+(ia===fa[0]),c('bs_curry')._1(ea,v))(0,0,0,0)),0],0,[ia],0);},ga);return c('bs_curry').app(c('messengerDialogReact').Dialog[0],[["_gs3"],c('bs_curry')._1(ea,u),0,0,0,[335],[c('bs_curry')._6(c('messengerDialogReact').Header[0],0,0,[k._("Elegir un color para esta conversaci\u00f3n"),0],0,0,0),[c('bs_curry')._3(c('messengerDialogBodyReact').createElement(0,[c('React').createElement("div",{className:"_28he"},k._("Lo ver\u00e1n todas las personas que participan en esta conversaci\u00f3n.")),[c('bs_curry').app(c('gridReact').Grid[0],[["_gs4"],5,0,0,0,0,[ha,0],0,0,0]),0]]),0,0,0),[c('bs_curry')._6(c('messengerDialogReact').Footer[0],0,0,[c('bs_curry')._4(c('messengerDialogReact').CancelButton[0],0,0,0,0),0],0,0,0),0]]],0,0,0]);}var x=[function(da){return [da.currentColor,c('bs_js_primitive').js_from_nullable_def(da.onSave),c('bs_js_primitive').js_from_nullable_def(da.onClose)];}],y=[m,n,o,p,q,r,s,t,u,v,w,x],z=c('reactRe').CreateComponent([s,q,r,m,o,n,p,x,w]),aa=z[1];function ba(da,ea,fa){return c('bs_curry')._1(aa,[da,ea,fa]);}var ca=z[0];g.MessengerChangeColorDialog=y;g.comp=ca;g.wrapProps=aa;g.createElement=ba;}),null);
__d('messengerChangeColorIconSVGReact',['bs_curry','React','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h=c('reactRe').Component[8],i=h[0],j=h[1],k=h[2],l=h[3],m=h[4],n=h[5],o="MessengerChangeColorIconSVGReact";function p(w){var x=w[1];return c('React').createElement("div",{className:x[0]},c('React').createElement("svg",{viewBox:"-1 -1 47 47"},c('React').createElement("title",undefined,"colors@2x"),c('React').createElement("path",{d:"M912,1569a3,3,0,1,1-3,3A3,3,0,0,1,912,1569Z",fill:x[1],transform:"translate(-895.5 -1561.5)"}),c('React').createElement("path",{d:"M924,1569a3,3,0,1,1-3,3A3,3,0,0,1,924,1569Z",fill:x[1],transform:"translate(-895.5 -1561.5)"}),c('React').createElement("path",{d:"M931,1579a3,3,0,1,1-3,3A3,3,0,0,1,931,1579Z",fill:x[1],transform:"translate(-895.5 -1561.5)"}),c('React').createElement("path",{d:"M905,1579a3,3,0,1,1-3,3A3,3,0,0,1,905,1579Z",fill:x[1],transform:"translate(-895.5 -1561.5)"}),c('React').createElement("path",{d:"M918,1562a22,22,0,0,0,0,44,3.67,3.67,0,0,0,2.71-6.14,3.65,3.65,0,0,1,2.74-6.09h4.33A12.23,12.23,0,0,0,940,1581.56C940,1570.75,930.15,1562,918,1562Z",fill:"transparent",stroke:x[1],strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4%",transform:"translate(-895.5 -1561.5)"})));}var q=[function(w){return [w.className,w.customColor];}],r=[i,j,k,l,m,n,o,p,q],s=c('reactRe').CreateComponent([o,m,n,i,k,j,l,q,p]),t=s[1];function u(w,x){return c('bs_curry')._1(t,[w,x]);}var v=s[0];g.MessengerChangeColorIconSVG=r;g.comp=v;g.wrapProps=t;g.createElement=u;}),null);
__d('messengerInfoPanelCustomColorReact',['cx','fbt','bs_curry','keysRe','MessengerActions','messengerChangeColorDialogReact','messengerChangeColorIconSVGReact','messengerCustomColorUtilsRe','React','reactRe','utilsRe'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reactRe').Component[9][6],k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p="MessengerInfoPanelCustomColorReact";function q(){return [0];}function r(da,ea){var fa=ea[4][0];if(fa)fa[0].focus();return 0;}function s(da){var ea=da[1];c('MessengerActions').showDialog(c('messengerChangeColorDialogReact').comp,{currentColor:c('messengerCustomColorUtilsRe').customColorOrBlue(ea[0]),onSave:ea[2],onClose:c('bs_curry')._1(da[2],r)});return 0;}function t(da,ea){da.preventDefault();s(ea);return 0;}function u(da,ea){if(da.keyCode===c('keysRe').$$return){da.preventDefault();s(ea);}return 0;}function v(da,ea){ea[4][0]=[da];return 0;}function w(da){var ea=da[2],fa=da[1];if(c('utilsRe').isTruthy(fa[0].customization_enabled)){var ga=c('messengerCustomColorUtilsRe').customColorOrBlue(fa[0]);return c('React').createElement("div",{ref:c('bs_curry')._1(da[3],v),className:"_3szn _3szo",tabIndex:"0",onClick:c('bs_curry')._1(ea,t),onKeyDown:c('bs_curry')._1(ea,u)},c('React').createElement("div",{className:"_3szp"},c('bs_curry')._4(c('messengerChangeColorIconSVGReact').createElement("_17vc",ga),0,0,0,0)),c('React').createElement("div",{className:"_3szq"},i._("Cambiar color")));}else return null;}var x=[function(da){return [da.thread,da.viewer,da.onChange];}],y=[k,l,m,n,o,p,q,r,s,t,u,v,w,x],z=c('reactRe').CreateComponent([p,q,o,k,m,l,n,x,w]),aa=z[1];function ba(da,ea,fa){return c('bs_curry')._1(aa,[da,ea,fa]);}var ca=z[0];g.MessengerInfoPanelCustomColorReact=y;g.comp=ca;g.wrapProps=aa;g.createElement=ba;}),null);
__d('MessengerInfoPanelEmoji.react',['cx','fbt','Bootloader','EmojiLikeConstants','EmojiLikeCxData','Image.react','ImmutableObject','Keys','MessengerActions','MessengerHotLikeOutlineSVG.react','React','MercuryShareAttachmentRenderLocations'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelEmoji2=function(event){event.preventDefault();this.$MessengerInfoPanelEmoji5();}.bind(this),this.$MessengerInfoPanelEmoji3=function(event){if(event.keyCode===c('Keys').RETURN){event.preventDefault();this.$MessengerInfoPanelEmoji5();}}.bind(this),this.$MessengerInfoPanelEmoji6=function(){if(this.$MessengerInfoPanelEmoji1)this.$MessengerInfoPanelEmoji1.focus();}.bind(this),this.$MessengerInfoPanelEmoji4=function(s){this.$MessengerInfoPanelEmoji1=s;}.bind(this),o;}m.prototype.render=function(){if(!this.props.thread.customization_enabled)return null;var n=this.props.thread.custom_like_icon&&this.props.thread.custom_like_icon.emoji?c('EmojiLikeCxData').getNewEmojiData(this.props.thread.custom_like_icon.emoji,c('EmojiLikeConstants').size.SMALL):null,o=n&&n.url?c('React').createElement(c('Image.react'),{src:n.url,className:"_12cp"}):c('React').createElement(c('MessengerHotLikeOutlineSVG.react'),{className:"_12cq",color:this.props.thread.custom_color?this.props.thread.custom_color:'',height:'60%',location:c('MercuryShareAttachmentRenderLocations').MESSENGER});return c('React').createElement('div',{className:"_3szn _3szo",onClick:this.$MessengerInfoPanelEmoji2,onKeyDown:this.$MessengerInfoPanelEmoji3,ref:this.$MessengerInfoPanelEmoji4,role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_3szp"},o),c('React').createElement('div',{className:"_3szq"},i._("Cambiar emoticono")));};m.prototype.$MessengerInfoPanelEmoji5=function(){c('Bootloader').loadModules(["MessengerChangeEmojiDialog.react"],function(n){c('MessengerActions').showDialog(n,{currentEmoji:this.props.thread.custom_like_icon?this.props.thread.custom_like_icon.emoji:String.fromCodePoint.apply(String,c('EmojiLikeConstants').FB_THUMBS_UP_EMOJI),onSave:this.props.onChange,onClose:this.$MessengerInfoPanelEmoji6});}.bind(this),'MessengerInfoPanelEmoji.react');};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired,onChange:l.func.isRequired};f.exports=m;}),null);
__d('messengerInfoPanelEmojiReact',['MessengerInfoPanelEmoji.react','reactRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l={thread:i,viewer:j,onChange:k},m=c('MessengerInfoPanelEmoji.react');return function(n,o,p,q){return c('reactRe').wrapPropsShamelessly(m,l,n,o,p,q);};}g.createElement=h;}),null);
__d('MessengerInfoPanelManageMessages.react',['cx','fbt','Bootloader','ImmutableObject','MercuryConfig','MercuryIDs','MercuryParticipants','MNCommerceDialogStateActions','MNCommercePromotionBlockDataManager','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelManageMessages3=function(s,t){return c('MNCommercePromotionBlockDataManager').block(s,t);},this.$MessengerInfoPanelManageMessages2=function(event){event.preventDefault();c('Bootloader').loadModules(["MNCommercePromotionManageBlockDialogContainer.react"],function(s){c('MNCommerceDialogStateActions').showDialog(s,{pageID:this.props.thread.other_user_fbid,onConfirmButtonClick:this.$MessengerInfoPanelManageMessages3});}.bind(this),'MessengerInfoPanelManageMessages.react');}.bind(this),o;}m.prototype.render=function(){if(!this.$MessengerInfoPanelManageMessages1()||!c('MercuryConfig').WWWMessengerManageButtonGK)return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szp"}),c('React').createElement('span',{className:"_3szq",onClick:this.$MessengerInfoPanelManageMessages2},i._("Administrar mensajes")));};m.prototype.$MessengerInfoPanelManageMessages1=function(){var n=c('MercuryIDs').getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!n)return false;var o=c('MercuryParticipants').getNow(n);return !!(o&&o.is_business_enabled);};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('messengerInfoPanelManageMessagesReact',['MessengerInfoPanelManageMessages.react','reactRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k={thread:i,viewer:j},l=c('MessengerInfoPanelManageMessages.react');return function(m,n,o,p){return c('reactRe').wrapPropsShamelessly(l,k,m,n,o,p);};}g.createElement=h;}),null);
__d('MessengerInfoPanelManageReview.react',['cx','fbt','Bootloader','ImmutableObject','MercuryConfig','MercuryIDs','MercuryParticipants','MNCommerceDialogStateActions','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelManageReview2=function(event){event.preventDefault();c('Bootloader').loadModules(["MNCommerceReviewDialogContainer.react"],function(s){c('MNCommerceDialogStateActions').showDialog(s,{pageID:this.props.thread.other_user_fbid,onConfirmButtonClick:this.$MessengerInfoPanelManageReview3});}.bind(this),'MessengerInfoPanelManageReview.react');}.bind(this),o;}m.prototype.render=function(){if(!this.$MessengerInfoPanelManageReview1()||!c('MercuryConfig').MessengerPlatformBotReviewUsers)return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szp"}),c('React').createElement('span',{className:"_3szq",onClick:this.$MessengerInfoPanelManageReview2},i._("Enviar un comentario")));};m.prototype.$MessengerInfoPanelManageReview1=function(){var n=c('MercuryIDs').getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!n)return false;var o=c('MercuryParticipants').getNow(n);return !!(o&&o.accepts_messenger_user_feedback);};m.prototype.$MessengerInfoPanelManageReview3=function(n,o,p){if(o===0)return;c('Bootloader').loadModules(["MessengerPlatformBotReviewWriteDataManager"],function(q){q.review(n,o,p.trim());},'MessengerInfoPanelManageReview.react');};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('messengerInfoPanelManageReviewReact',['MessengerInfoPanelManageReview.react','reactRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k={thread:i,viewer:j},l=c('MessengerInfoPanelManageReview.react');return function(m,n,o,p){return c('reactRe').wrapPropsShamelessly(l,k,m,n,o,p);};}g.createElement=h;}),null);
__d('MessengerCheckboxInput.react',['cx','AbstractCheckboxInput.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){'use strict';return (c('React').createElement(c('AbstractCheckboxInput.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_55sg _4ng2")})));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerCompositeMuteSettingsDialog.react',['cx','fbt','ImmutableObject','MessengerActions','MessengerCheckboxInput.react','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogHeader.react','MessengerDialogTitle.react','messengerDomIDsRe','MessengerMuteDialog.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerDialogBodyReact').comp,m=c('messengerDomIDsRe').ids,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(p){k.constructor.call(this,p);this.$MessengerCompositeMuteSettingsDialog2=function(){if(this.state.isMuted){this.props.onMute(0);this.setState({isMuted:false});}else{c('MessengerActions').hideDialog();c('MessengerActions').showDialog(c('MessengerMuteDialog.react'),{isMuted:this.state.isMuted,mutedUntil:undefined,onMute:this.props.onMute,onToggle:this.$MessengerCompositeMuteSettingsDialog4});}}.bind(this);this.$MessengerCompositeMuteSettingsDialog3=function(){this.setState({mentionsMuted:!this.state.mentionsMuted},function(){this.props.onMentionsMute&&this.props.onMentionsMute(!!this.state.mentionsMuted);}.bind(this));}.bind(this);this.$MessengerCompositeMuteSettingsDialog1=function(){c('MessengerActions').hideDialog();this.props.onToggle&&this.props.onToggle(false);}.bind(this);this.$MessengerCompositeMuteSettingsDialog4=function(q,r){if(!q){c('MessengerActions').hideDialog();if(r)c('MessengerActions').showDialog(o,{isMuted:!!r,mentionsMuted:this.state.mentionsMuted,mutedUntil:this.props.mutedUntil,thread:this.props.thread,onMentionsMute:this.props.onMentionsMute,onMute:this.props.onMute,onToggle:this.$MessengerCompositeMuteSettingsDialog4});}}.bind(this);this.state={isMuted:p.isMuted,mentionsMuted:p.mentionsMuted};}o.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{type:'default',width:544,onToggle:this.props.onToggle,titleID:m.MUTE_DIALOG_TITLE},c('React').createElement(c('MessengerDialogHeader.react'),{id:m.MUTE_DIALOG_TITLE},c('React').createElement(c('MessengerDialogTitle.react'),null,i._("Notificaciones de conversaciones")),c('React').createElement(c('MessengerDialogButton.react'),{label:i._("Listo"),onClick:this.$MessengerCompositeMuteSettingsDialog1,type:'primary'})),c('React').createElement(l,null,c('React').createElement('div',{className:"_374b"},c('React').createElement('div',{className:"_374c"},i._("Notificaciones de mensajes")),c('React').createElement('div',{className:"_374d"},c('React').createElement(c('MessengerCheckboxInput.react'),{checked:!this.state.isMuted,onChange:this.$MessengerCompositeMuteSettingsDialog2}),c('React').createElement('span',{className:"_1pr_"},this.state.isMuted?i._("Desactivado"):i._("Activado")))),c('React').createElement('div',{className:"_374b"},c('React').createElement('div',{className:"_374c"},i._("Menciones")),c('React').createElement('div',{className:"_374d"},c('React').createElement(c('MessengerCheckboxInput.react'),{checked:!this.state.mentionsMuted,onChange:this.$MessengerCompositeMuteSettingsDialog3}),c('React').createElement('span',{className:"_1pr_"},this.state.mentionsMuted?i._("Desactivado"):i._("Activado"))))));};o.propTypes={isMuted:n.bool.isRequired,mentionsMuted:n.bool.isRequired,mutedUntil:n.number,thread:n.instanceOf(c('ImmutableObject')).isRequired,onMentionsMute:n.func,onMute:n.func.isRequired,onToggle:n.func.isRequired};f.exports=o;}),null);
__d('MessengerNotificationsIconSVG.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},c('React').createElement('svg',{viewBox:'0 0 18 18',width:'18',height:'18'},c('React').createElement('defs',null,c('React').createElement('circle',{id:'path-1',cx:'1',cy:'1',r:'1'})),c('React').createElement('g',{fill:'none',fillRule:'evenodd'},c('React').createElement('rect',{id:'Bounds',x:'0',y:'0',width:'18',height:'18'}),c('React').createElement('path',{d:'M9,16.5 C9.828,16.5 10.5,15.828 10.5,15 L7.5,15 C7.5,15.828 8.172,16.5 9,16.5',fill:this.props.customColor}),c('React').createElement('path',{d:'M13,10 L13,7.5 C13,5.562 11.622,3.948 9.793,3.58 C9.914,3.414 10,3.221 10,3 C10,2.448 9.552,2 9,2 C8.448,2 8,2.448 8,3 C8,3.221 8.086,3.414 8.207,3.58 C6.378,3.948 5,5.562 5,7.5 L5,10 C5,11.105 4,12 4,12 L3.70537567,12.2946243 C3.31580745,12.6841926 3.31640625,13.3164062 3.70537567,13.7053757 L4,14 L14,14 L14.2946243,13.7053757 C14.6841926,13.3158074 14.6835937,12.6835938 14.2946243,12.2946243 L14,12 C14,12 13,11.105 13,10 Z',stroke:this.props.customColor})))));};function k(){h.apply(this,arguments);}k.propTypes={className:j.string,customColor:j.string.isRequired};f.exports=k;}),null);
__d('MessengerInfoPanelCompositeMuteSettings.react',['cssVar','cx','fbt','ImmutableObject','Keys','LeftRight.react','MercuryConfig','MessengerActions','MessengerCompositeMuteSettingsDialog.react','MessengerMuteDialog.react','MessengerNotificationsIconSVG.react','React','ReactDOM','formatDate'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$MessengerInfoPanelCompositeMuteSettings1=function(t){t.preventDefault();t.stopPropagation();this.$MessengerInfoPanelCompositeMuteSettings4();}.bind(this),this.$MessengerInfoPanelCompositeMuteSettings2=function(t){if(t.keyCode===c('Keys').RETURN){t.preventDefault();t.stopPropagation();this.$MessengerInfoPanelCompositeMuteSettings4();}}.bind(this),this.$MessengerInfoPanelCompositeMuteSettings5=function(t){if(!t){c('MessengerActions').hideDialog();c('ReactDOM').findDOMNode(this.refs.dialogContext).focus();}}.bind(this),p;}n.prototype.render=function(){var o=j._("Notificaciones"),p=this.props.thread.custom_color||"#0084ff";return c('React').createElement('div',{className:"_3szn _3szo",onClick:this.$MessengerInfoPanelCompositeMuteSettings1,onKeyDown:this.$MessengerInfoPanelCompositeMuteSettings2,ref:'dialogContext',role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_3szp"},c('React').createElement(c('MessengerNotificationsIconSVG.react'),{className:"_3wh2",customColor:p})),c('React').createElement(c('LeftRight.react'),{className:"_3szq"},o,this.$MessengerInfoPanelCompositeMuteSettings3()));};n.prototype.$MessengerInfoPanelCompositeMuteSettings4=function(){var o=this.props.thread,p=o&&o.is_canonical,q=!p&&c('MercuryConfig').Mentions,r=q?c('MessengerCompositeMuteSettingsDialog.react'):c('MessengerMuteDialog.react');if(this.props.isMuted&&!q){this.props.onMuteChange(0);return;}var s={isMuted:this.props.isMuted,mentionsMuted:this.props.mentionsMuted,mutedUntil:this.props.mutedUntil,thread:o,onMentionsMute:this.props.onMentionsMuteChange,onMute:this.props.onMuteChange,onToggle:this.$MessengerInfoPanelCompositeMuteSettings5};c('MessengerActions').showDialog(r,s);};n.prototype.$MessengerInfoPanelCompositeMuteSettings3=function(){var o=this.props.mutedUntil,p=void 0;if(!o)return null;if(o>0){if(o<86401)return null;var q=new Date(o*1000).getDay()===new Date().getDay();if(!q){p=j._("Desactivadas hasta ma\u00f1ana a las {time}",[j.param('time',c('formatDate')(o,'g:ia'))]);}else p=j._("Desactivadas hasta la(s) {time}",[j.param('time',c('formatDate')(o,'g:ia'))]);}else if(o===-1)p=j._("Desactivadas indefinidamente");return p?c('React').createElement('span',{className:"_3x6v"},p):null;};n.propTypes={isMuted:m.bool.isRequired,mentionsMuted:m.bool.isRequired,mutedUntil:m.number,onMentionsMuteChange:m.func,onMuteChange:m.func.isRequired,thread:m.instanceOf(c('ImmutableObject')).isRequired};f.exports=n;}),null);
__d('messengerInfoPanelCompositeMuteSettingsReact',['bs_js_boolean','MessengerInfoPanelCompositeMuteSettings.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){var o={isMuted:c('bs_js_boolean').to_js_boolean(i),mentionsMuted:c('bs_js_boolean').to_js_boolean(j),mutedUntil:c('utilsRe').optionToJsNullUndefined(k),onMentionsMuteChange:c('utilsRe').optionToJsNullUndefined(l),onMuteChange:m,thread:n},p=c('MessengerInfoPanelCompositeMuteSettings.react');return function(q,r,s,t){return c('reactRe').wrapPropsShamelessly(p,o,q,r,s,t);};}g.createElement=h;}),null);
__d('MessengerInfoPanelMuteSettings.react',['cx','fbt','BootloadedComponent.react','ImmutableObject','JSResource','LeftRight.react','MessengerActions','MessengerCheckboxInput.react','MessengerConfig','MessengerMuteDialog.react','React','ReactDOM','formatDate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelMuteSettings1=function(s){s.preventDefault();s.stopPropagation();if(this.props.isMuted){this.props.onMuteChange(0);}else c('MessengerActions').showDialog(c('MessengerMuteDialog.react'),{onMute:this.props.onMuteChange,onToggle:this.$MessengerInfoPanelMuteSettings3});}.bind(this),this.$MessengerInfoPanelMuteSettings2=function(){var s=this.props.mutedUntil,t=void 0;if(!s)return null;if(s>0){if(s<86401)return null;var u=new Date(s*1000).getDay()===new Date().getDay();if(!u){t=i._("Desactivadas hasta ma\u00f1ana a las {time}",[i.param('time',c('formatDate')(s,'g:ia'))]);}else t=i._("Desactivadas hasta la(s) {time}",[i.param('time',c('formatDate')(s,'g:ia'))]);}else if(s===-1)t=i._("Desactivadas indefinidamente");return t?c('React').createElement('span',{className:"_3x6v"},t):null;}.bind(this),this.$MessengerInfoPanelMuteSettings3=function(s){if(!s){c('MessengerActions').hideDialog();c('ReactDOM').findDOMNode(this.refs.muteCheckbox).focus();}}.bind(this),o;}m.prototype.render=function(){var n=i._("Silenciar notificaciones"),o=i._("Desbloquear notificaciones"),p=this.props.isMuted?o:n;return c('React').createElement('div',{className:"_3szn",ref:'dialogContext'},c('React').createElement('div',{className:"_3szo"},c('React').createElement('div',{className:"_3szp"},c('React').createElement(c('MessengerCheckboxInput.react'),{checked:this.props.isMuted,onChange:this.$MessengerInfoPanelMuteSettings1,ref:'muteCheckbox',tooltip:p})),c('React').createElement(c('LeftRight.react'),{className:"_3szq"},c('React').createElement('span',{onClick:this.$MessengerInfoPanelMuteSettings1},n),this.$MessengerInfoPanelMuteSettings2())));};m.propTypes={isMuted:l.bool.isRequired,mutedUntil:l.number,onMuteChange:l.func.isRequired,thread:l.instanceOf(c('ImmutableObject')).isRequired};f.exports=m;}),null);
__d('messengerInfoPanelMuteSettingsReact',['bs_js_boolean','MessengerInfoPanelMuteSettings.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m={isMuted:c('bs_js_boolean').to_js_boolean(i),mutedUntil:c('utilsRe').optionToJsNullUndefined(j),onMuteChange:k,thread:l},n=c('MessengerInfoPanelMuteSettings.react');return function(o,p,q,r){return c('reactRe').wrapPropsShamelessly(n,m,o,p,q,r);};}g.createElement=h;}),null);
__d('messengerInfoPanelMuteSettingsContainerReact',['bs_curry','bs_js_primitive','MercuryConfig','MercuryThreadInfo','messengerInfoPanelCompositeMuteSettingsReact','messengerInfoPanelMuteSettingsReact','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h=c('reactRe').Component[0],i=c('reactRe').Component[1],j=c('reactRe').Component[2],k=c('reactRe').Component[3],l=c('reactRe').Component[4],m=c('reactRe').Component[5],n=c('reactRe').Component[6],o="MessengerInfoPanelMuteSettingsContainerReact";function p(y){var z=y[1],aa=z[0],ba=+c('MercuryThreadInfo').isMuted(aa),ca=c('MercuryThreadInfo').getMuteSetting(aa),da=c('bs_js_primitive').js_from_nullable_def(ca);if(c('MercuryConfig').Mentions){return c('messengerInfoPanelCompositeMuteSettingsReact').createElement(ba,+c('MercuryThreadInfo').areMentionsMuted(aa),da,[z[2]],z[1],aa)(0,0,0,0);}else return c('messengerInfoPanelMuteSettingsReact').createElement(ba,da,z[1],aa)(0,0,0,0);}var q=c('reactRe').Component[7],r=c('reactRe').Component[8],s=c('reactRe').Component[9],t=[h,i,j,k,l,m,n,q,r,s,o,p],u=c('reactRe').CreateComponent([o,l,n,h,j,i,k,m,p]),v=u[1];function w(y,z,aa){return c('bs_curry')._1(v,[y,z,aa]);}var x=u[0];g.MessengerInfoPanelMuteSettingsContainer=t;g.comp=x;g.wrapProps=v;g.createElement=w;}),null);
__d('MessengerEditNicknamesDialog.react',['cx','fbt','BootloadedComponent.react','immutable','ImmutableObject','JSResource','MercuryIDs','MessengerAdminGroupUtils','MessengerActions','MessengerContactList.react','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogCancelButton.react','MessengerDialogHeader.react','MessengerDialogTitle.react','MessengerScrollableArea.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerDialogBodyReact').comp,m=c('BootloadedComponent.react').create(c('JSResource')('MessengerEditNicknameDialog.react').__setRef('MessengerEditNicknamesDialog.react')),n=c('React').PropTypes,o=350;j=babelHelpers.inherits(p,c('React').PureComponent);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.$MessengerEditNicknamesDialog2=function(v){var w=c('MercuryIDs').getUserIDFromParticipantID(v.id),x=v.name,y='';if(this.props.thread.custom_nickname&&this.props.thread.custom_nickname[w]){x=this.props.thread.custom_nickname[w];y=v.name;}return new (c('ImmutableObject'))({alias:v.alias,uid:v.id,photo:v.image_src,title:x,subtitle:y,type:v.type,isMessengerUser:v.is_messenger_user,href:v.href});}.bind(this),this.$MessengerEditNicknamesDialog3=function(v){var w=c('MercuryIDs').getUserIDFromParticipantID(v.id);c('MessengerActions').showDialog(m,{bootloadPlaceholder:c('React').createElement('div',null),contact:v,currentNickname:this.props.thread.custom_nickname&&this.props.thread.custom_nickname[w],onToggle:this.$MessengerEditNicknamesDialog1,onSave:this.$MessengerEditNicknamesDialog4,viewer:this.props.viewer});}.bind(this),this.$MessengerEditNicknamesDialog4=function(v,w){this.props.onSave(v,w);}.bind(this),this.$MessengerEditNicknamesDialog1=function(v){if(!v){this.props.onClose&&this.props.onClose();c('MessengerActions').hideDialog();}}.bind(this),r;}p.prototype.render=function(){var q=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread),r=this.props.participants.filter(function(s){var t=c('MercuryIDs').getUserIDFromParticipantID(s.id);return !!s&&(q&&t===this.props.viewer||!q);}.bind(this)).toArray();return c('React').createElement(c('MessengerDialog.react'),{className:"_4h9n",shown:true,onToggle:this.$MessengerEditNicknamesDialog1,ref:'dialog',type:'default',width:o},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogTitle.react'),null,i._("Editar apodos"))),c('React').createElement(l,{className:"_4h9o"},c('React').createElement(c('MessengerScrollableArea.react'),{height:'100%',ref:'scrollable'},c('React').createElement(c('MessengerContactList.react'),{contactAdapter:this.$MessengerEditNicknamesDialog2,disableRole:true,listSections:c('immutable').OrderedMap([[null,r]]),onSelect:this.$MessengerEditNicknamesDialog3,rowClassName:"_44kr",viewer:this.props.viewer,thread:this.props.thread}))));};p.propTypes={participants:n.instanceOf(c('immutable').Map).isRequired,thread:n.instanceOf(c('ImmutableObject')).isRequired,viewer:n.string.isRequired,onSave:n.func.isRequired,onClose:n.func};f.exports=p;}),null);
__d('messengerEditNicknamesIconSVGReact',['bs_curry','React','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h=c('reactRe').Component[0],i=c('reactRe').Component[1],j=c('reactRe').Component[2],k=c('reactRe').Component[3],l=c('reactRe').Component[4],m=c('reactRe').Component[5],n=c('reactRe').Component[6],o="MessengerEditNicknamesIconSVGReact";function p(y){var z=y[1];return c('React').createElement("div",{className:z[0]},c('React').createElement("svg",{viewBox:"0 0 38 37.01"},c('React').createElement("title",undefined,"nicknames"),c('React').createElement("path",{d:"M899,1204h38v2H899v-2Z",fill:z[1],fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),c('React').createElement("path",{d:"M927.57,1172.17l-22.32,22.36-0.72,5,5-.72,22.32-22.36ZM908.8,1196.6l-1.41-1.41L929,1173.61l1.41,1.41Z",fill:z[1],fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),c('React').createElement("path",{d:"M932.93,1175.36l2.07-2.13a6,6,0,0,0-1.33-3,5.72,5.72,0,0,0-2.91-1.28l-2.07,2.13Z",fill:z[1],fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"})));}var q=c('reactRe').Component[7],r=c('reactRe').Component[8],s=c('reactRe').Component[9],t=[h,i,j,k,l,m,n,q,r,s,o,p],u=c('reactRe').CreateComponent([o,l,n,h,j,i,k,m,p]),v=u[1];function w(y,z){return c('bs_curry')._1(v,[y,z]);}var x=u[0];g.MessengerEditNicknamesIconSVG=t;g.comp=x;g.wrapProps=v;g.createElement=w;}),null);
__d('messengerInfoPanelNicknamesReact',['cx','fbt','bs_curry','keysRe','MessengerActions','messengerCustomColorUtilsRe','MessengerEditNicknamesDialog.react','messengerEditNicknamesIconSVGReact','React','reactRe','utilsRe'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reactRe').Component[9],k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q="MessengerInfoPanelNicknamesReact";function r(){return [0];}function s(fa,ga){c('bs_curry')._1(ga[1][3],[fa[0],fa[1]]);return 0;}function t(fa,ga){var ha=ga[4][0];if(ha)ha[0].focus();return 0;}function u(fa){var ga=fa[2],ha=fa[1],ia=function ja(ka,la){return c('bs_curry')._2(ga,s,[ka,la]);};c('MessengerActions').showDialog(c('MessengerEditNicknamesDialog.react'),{thread:ha[1],participants:ha[0],viewer:ha[2],onSave:ia,onClose:c('bs_curry')._1(ga,t)});return 0;}function v(fa,ga){fa.preventDefault();u(ga);return 0;}function w(fa,ga){if(fa.keyCode===c('keysRe').$$return){fa.preventDefault();u(ga);}return 0;}function x(fa,ga){ga[4][0]=[fa];return 0;}function y(fa){var ga=fa[2],ha=fa[1];if(c('utilsRe').isTruthy(ha[1].customization_enabled)){var ia=c('messengerCustomColorUtilsRe').customColorOrBlue(ha[1]);return c('React').createElement("div",{ref:c('bs_curry')._1(fa[3],x),className:"_3szn _3szo",role:"button",tabIndex:"0",onClick:c('bs_curry')._1(ga,v),onKeyDown:c('bs_curry')._1(ga,w)},c('React').createElement("div",{className:"_3szp"},c('bs_curry')._4(c('messengerEditNicknamesIconSVGReact').createElement("_5odt",ia),0,0,0,0)),c('React').createElement("div",{className:"_3szq"},i._("Editar apodos")));}else return null;}var z=j[6],aa=[k,l,m,n,o,p,z,q,r,s,t,u,v,w,x,y],ba=c('reactRe').CreateComponent([q,r,o,k,m,l,n,p,y]),ca=ba[1];function da(fa,ga,ha,ia){return c('bs_curry')._1(ca,[fa,ga,ha,ia]);}var ea=ba[0];g.MessengerInfoPanelNicknames=aa;g.comp=ea;g.wrapProps=ca;g.createElement=da;}),null);
__d('messengerThreadSearchIconSVGReact',['bs_curry','React','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h=c('reactRe').Component[8],i=h[0],j=h[1],k=h[2],l=h[3],m=h[4],n=h[5],o="MessengerThreadSearchIconSVGReact";function p(w){var x=w[1];return c('React').createElement("div",{className:x[0]},c('React').createElement("svg",{viewBox:"8 8 48 48"},c('React').createElement("title",undefined,"search conversation"),c('React').createElement("circle",{cx:"28",cy:"28",fill:"none",r:"14",stroke:x[1],strokeMiterlimit:"10",strokeWidth:"2"}),c('React').createElement("path",{clipRule:"evenodd",d:"M50,50L37.9,37.9",fill:"none",fillRule:"evenodd",stroke:x[1],strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})));}var q=[function(w){return [w.className,w.customColor];}],r=[i,j,k,l,m,n,o,p,q],s=c('reactRe').CreateComponent([o,m,n,i,k,j,l,q,p]),t=s[1];function u(w,x){return c('bs_curry')._1(t,[w,x]);}var v=s[0];g.MessengerThreadSearchIconSVG=r;g.comp=v;g.wrapProps=t;g.createElement=u;}),null);
__d('messengerInfoPanelSearchReact',['cx','fbt','bs_curry','bs_js_primitive','keysRe','MessengerActions','messengerCustomColorUtilsRe','MessengerStateStore','messengerThreadSearchIconSVGReact','React','reactRe'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reactRe').Component[8],k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q="MessengerInfoPanelSearchReact";function r(){var ba=c('MessengerStateStore').getState().query,ca=c('bs_js_primitive').js_is_nil_undef(ba);c('MessengerActions').changeQuery(ca!==0?"":undefined);return 0;}function s(ba,ca){ba.preventDefault();r(0);return 0;}function t(ba,ca){if(ba.keyCode===c('keysRe').$$return){ba.preventDefault();r(0);}return 0;}function u(ba){var ca=ba[2],da=c('messengerCustomColorUtilsRe').customColorOrBlue(ba[1][0]);return c('React').createElement("div",{className:"_3szn _3szo",tabIndex:"0",onClick:c('bs_curry')._1(ca,s),onKeyDown:c('bs_curry')._1(ca,t)},c('React').createElement("div",{className:"_3szp"},c('bs_curry')._4(c('messengerThreadSearchIconSVGReact').createElement("_5odt",da),0,0,0,0)),c('React').createElement("div",{className:"_3szq"},i._("Buscar en la conversaci\u00f3n")));}var v=[function(ba){return [ba.thread];}],w=[k,l,m,n,o,p,q,r,s,t,u,v],x=c('reactRe').CreateComponent([q,o,p,k,m,l,n,v,u]),y=x[1];function z(ba){return c('bs_curry')._1(y,[ba]);}var aa=x[0];g.MessengerInfoPanelSearch=w;g.comp=aa;g.wrapProps=y;g.createElement=z;}),null);
__d('messengerInfoPanelThreadOptionsContainerReact',['fbt','bs_curry','bs_js_primitive','MercuryThreadActions','MessagingThreadCustomizationSource','MessengerAdminGroupUtils','MessengerConfig','messengerInfoPanelCustomColorReact','messengerInfoPanelEmojiReact','messengerInfoPanelManageMessagesReact','messengerInfoPanelManageReviewReact','messengerInfoPanelMuteSettingsContainerReact','messengerInfoPanelNicknamesReact','messengerInfoPanelSearchReact','messengerInfoPanelSectionReact','reactRe','WorkGKs'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').Component[8],j=i[0],k=i[1],l=i[2],m=i[3],n=i[4],o=i[5],p="MessengerInfoPanelThreadOptionsContainerReact";function q(da){return c('MercuryThreadActions').getForFBID(da[3]);}function r(da,ea){var fa=ea[1];return q(fa).updateMuteSetting(fa[2].thread_id,da);}function s(da,ea){var fa=ea[1];return q(fa).updateMentionsMuteSetting(fa[2].thread_id,da);}function t(da,ea){var fa=ea[1];return q(fa).changeThreadColor(fa[2].thread_id,da,c('MessagingThreadCustomizationSource').SETTINGS);}function u(da,ea){var fa=ea[1];return q(fa).changeThreadEmoji(fa[2].thread_id,da,c('MessagingThreadCustomizationSource').SETTINGS);}function v(da,ea){var fa=ea[1];return q(fa).changeThreadNicknames(fa[2].thread_id,da[0],da[1],c('MessagingThreadCustomizationSource').SETTINGS);}function w(da){var ea=da[2],fa=da[1],ga=fa[3],ha=fa[2];if(ha.is_subscribed){var ia=c('WorkGKs').workplace_www_chat_branding,ja=c('MessengerAdminGroupUtils').canUpdateThreadCustomization(ha,ga),ka=ja&&ia[0],la=ka!==0?c('bs_curry')._4(c('messengerInfoPanelCustomColorReact').createElement(ha,ga,c('bs_curry')._1(ea,t)),0,0,0,0):null,ma=ja&&ia[0],na=ma!==0?c('messengerInfoPanelEmojiReact').createElement(ha,ga,c('bs_curry')._1(ea,u))(0,0,0,0):null,oa=c('bs_curry')._4(c('messengerInfoPanelSearchReact').createElement(ha),0,0,0,0),pa=c('bs_curry')._4(c('messengerInfoPanelNicknamesReact').createElement(fa[1],ha,ga,c('bs_curry')._1(ea,v)),0,0,0,0),qa=c('messengerInfoPanelManageMessagesReact').createElement(ha,ga)(0,0,0,0),ra=c('messengerInfoPanelManageReviewReact').createElement(ha,ga)(0,0,0,0),sa=c('bs_curry')._4(c('messengerInfoPanelMuteSettingsContainerReact').createElement(ha,c('bs_curry')._1(ea,r),c('bs_curry')._1(ea,s)),0,0,0,0);if(c('MessengerConfig').CollapsibleThreadOptions){return c('bs_curry')._3(c('messengerInfoPanelSectionReact').createElement(c('bs_js_primitive').js_from_nullable_def(fa[2].custom_color),[1],[fa[0]],[fa[4]],[h._("Opciones")],[oa,[pa,[la,[na,[qa,[ra,[sa,0]]]]]]]),0,0,0);}else return c('bs_curry')._3(c('messengerInfoPanelSectionReact').createElement(0,0,0,0,0,[oa,[pa,[la,[na,[qa,[ra,[sa,0]]]]]]]),0,0,0);}else return null;}var x=[function(da){return [+da.isCollapsed,da.participants,da.thread,da.viewer,da.onToggle];}],y=[j,k,l,m,n,o,p,q,r,s,t,u,v,w,x],z=c('reactRe').CreateComponent([p,n,o,j,l,k,m,x,w]),aa=z[1];function ba(da,ea,fa,ga,ha){return c('bs_curry')._1(aa,[da,ea,fa,ga,ha]);}var ca=z[0];g.MessengerInfoPanelThreadOptionsContainer=y;g.comp=ca;g.wrapProps=aa;g.createElement=ba;}),null);
__d('MessengerThreadInfoPanel.react',['cx','fbt','BootloadedComponent.react','immutable','ImmutableObject','JSResource','Link.react','MercuryAttachment','MercuryConfig','MercuryIDs','MercuryThreadInfo','MercuryMessageStore','MessengerActions','MessengerAdminGroupUtils','MessengerConfig','MessengerContactAdapters','messengerDomIDsRe','MessengerInfoPanelGroupSection.react','messengerInfoPanelNameSectionReact','MessengerInfoPanelPeopleSection.react','messengerInfoPanelSectionReact','messengerInfoPanelThreadOptionsContainerReact','MessengerSharedPhotosContainer.react','MessengerSharedPhotosContainerRoute','React','RelayRootContainer','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerDomIDsRe').ids,m=c('messengerInfoPanelNameSectionReact').comp,n=c('messengerInfoPanelSectionReact').comp,o=c('messengerInfoPanelThreadOptionsContainerReact').comp,p=c('React').PropTypes,q=c('BootloadedComponent.react').create(c('JSResource')('MessengerAddToConversationDialog.react').__setRef('MessengerThreadInfoPanel.react'));j=babelHelpers.inherits(r,c('React').PureComponent);k=j&&j.prototype;function r(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=k.constructor).call.apply(s,[this].concat(v)),this.$MessengerThreadInfoPanel1=undefined,this.$MessengerThreadInfoPanel2=undefined,this.$MessengerThreadInfoPanel3=false,this.state={sharedPhotoSection:null},this.$MessengerThreadInfoPanel8=function(){this.$MessengerThreadInfoPanel3=false;}.bind(this),this.$MessengerThreadInfoPanel11=function(x){this.props.onContactSelect(c('MessengerContactAdapters').fromMercuryParticipant(x));}.bind(this),this.$MessengerThreadInfoPanel10=function(x,y){this.props.onContactAction(x,c('MessengerContactAdapters').fromMercuryParticipant(y));}.bind(this),this.$MessengerThreadInfoPanel9=function(event){event.preventDefault();c('MessengerActions').showDialog(q,{bootloadPlaceholder:c('React').createElement('div',null),thread:this.props.thread,viewer:this.props.viewer});}.bind(this),t;}r.prototype.componentWillMount=function(){this.subscribeStoreUpdate(this.props.thread.thread_id);};r.prototype.componentWillReceiveProps=function(s){if(s.thread.thread_id!==this.props.thread.thread_id){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release();this.subscribeStoreUpdate(s.thread.thread_id);this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedPhotoSection:this.$MessengerThreadInfoPanel4(true)});}.bind(this),1000);}};r.prototype.subscribeStoreUpdate=function(s){if(!c('MercuryConfig').SharedPhotoNewView)return;this.$MessengerThreadInfoPanel1=new (c('MercuryMessageStore'))(s);this.$MessengerThreadInfoPanel2=new (c('SubscriptionsHandler'))();this.$MessengerThreadInfoPanel2.addSubscriptions(this.$MessengerThreadInfoPanel1.subscribe(function(t){if(t.messages.length<1)return;var u=t.eventType==c('MercuryMessageStore').MESSAGES_RECEIVED,v=t.eventType==c('MercuryMessageStore').MESSAGES_CHANGED,w=t.messages[t.messages.length-1];if(!u&&!v)return;if(w.has_attachment&&w.attachments.length>0){var x=w.attachments.find(function(y){return c('MercuryAttachment').isPhotoAttachment(y)||c('MercuryAttachment').isVideoAttachment(y);});if(x){this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedPhotoSection:this.$MessengerThreadInfoPanel4(true)});}.bind(this),1000);}}}.bind(this)));};r.prototype.componentWillUnmount=function(){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release();};r.prototype.componentDidUpdate=function(){if(!this.$MessengerThreadInfoPanel3)this.setState({sharedPhotoSection:null});};r.prototype.render=function(){var s=this.props,t=s.viewer,u=s.thread,v=c('MercuryIDs').getParticipantIDFromUserID(t),w=u.participants.indexOf(v)!==-1,x=this.$MessengerThreadInfoPanel3?this.state.sharedPhotoSection:this.$MessengerThreadInfoPanel4(false);return c('React').createElement('div',{className:"_3tkv",id:l.THREAD_INFO_PANEL},c('React').createElement('h3',{className:"accessible_elem"},i._("Informaci\u00f3n de la conversaci\u00f3n")),c('React').createElement(m,{contact:this.props.contact,isUnread:this.props.isUnread,isUserActive:this.props.isUserActive,lastActive:this.props.lastActive,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onThreadNameChange:this.props.onThreadNameChange,onThreadPhotoChange:this.props.onThreadPhotoChange,onUnmute:this.props.onUnmute,participants:this.props.participants,platform:this.props.platform,showLeaveGroup:this.props.showLeaveGroup,thread:this.props.thread,viewer:this.props.viewer}),c('React').createElement(o,{isCollapsed:this.props.threadOptionsSectionCollapsed,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadOptionsSectionToggle}),this.props.thread.is_canonical?this.$MessengerThreadInfoPanel5():this.$MessengerThreadInfoPanel6(),c('MessengerAdminGroupUtils').canSeeGroupOptions(w,u,t)?this.$MessengerThreadInfoPanel7():null,x);};r.prototype.$MessengerThreadInfoPanel7=function(){return c('React').createElement(c('MessengerInfoPanelGroupSection.react'),{isOptionsCollapsed:this.props.groupOptionsSectionCollapsed,onOptionsToggle:this.props.onGroupOptionsSectionToggle,isApprovalsCollapsed:this.props.groupOptionsApprovalsSectionCollapsed,onApprovalToggle:this.props.onGroupApprovalOptionsSectionToggle,onToggle:this.props.onThreadOptionsSectionToggle,participants:this.props.participants,viewer:this.props.viewer,thread:this.props.thread});};r.prototype.$MessengerThreadInfoPanel4=function(s){var t=this.props,u=t.getIsScrolledToBottom,v=t.getScrollableHeight,w=t.onPhotosSectionToggle,x=t.photosSectionCollapsed,y=t.thread,z=new (c('MessengerSharedPhotosContainerRoute'))({threadFBID:y.thread_fbid,newViewGK:c('MercuryConfig').SharedPhotoNewView});return c('React').createElement(c('RelayRootContainer'),{Component:c('MessengerSharedPhotosContainer.react'),renderLoading:function aa(){return null;},route:z,forceFetch:s,renderFetched:function(aa){return c('React').createElement(c('MessengerSharedPhotosContainer.react'),babelHelpers['extends']({},aa,{customColor:this.props.thread.custom_color,clearForceFetch:this.$MessengerThreadInfoPanel8,getIsScrolledToBottom:u,getScrollableHeight:v,isCollapsed:x,onToggle:w,threadFBID:y.thread_fbid,newViewGK:c('MercuryConfig').SharedPhotoNewView}));}.bind(this)});};r.prototype.$MessengerThreadInfoPanel6=function(){return c('React').createElement(c('MessengerInfoPanelPeopleSection.react'),{canViewerReply:c('MercuryThreadInfo').canReply(this.props.thread),contactAdapter:c('MessengerContactAdapters').fromMercuryParticipant,isCollapsed:this.props.peopleSectionCollapsed,isViewerSubscribed:this.props.thread.is_subscribed,onAddPeopleClick:this.$MessengerThreadInfoPanel9,onContactAction:this.$MessengerThreadInfoPanel10,onContactSelect:this.$MessengerThreadInfoPanel11,onToggle:this.props.onPeopleSectionToggle,participants:this.props.participants,viewer:this.props.viewer,adminIds:this.props.thread.admin_ids,thread:this.props.thread});};r.prototype.$MessengerThreadInfoPanel5=function(){if(!this.props.contact||!this.props.contact.href||this.props.contact.fbid.toString()===c('MessengerConfig').MoneyPennyFBID)return null;var s=this.props.contact.href,t=this.props.contact.type==='page'?i._("P\u00e1gina de Facebook"):i._("Perfil de Facebook");return c('React').createElement(n,{customColor:this.props.thread.custom_color,title:t},c('React').createElement('div',{className:"_4v0l"},c('React').createElement(c('Link.react'),{className:"_3oh-",style:{color:this.props.thread.custom_color},href:s,target:'_blank'},s.replace('www.',''))));};r.propTypes={contact:p.instanceOf(c('ImmutableObject')),getIsScrolledToBottom:p.func.isRequired,getScrollableHeight:p.func.isRequired,isUserActive:p.bool.isRequired,isBusinessEnabled:p.bool,lastActive:p.string,onArchive:p.func.isRequired,onContactAction:p.func.isRequired,onContactSelect:p.func.isRequired,onDelete:p.func.isRequired,onLeaveGroup:p.func,onMarkRead:p.func.isRequired,onMarkSpam:p.func.isRequired,onMarkUnread:p.func.isRequired,onMute:p.func.isRequired,onPeopleSectionToggle:p.func.isRequired,onPhotosSectionToggle:p.func.isRequired,onThreadOptionsSectionToggle:p.func.isRequired,onGroupOptionsSectionToggle:p.func.isRequired,onGroupApprovalOptionsSectionToggle:p.func.isRequired,onThreadNameChange:p.func.isRequired,onThreadPhotoChange:p.func.isRequired,onUnmute:p.func.isRequired,participants:p.instanceOf(c('immutable').Map).isRequired,peopleSectionCollapsed:p.bool.isRequired,photosSectionCollapsed:p.bool.isRequired,platform:p.string,prevIsScrolledToBottom:p.bool.isRequired,prevScrollableHeight:p.number.isRequired,showLeaveGroup:p.bool.isRequired,thread:p.instanceOf(c('ImmutableObject')).isRequired,threadOptionsSectionCollapsed:p.bool.isRequired,groupOptionsSectionCollapsed:p.bool.isRequired,groupOptionsApprovalsSectionCollapsed:p.bool.isRequired,viewer:p.string.isRequired};f.exports=r;}),null);
__d('MessengerThreadInfoPanelScrollableArea.react',['MessengerFlexArea.react','MessengerScrollableArea.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={prevHeight:-1,prevIsScrolledToBottom:false},this.$MessengerThreadInfoPanelScrollableArea1=null,this.isScrolledToBottom=function(){return this.refs.scrollable.isScrolledToBottom();}.bind(this),this.getHeight=function(){return c('ReactDOM').findDOMNode(this.refs.scrollable).offsetHeight;}.bind(this),this.$MessengerThreadInfoPanelScrollableArea2=function(){var q=this.isScrolledToBottom(),r=this.getHeight();if(this.state.prevIsScrolledToBottom!==q||this.state.prevHeight!==r)this.setState({prevHeight:r,prevIsScrolledToBottom:q});}.bind(this),m;}k.prototype.render=function(){return c('React').createElement(c('MessengerFlexArea.react'),{className:this.props.className,onResize:this.$MessengerThreadInfoPanelScrollableArea2},c('React').createElement(c('MessengerScrollableArea.react'),{height:'100%',onScroll:this.$MessengerThreadInfoPanelScrollableArea2,ref:'scrollable'},this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)));};k.propTypes={children:j.func.isRequired};f.exports=k;}),null);
__d('MessengerThreadInfoPanelContainer.react',['AsyncRequest','immutable','ImmutableObject','MercuryAPIArgsSource','MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercuryThreadActions','MercuryThreadInfo','MercuryTriodeSourceUtil','MessengerActions','MessengerConfirmLeaveGroupDialog.react','messengerContactActionsRe','MessengerAdminGroupUtils','MessengerThreadInfoPanelScrollableArea.react','MessengerSettingsActions','MessengerSettingsStore','MessengerThreadInfoPanel.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','URI','XMessagingSetThreadStateController'],(function a(b,c,d,e,f,g){'use strict';var h=c('messengerContactActionsRe').actions,i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerThreadInfoPanelContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerSettingsStore'))],propTypes:{contactData:i.object,participants:i.instanceOf(c('immutable').Map).isRequired,thread:i.instanceOf(c('ImmutableObject')).isRequired,viewer:i.string.isRequired},statics:{calculateState:function k(){var l=c('MessengerSettingsStore').getSettings(),m=l.people_section_collapsed,n=l.photos_section_collapsed,o=l.thread_section_collapsed,p=l.group_section_collapsed,q=l.group_approval_section_collapsed;return {people_section_collapsed:m,photos_section_collapsed:n,thread_section_collapsed:o,group_section_collapsed:p,group_approval_section_collapsed:q};}},render:function k(){var l=this.props.contactData||{},m=this.state,n=m.people_section_collapsed,o=m.photos_section_collapsed,p=m.thread_section_collapsed,q=m.group_section_collapsed,r=m.group_approval_section_collapsed;return (c('React').createElement(c('MessengerThreadInfoPanelScrollableArea.react'),{className:this.props.className},function(s,t,u,v){return (c('React').createElement(c('MessengerThreadInfoPanel.react'),{contact:l.contact,getIsScrolledToBottom:u,getScrollableHeight:v,isUserActive:l.isUserActive||false,lastActive:l.lastActive,onArchive:this._handleArchive,onContactAction:this._handleContactAction,onContactSelect:this._handleContactSelect,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onMuteChange:this._handleMuteChange,onPeopleSectionToggle:this._handlePeopleSectionToggle,onPhotosSectionToggle:this._handlePhotosSectionToggle,onThreadOptionsSectionToggle:this._handleThreadSectionToggle,onGroupOptionsSectionToggle:this._handleGroupOptionsSectionToggle,onGroupApprovalOptionsSectionToggle:this._handleGroupOptionsApprovalSectionToggle,onThreadNameChange:this._handleThreadNameChange,onThreadPhotoChange:this._handleThreadPhotoChange,onUnmute:this._handleUnmute,participants:this.props.participants,peopleSectionCollapsed:n,photosSectionCollapsed:o,platform:l.platform,prevIsScrolledToBottom:t,prevScrollableHeight:s,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical,thread:this.props.thread,threadOptionsSectionCollapsed:p,groupOptionsSectionCollapsed:q,groupOptionsApprovalsSectionCollapsed:r,viewer:this.props.viewer}));}.bind(this)));},_handleArchive:function k(){this._getThreadActions().archive(this.props.thread.thread_id);c('MessengerActions').selectThread(null);},_handleDelete:function k(){this._getThreadActions()['delete'](this.props.thread.thread_id);c('MessengerActions').selectThread(null);},_handleMarkRead:function k(){this._getThreadActions().markRead(this.props.thread.thread_id);},_handleMarkSpam:function k(){this._getThreadActions().markSpam(this.props.thread.thread_id);c('MessengerActions').selectThread(null);},_handleMarkUnread:function k(){this._getThreadActions().markUnread(this.props.thread.thread_id);},_handleMute:function k(l){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,l);},_handleUnmute:function k(){this._getThreadActions().unmute(this.props.thread.thread_id);},_handleMuteChange:function k(l){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,l);},_handleContactSelect:function k(l){if(c('MercuryIDs').getUserIDFromParticipantID(l.uid)!==this.props.viewer){var m=c('MercuryIDs').getThreadIDFromParticipantID(l.uid);m&&c('MessengerActions').selectThread(m);}},_handleContactAction:function k(l,m){if(c('MercuryIDs').getUserIDFromParticipantID(m.uid)!==this.props.viewer)switch(l){case h.MESSAGE:this._handleContactSelect(m);break;case h.PROFILE:var n=this.props.participants.get(m.uid);if(n&&n.href){window.open(n.href);}else this._handleContactSelect(m);break;case h.REMOVE:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread)){var o=new (c('URI'))('/chat/remove_participants/');o.addQueryData({uid:c('MercuryIDs').getUserIDFromParticipantID(m.uid),tid:this.props.thread.thread_fbid});var p=new (c('AsyncRequest'))(o);p.send();}break;}switch(l){case h.REMOVE_OWNER:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c('MercuryIDs').getUserIDFromParticipantID(m.uid)],false);break;case h.ADD_OWNER:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c('MercuryIDs').getUserIDFromParticipantID(m.uid)],true);break;}},_handleLeaveGroup:function k(){if(this.props.viewer){var l=c('MessengerAdminGroupUtils').isViewerAdmin(this.props.thread.admin_ids,this.props.viewer);c('MessengerActions').showDialog(c('MessengerConfirmLeaveGroupDialog.react'),{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:l,thread:this.props.thread});}},_onLeaveGroupConfirm:function k(){if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread)){var l=this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),this.props.thread.thread_id,c('MercuryLogMessageType').UNSUBSCRIBE,{removed_participants:[c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(l);}},_handleThreadNameChange:function k(l){var m=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread);if(!m){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),this.props.thread.thread_id,c('MercuryLogMessageType').THREAD_NAME,{name:l}),null,c('MercuryAPIArgsSource').MESSENGER);}else{var n=c('XMessagingSetThreadStateController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(n).setData({thread_id:this.props.thread.thread_fbid,thread_name:l}).send();}},_handleThreadPhotoChange:function k(l,m){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),l,c('MercuryLogMessageType').THREAD_IMAGE,{image:m.metadata[0]}));},_handlePeopleSectionToggle:function k(){c('MessengerSettingsActions').changeSettings({people_section_collapsed:!this.state.people_section_collapsed});},_handlePhotosSectionToggle:function k(){c('MessengerSettingsActions').changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed});},_handleThreadSectionToggle:function k(){c('MessengerSettingsActions').changeSettings({thread_section_collapsed:!this.state.thread_section_collapsed});},_handleGroupOptionsSectionToggle:function k(){c('MessengerSettingsActions').changeSettings({group_section_collapsed:!this.state.group_section_collapsed});},_handleGroupOptionsApprovalSectionToggle:function k(){c('MessengerSettingsActions').changeSettings({group_approval_section_collapsed:!this.state.group_approval_section_collapsed});},_getThreadActions:function k(){return c('MercuryThreadActions').getForFBID(this.props.viewer);},_getMessageActions:function k(){return c('MercuryMessageActions').getForFBID(this.props.viewer);},_getMessageObject:function k(){return c('MercuryMessageObject').getForFBID(this.props.viewer);}});f.exports=j;}),null);
__d('MessengerDetailView.react',['cx','fbt','invariant','BootloadOnRender.react','DataTransfer','immutable','JSResource','LazyComponent.react','MercuryIDs','MercuryConfig','MercuryCanonicalGroupThreadStore','MercuryParticipants','MercuryThreadActions','MercuryThreadInfo','MercuryThreads','MessengerComposerStore','MessengerComposerContainer.react','MessengerConversation.react','MessengerConversationContainer.react','MessengerDetailViewHeaderContainer.react','messengerDomIDsRe','MessengerErrorBoundary.react','MessengerPresenceStatusUtils','MessengerSettingsActions','MessengerSettingsStore','MessengerStateStore','MessengerThreadSearchStore','MessengerThreadInfoPanelContainer.react','MessengerThreadSearchActions','MessengerView','MessengerWebDriverTestIDs','Parent','PresenceStatus','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','AvailableList','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('messengerDomIDsRe').ids;c('AvailableList');var l=c('React').PropTypes,m=c('React').createClass({displayName:'MessengerDetailView',_composer:undefined,mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerComposerStore'),c('MessengerStateStore'),c('MessengerThreadSearchStore'),c('MercuryCanonicalGroupThreadStore'),c('MercuryThreads'),c('MercuryParticipants'),c('PresenceStatus'))],propTypes:{activeThreadID:l.string,view:l.string,viewer:l.string.isRequired},statics:{calculateState:function n(o){var p=o.activeThreadID,q=c('MercuryThreads').getForFBID(o.viewer),r=c('MessengerComposerStore').getState();if(o.view===c('MessengerView').DETAIL.COMPOSE){!!r.recipients||j(0);var s=r.recipients;if(s.size===1){p=c('MercuryIDs').getThreadIDFromUserID(s.first().getUniqueID().toString());}else if(s.size>1)p=c('MercuryCanonicalGroupThreadStore').getOrFetch(Array.from(s).map(function(v){return v.getUniqueID().toString();}));}var t=p?q.getOrFetch(p):null,u=c('immutable').Map();if(t)u=u.withMutations(function(v){t&&t.participants&&t.participants.forEach(function(w){v.set(w,c('MercuryParticipants').getOrFetch(w));});t&&t.is_subscribed&&v.set(c('MercuryIDs').getParticipantIDFromUserID(o.viewer),c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(o.viewer)));});return {infoPanelCollapsed:c('MessengerSettingsStore').getSettings().info_sidebar_collapsed,activeThreadID:p,composerState:r,messengerState:c('MessengerStateStore').getState(),contactData:c('MessengerPresenceStatusUtils').getStatusFromCanonicalThread(u,t),activeThread:t,participants:u,searchResults:c('MessengerThreadSearchStore').getState()};}},_refsConversationContainer:null,getInitialState:function n(){return {dropTargetOverlayVisible:false};},render:function n(){var o=this.state.activeThreadID,p=this._getMainLabelDetails();return (c('React').createElement('div',{'aria-labelledby':p.labelIDs,className:"_1q5-",role:'main'},c('React').createElement('div',{className:"hidden_elem",id:k.MAIN_LABEL},p.labelText),c('React').createElement(c('MessengerDetailViewHeaderContainer.react'),{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed}),c('React').createElement('div',{className:"_20bp"},this._renderInfoPanel(o),c('React').createElement('div',{className:"_4_j4",onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop},this._renderMainView(o),this._renderSearchView(o),this._renderFooterView(o),c('React').createElement('div',{className:(!this.state.dropTargetOverlayVisible?"hidden_elem":'')+(' '+"_2fg6")})))));},_renderSearchView:function n(o){return o&&!this.props.mid&&this.props.query!=null?c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MessengerThreadSearchContainer.react').__setRef('MessengerDetailView.react'),placeholder:c('React').createElement('div',{className:"_33p7 _5iwm"}),component:c('React').createElement(c('LazyComponent.react'),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null;},_assignConversationContainerRef:function n(o){this._refsConversationContainer=o;},_renderMainView:function n(o){if(!o)return c('React').createElement('div',{className:"_1ut7"});var p=this.state.contactData?this.state.contactData.contact:null;if(this.state.searchResults.messages)return (c('React').createElement(c('MessengerErrorBoundary.react'),{component:'conversation'},c('React').createElement(c('MessengerConversation.react'),{className:"_1wfr",contact:p,downExhausted:this.state.searchResults.downExhausted,fetchMessages:c('MessengerThreadSearchActions').getMoreSearchContext,innerClassName:"_1r_-",isCanonical:c('MercuryIDs').isCanonical(o),isLoaded:true,isLoading:false,messages:this.state.searchResults.messages,onRead:c('emptyFunction'),participants:this.state.participants,thread:this.state.activeThread,threadID:o,upExhausted:this.state.searchResults.upExhausted,useManualFetch:true,viewer:this.props.viewer})));return (c('React').createElement(c('MessengerErrorBoundary.react'),{component:'conversation'},c('React').createElement(c('MessengerConversationContainer.react'),{className:"_1wfr",contact:p,onMarkRead:this._handleMarkRead,participants:this.state.participants,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:o,viewer:this.props.viewer})));},_renderFooterView:function n(o){var p=c('MercuryConfig').ColdOpenBlock&&this.state.activeThread&&c('MercuryThreadInfo').isColdOpen(this.state.activeThread);return (c('React').createElement(c('MessengerErrorBoundary.react'),{className:"_4rv3 _2pen",component:'composer'},c('React').createElement(c('MessengerComposerContainer.react'),{canReply:!!(!p&&(this.props.view===c('MessengerView').DETAIL.COMPOSE||this.state.activeThread&&c('MercuryThreadInfo').canReply(this.state.activeThread)&&!c('MercuryConfig').ViewerIsReadOnly)),onMount:function(q){return this._composer=q;}.bind(this),onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,threadID:o,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer})));},_renderInfoPanel:function n(o){var p=this.state,q=p.activeThread,r=p.contactData,s=p.infoPanelCollapsed,t=p.participants,u=this.props.view;if(!q||!t||u===c('MessengerView').DETAIL.COMPOSE)return null;return (c('React').createElement('div',{className:(s?"hidden_elem":'')+(' '+"_4_j5"),'data-testid':c('MessengerWebDriverTestIDs').INFO_PANEL},c('React').createElement(c('MessengerErrorBoundary.react'),{className:"_4rv3",component:'conversation information'},c('React').createElement(c('MessengerThreadInfoPanelContainer.react'),{className:"_4_j9",contactData:r,participants:t,thread:q,viewer:this.props.viewer}))));},_getMainLabelDetails:function n(){if(this.props.view===c('MessengerView').DETAIL.COMPOSE)return {labelText:i._("Nuevo mensaje"),labelIDs:k.MAIN_LABEL};return {labelText:i._("Conversaci\u00f3n con"),labelIDs:k.MAIN_LABEL+' '+k.THREAD_TITLE};},_handleConversationClick:function n(o){var p=this.props.activeThreadID;if(p&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom())this._handleMarkRead(p);if(window.getSelection().toString()!=='')return;if(c('Parent').byTag(o.target,'a')!=null)return;var q=this._getComposer();q&&q.focusInput();},_showDropTargetOverlay:function n(o){o&&o.preventDefault();this.setState({dropTargetOverlayVisible:true});},_hideDropTargetOverlay:function n(o){o&&o.preventDefault();this.setState({dropTargetOverlayVisible:false});var p=this._getComposer();p&&p.resetDrag();},_handleDrop:function n(o){this._hideDropTargetOverlay(o);var p=this._getComposer();if(!p)return;o.nativeEvent.dataTransfer instanceof Object||j(0);var q=new (c('DataTransfer'))(o.nativeEvent.dataTransfer),r=q.getFiles();if(r.length){p.handleFileUpload(r);}else{var s=q.getText();if(s)p.handleTextDropped(s);}},_handleResize:function n(){var o=this._refsConversationContainer;if(o)o.handleResize();},_handleInfoPanelToggle:function n(){var o=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:o},function(){c('MessengerSettingsActions').changeSettings({info_sidebar_collapsed:o});});},_handleMarkRead:function n(o){c('MercuryThreadActions').getForFBID(this.props.viewer).markRead(o);},_getComposer:function n(){return this._composer;}});f.exports=m;}),null);
__d('messengerDetailViewReact',['MessengerDetailView.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){var n={activeThreadID:c('utilsRe').optionToJsNullUndefined(i),mid:c('utilsRe').optionToJsNullUndefined(j),query:c('utilsRe').optionToJsNullUndefined(k),view:c('utilsRe').optionToJsNullUndefined(l),viewer:m},o=c('MessengerDetailView.react');return function(p,q,r,s){return c('reactRe').wrapPropsShamelessly(o,n,p,q,r,s);};}g.createElement=h;}),null);
__d('messengerDialogContainerReact',['MessengerDialogContainer.react','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h={},i=c('MessengerDialogContainer.react');function j(k,l,m,n){return c('reactRe').wrapPropsShamelessly(i,h,k,l,m,n);}g.createElement=j;}),null);
__d('messengerErrorBoundaryReact',['MessengerErrorBoundary.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k={className:c('utilsRe').optionToJsNullUndefined(i),component:c('utilsRe').optionToJsNullUndefined(j)},l=c('MessengerErrorBoundary.react');return function(m,n,o,p){return c('reactRe').wrapPropsShamelessly(l,k,m,n,o,p);};}g.createElement=h;}),null);
__d("XMessengerDotComSpoofIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/spoof\/fb_iframe_target\/",{gk_spoof:{type:"String"}});}),null);
__d("XSpoofMessengerDotComIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/spoof\/messenger_dot_com_iframe\/",{redirect_uri:{type:"String",required:true}});}),null);
__d('MessengerSpoof',['Arbiter','DOM','JSXDOM','URI','XSpoofMessengerDotComIFrameController','XMessengerDotComSpoofIFrameController'],(function a(b,c,d,e,f,g){'use strict';var h=6000;function i(k){var l=c('JSXDOM').iframe({src:j().toString(),width:0,height:0});c('DOM').appendContent(document.body,l);c('Arbiter').subscribeOnce('messengerdotcom_spoof',function(){c('DOM').remove(l);k();});setTimeout(function(){c('Arbiter').inform('messengerdotcom_spoof');},h);}function j(){var k=new (c('URI'))(document.URL),l=c('XMessengerDotComSpoofIFrameController').getURIBuilder().getURI().getQualifiedURI().toString(),m=c('XSpoofMessengerDotComIFrameController').getURIBuilder().setString('redirect_uri',l).getURI();return m.setDomain(k.getDomain().replace('messenger.com','facebook.com')).setPort(k.getPort()).setProtocol('https');}f.exports={init:i};}),null);
__d("XMessengerDotComLogoutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/logout\/",{next:{type:"String"}});}),null);
__d('MessengerSettingsMenu.react',['fbt','cx','AbstractPopoverButton.react','AsyncDialog','AsyncRequest','Bootloader','CacheStorage','Form','goURI','Link.react','MercuryFilters','MessagingTag','MessengerActions','MessengerConfig','MessengerSpoof','MessengerMenu.react','MessengerPopoverMenu.react','MessengerView','React','Run','ServiceWorkerLoginAndLogout','XMessengerDotComLogoutController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MessengerMenu.react').Item,m=c('MessengerMenu.react').Separator,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MessengerSettingsMenu1=function(u){u.preventDefault();c('Bootloader').loadModules(["MessengerSettingsDialog.react"],function(v){c('MessengerActions').showDialog(v,{viewer:this.props.viewer});}.bind(this),'MessengerSettingsMenu.react');}.bind(this),this.$MessengerSettingsMenu10=function(u){u.preventDefault();c('MessengerActions').changeMasterView(this.props.view===c('MessengerView').MASTER.RECENT?c('MessengerView').MASTER.PEOPLE:c('MessengerView').MASTER.RECENT);}.bind(this),this.$MessengerSettingsMenu8=function(){c('MessengerActions').changeFolder(this.props.folder===c('MessagingTag').PENDING?c('MessagingTag').INBOX:c('MessagingTag').PENDING);}.bind(this),this.$MessengerSettingsMenu9=function(){c('MessengerActions').changeFolder(this.props.folder===c('MessagingTag').ACTION_ARCHIVED?c('MessagingTag').INBOX:c('MessagingTag').ACTION_ARCHIVED);}.bind(this),this.$MessengerSettingsMenu12=function(){c('MessengerActions').changeFilter(this.props.filter===c('MercuryFilters').UNREAD?c('MercuryFilters').ALL:c('MercuryFilters').UNREAD);}.bind(this),q;}o.prototype.render=function(){var p=c('React').createElement(c('MessengerMenu.react'),null,c('React').createElement(l,{label:h._("Configuraci\u00f3n"),onclick:this.$MessengerSettingsMenu1}),c('React').createElement(m,null),this.$MessengerSettingsMenu2(),this.$MessengerSettingsMenu3(),this.$MessengerSettingsMenu4(),c('React').createElement(m,null),c('React').createElement(l,{href:'https://www.messenger.com/about',label:h._("Informaci\u00f3n"),target:'_blank'}),c('React').createElement(l,{href:'https://www.facebook.com/policies',label:h._("Condiciones"),target:'_blank'}),c('React').createElement(l,{href:'https://www.facebook.com/privacy/explanation',label:h._("Pol\u00edtica de privacidad"),target:'_blank'}),c('React').createElement(l,{href:'https://www.facebook.com/help/cookies',label:h._("Pol\u00edtica de cookies"),target:'_blank'}),c('React').createElement(m,null),c('React').createElement(l,{href:'https://www.facebook.com/help/735006619902401',label:h._("Ayuda"),target:'_blank'}),c('React').createElement(l,{label:h._("Informar de un problema"),onclick:this.$MessengerSettingsMenu5}),this.$MessengerSettingsMenu6(),c('React').createElement(m,null),c('React').createElement(l,{label:h._("Cerrar sesi\u00f3n"),onclick:this.$MessengerSettingsMenu7})),q=h._("Configuraci\u00f3n, pol\u00edtica de privacidad, ayuda y mucho m\u00e1s"),r={button:c('React').createElement(c('Link.react'),{'aria-label':q,className:"_30yy _2fug",role:'button',title:q}),defaultMaxWidth:200};return c('React').createElement(c('MessengerPopoverMenu.react'),{menu:p},c('React').createElement(c('AbstractPopoverButton.react'),{config:r,haschevron:false,image:null,label:null,maxwidth:200}));};o.prototype.$MessengerSettingsMenu3=function(){if(this.props.view!==c('MessengerView').MASTER.RECENT)return null;var p=[c('React').createElement(l,{key:'message-requests-switch',label:h._("Solicitudes de mensajes"),onclick:this.$MessengerSettingsMenu8})];if(this.props.folder===c('MessagingTag').INBOX&&c('MessengerConfig').AllowArchived)p.push(c('React').createElement(l,{key:'archived-switch',label:h._("Conversaciones archivadas"),onclick:this.$MessengerSettingsMenu9}));return p;};o.prototype.$MessengerSettingsMenu5=function(p){p.preventDefault();c('AsyncDialog').send(new (c('AsyncRequest'))('/ajax/bugs/report'));};o.prototype.$MessengerSettingsMenu7=function(){var p=new (c('CacheStorage'))('localstorage');c('Run').onUnload(function(){p.clear();c('ServiceWorkerLoginAndLogout').logout();});c('Form').post(c('XMessengerDotComLogoutController').getURIBuilder().getURI(),{});};o.prototype.$MessengerSettingsMenu11=function(){c('MessengerSpoof').init(function(){c('goURI')(window.location.href,true);});};o.prototype.$MessengerSettingsMenu2=function(){if(!c('MessengerConfig').PeopleTabEnabled)return null;return c('React').createElement(l,{label:this.props.view===c('MessengerView').MASTER.RECENT?h._("Contactos activos"):h._("Mensajes recientes"),onclick:this.$MessengerSettingsMenu10});};o.prototype.$MessengerSettingsMenu4=function(){if(!c('MessengerConfig').UnreadFilter)return null;return c('React').createElement(l,{label:this.props.filter===c('MercuryFilters').UNREAD?h._("Todas las conversaciones"):h._("Conversaciones no le\u00eddas"),onclick:this.$MessengerSettingsMenu12});};o.prototype.$MessengerSettingsMenu6=function(){if(!c('MessengerConfig').GKSpoof)return null;return c('React').createElement(l,{label:'[FB-Only] Copy Spoofs',onclick:this.$MessengerSettingsMenu11});};o.propTypes={filter:n.string.isRequired,folder:n.string.isRequired,view:n.string.isRequired,viewer:n.string.isRequired};f.exports=o;}),null);
__d('MessengerMasterViewHeader.react',['cx','fbt','Link.react','MessagingTag','MessengerActions','MessengerDirect','MessengerSettingsMenu.react','MessengerURIConstants','MessengerView','React','WorkGKs'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MessengerDirect').module,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerMasterViewHeader7=function(t){t.preventDefault();if(this.props.view!==c('MessengerView').MASTER.RECENT)c('MessengerActions').changeMasterView(c('MessengerView').MASTER.RECENT);c('MessengerActions').changeFolder(c('MessagingTag').INBOX);}.bind(this),p;}n.prototype.$MessengerMasterViewHeader1=function(){var o=i._("Mensaje nuevo");return c('React').createElement(c('Link.react'),{'aria-label':o,className:"_30yy _2oc8",href:c('MessengerURIConstants').COMPOSE_SUBPATH,onClick:this.$MessengerMasterViewHeader2,role:'button',title:o});};n.prototype.$MessengerMasterViewHeader3=function(){return l?c('React').createElement(l,{viewer:this.props.viewer}):null;};n.prototype.$MessengerMasterViewHeader4=function(){return c('React').createElement('div',{className:"_4kzu"},c('React').createElement(c('MessengerSettingsMenu.react'),{filter:this.props.filter,folder:this.props.folder,view:this.props.view,viewer:this.props.viewer}));};n.prototype.render=function(){var o=this.props.folder!==c('MessagingTag').INBOX||this.props.view!==c('MessengerView').MASTER.RECENT?this.$MessengerMasterViewHeader5():this.$MessengerMasterViewHeader4();return c('React').createElement('div',{className:"_36ic _5l-3",role:'banner'},o,this.$MessengerMasterViewHeader3(),c('React').createElement('div',{className:"_1tqi"},this.$MessengerMasterViewHeader6()),this.$MessengerMasterViewHeader1());};n.prototype.$MessengerMasterViewHeader6=function(){if(this.props.folder===c('MessagingTag').PENDING){return i._("Solicitudes de mensajes");}else if(this.props.folder===c('MessagingTag').OTHER){return i._("Solicitudes filtradas");}else if(this.props.view===c('MessengerView').MASTER.PEOPLE){return i._("Activos ahora");}else if(c('WorkGKs').workplace_www_chat_branding){return i._("Work Chat");}else return i._("Messenger");};n.prototype.$MessengerMasterViewHeader5=function(){var o=this.props.folder===c('MessagingTag').PENDING||this.props.folder===c('MessagingTag').ACTION_ARCHIVED||this.props.view!==c('MessengerView').MASTER.RECENT,p=o?this.$MessengerMasterViewHeader7:this.$MessengerMasterViewHeader8,q=o?i._("Volver a \"Mensajes recientes\""):i._("Volver a las solicitudes de mensaje");return c('React').createElement(c('Link.react'),{'aria-label':q,className:"_30yy _2oc9",onClick:p,role:'button',title:q});};n.prototype.$MessengerMasterViewHeader2=function(o){o.preventDefault();c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);};n.prototype.$MessengerMasterViewHeader8=function(o){o.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').PENDING);};n.propTypes={filter:m.string.isRequired,folder:m.string.isRequired,view:m.string.isRequired,viewer:m.string.isRequired};f.exports=n;}),null);
__d('P2PBannerStore',['invariant','EventEmitter','P2PActionConstants','P2PAPI','P2PDispatcher'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=void 0,l={},m=false,n=false;i=babelHelpers.inherits(o,c('EventEmitter'));j=i&&i.prototype;function o(){j.constructor.call(this);k=c('P2PDispatcher').register(this.onEventDispatched.bind(this));}o.prototype.onEventDispatched=function(p){var q=p.type,r=p.data;switch(q){case c('P2PActionConstants').BANNER_STATES_UPDATED:this.handleBannerStatesUpdated(r);this.emit('change');break;case c('P2PActionConstants').BANNER_DISMISSED:this.handleBannerDismissed(r);this.emit('change');break;case c('P2PActionConstants').BANNER_COMPLETED:this.handleBannerCompleted(r);this.emit('change');break;}};o.prototype.handleBannerStatesUpdated=function(p){m=true;l=p;};o.prototype.handleBannerDismissed=function(p){var q=this.getBannerState(p);q.hasBeenDismissed=true;};o.prototype.shouldShowBanner=function(p){var q=void 0;if(!n){c('P2PAPI').getBannerStates();n=true;return false;}if(!m)return false;q=this.getBannerState(p);return (q.eligible&&!q.hasBeenDismissed);};o.prototype.handleBannerCompleted=function(p){var q=this.getBannerState(p);q.eligible=false;};o.prototype.getBannerState=function(p){var q=l[p];q||h(0);return q;};f.exports=new o();}),null);
__d('P2PJewelBanner.react',['cx','fbt','ix','Image.react','Layout.react','P2PButton.react','React','TooltipLink.react','URI','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').FillColumn,n=c('Layout.react').Column,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.handleCloseClick=function(v){v.stopPropagation();if(this.props.onClose)this.props.onClose();}.bind(this),this.handleClick=function(){this.execPrimaryClick();}.bind(this),this.handlePrimaryClick=function(v){v.stopPropagation();this.execPrimaryClick();}.bind(this),this.execPrimaryClick=function(){if(this.props.primaryActionConfig.uri)new (c('URI'))(this.props.primaryActionConfig.uri).go();this.props.primaryActionConfig.onClick&&this.props.primaryActionConfig.onClick();}.bind(this),this.handleSecondaryActionClick=function(v){v.stopPropagation();this.props.secondaryActionConfig&&this.props.secondaryActionConfig.onClick&&this.props.secondaryActionConfig.onClick();}.bind(this),this.renderCloseButton=function(){return (c('React').createElement(c('TooltipLink.react'),{alignH:'center',className:"_47d8",href:'#',onClick:this.handleCloseClick,position:'above',tooltip:i._("Ignorar")},c('React').createElement(c('Image.react'),{className:"_47dg",height:7,src:j('/images/p2p/jewel-banner-close.png'),width:7})));}.bind(this),this.renderActions=function(){var v=this.props.primaryActionConfig,w=void 0,x=this.props.secondaryActionConfig;if(x)w=c('React').createElement(c('P2PButton.react'),{className:"_5d0t",href:'#',label:x.text,onClick:this.handleSecondaryActionClick,size:'large',target:'_blank',type:'primary'});return (c('React').createElement('div',null,w,c('React').createElement(c('P2PButton.react'),{className:"_5d0t",href:v.uri||'#',label:v.text,onClick:this.handlePrimaryClick,size:'large',target:'_blank',type:'primary',use:'confirm'})));}.bind(this),r;}p.prototype.render=function(){var q=void 0;if(this.props.isDismissable)q=this.renderCloseButton();return (c('React').createElement('div',{className:"_5d0n",onClick:this.handleClick,role:'presentation'},q,c('React').createElement(c('Layout.react'),null,c('React').createElement(n,{className:"_400i"},c('React').createElement('div',{className:"_400j"},c('React').createElement(c('Image.react'),{className:"_5d0q",height:50,src:j('/images/p2p/jewel-banner-coin.png'),width:50}))),c('React').createElement(m,{className:"_47di"},c('React').createElement('div',{className:"_400j"},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',weight:'bold'},this.props.titleText),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light'},this.props.bodyText))),c('React').createElement(n,{className:"_400k"},c('React').createElement('div',{className:"_400j"},this.renderActions())))));};p.propTypes={bodyText:o.node,isDismissable:o.bool,onClose:o.func,primaryActionConfig:o.shape({onClick:o.func,text:o.node.isRequired,uri:o.oneOfType([o.string,o.object])}).isRequired,secondaryActionConfig:o.shape({onClick:o.func.isRequired,text:o.node.isRequired}),titleText:o.node.isRequired};p.defaultProps={isDismissable:false};f.exports=p;}),null);
__d('P2PPendingPaymentRequestJewelBanner.react',['fbt','P2PJewelBanner.react','P2PPaymentRequest','P2PPaymentRequestActionHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleDeclineClick=function(){c('P2PPaymentRequestActionHelper').initDeclinePaymentRequestFlow(this.props.paymentRequest);}.bind(this),this.handlePayClick=function(){c('P2PPaymentRequestActionHelper').initPayForPaymentRequestFlow(this.props.paymentRequest,'banner');}.bind(this),this.renderBodyText=function(){var r=this.props.paymentRequest,s=r.memoText;if(!s)return null;return h._("Para {What the user paid for}",[h.param('What the user paid for',s)]);}.bind(this),n;}l.prototype.render=function(){var m=this.props.paymentRequest;return (c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.renderBodyText(),primaryActionConfig:{onClick:this.handlePayClick,text:h._("Pagar")},secondaryActionConfig:{onClick:this.handleDeclineClick,text:h._("Rechazar")},titleText:h._("{requester_name} ha solicitado {amount}",[h.param('requester_name',m.requester.name),h.param('amount',m.amountWithSymbol)])}));};l.propTypes={paymentRequest:k.instanceOf(c('P2PPaymentRequest')).isRequired};f.exports=l;}),null);
__d('P2PPendingPushFailJewelBanner.react',['fbt','P2PJewelBanner.react','P2PLinkConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.getActionText=function(){return h._("M\u00e1s informaci\u00f3n");},this.getBodyText=function(){var r=this.props.transfer;return h._("No se ha podido realizar el ingreso de {currency} {amount} de {sender_name} con tu tarjeta de d\u00e9bito.",[h.param('currency',r.currency),h.param('amount',r.amount),h.param('sender_name',r.sender.name)]);}.bind(this),n;}l.prototype.render=function(){return (c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.getBodyText(),primaryActionConfig:{text:this.getActionText(),uri:c('P2PLinkConstants').helpTransferPushFailURI},titleText:h._("Actualiza tu tarjeta")}));};l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PTimeBasedAcceptMessage.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.transfer,n=m.creationTime*1000,o=1000*60*60*24,p=Date.now(),q=(p-n)/o,r=m.expirationTimestamp*1000-p,s=Math.round(Math.max(r/o,1)),t=void 0;if(q<=2){t=h._("A\u00f1ade una tarjeta de d\u00e9bito e ir\u00e1 directamente a tu banco.");}else if(q<=4){t=h._("Este dinero se devolver\u00e1 dentro de {days left} d\u00edas. A\u00f1ade una tarjeta de d\u00e9bito para aceptarlo.",[h.param('days left',s)]);}else if(q<=5){t=h._({"day":"Tienes {days left} d\u00eda para a\u00f1adir una tarjeta de d\u00e9bito antes de que el dinero se env\u00ede de vuelta a {sender_name}.","days":"Tienes {days left} d\u00edas para a\u00f1adir una tarjeta de d\u00e9bito antes de que el dinero se env\u00ede de vuelta a {sender_name}."},[h.param('days left',s),h['enum'](s===1?'day':'days',{day:'day',days:'days'}),h.param('sender_name',m.sender.name)]);}else t=h._("Tienes un plazo de 24 horas para a\u00f1adir una tarjeta de d\u00e9bito antes de que se devuelva el dinero a {sender_name}.",[h.param('sender_name',m.sender.name)]);return c('React').createElement('div',null,t);};function l(){i.apply(this,arguments);}l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PPendingRecipientNUXJewelBanner.react',['fbt','P2PAcceptMoneyDialog.react','P2PActions','P2PCreditCardStore','P2PJewelBanner.react','P2PTimeBasedAcceptMessage.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'P2PPendingRecipientNUXJewelBanner',propTypes:{transfer:i.object.isRequired},getInitialState:function k(){return {creditCards:c('P2PCreditCardStore').getAll()};},creditCardStoreSub:null,componentDidMount:function k(){this.creditCardStoreSub=c('P2PCreditCardStore').addListener('change',this.onCreditCardStoreChange);},componentWillUnmount:function k(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},onCreditCardStoreChange:function k(){var l={creditCards:c('P2PCreditCardStore').getAll()};if(this.isMounted())this.setState(l);},handleClick:function k(){this.showAcceptMoneyDialog();},showAcceptMoneyDialog:function k(){c('P2PActions').showDialog(c('P2PAcceptMoneyDialog.react'),{creditCards:this.state.creditCards,onClose:c('P2PActions').hideDialog,transfer:this.props.transfer});},renderTimeBasedMessage:function k(){return (c('React').createElement(c('P2PTimeBasedAcceptMessage.react'),{transfer:this.props.transfer}));},render:function k(){var l=this.props.transfer;if(!c('P2PCreditCardStore').isCreditCardsFetchComplete())return null;return (c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.renderTimeBasedMessage(),primaryActionConfig:{onClick:this.handleClick,text:h._("A\u00f1adir tarjeta")},titleText:h._("Acepta {amount} {currency} de {sender_name}.",[h.param('currency',l.currency),h.param('amount',l.amount),h.param('sender_name',l.sender.name)])}));}});f.exports=j;}),null);
__d('P2PPendingRecipientVerificationJewelBanner.react',['fbt','P2PJewelBanner.react','P2PTransferParam','P2PVerificationFlowHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleClick=function(){c('P2PVerificationFlowHelper').startVerificationFlow(this.props.transfer[c('P2PTransferParam').TRANSFER_ID],false);}.bind(this),n;}l.prototype.render=function(){return (c('React').createElement(c('P2PJewelBanner.react'),{bodyText:h._("Para aceptar el dinero que te ha enviado {sender_name}, confirma tus datos.",[h.param('sender_name',this.props.transfer.sender.name)]),primaryActionConfig:{onClick:this.handleClick,text:h._("Confirmar informaci\u00f3n")},titleText:h._("Confirma tus datos")}));};l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PJewelBannerContainer.react',['cx','CurrentUser','P2PBannerStore','P2PPaymentRequestsStore','P2PPendingPaymentRequestJewelBanner.react','P2PPendingPushFailJewelBanner.react','P2PPendingRecipientNUXJewelBanner.react','P2PPendingRecipientVerificationJewelBanner.react','P2PTransferParam','P2PTransferStatus','P2PTransferStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').createClass({displayName:'P2PJewelBannerContainer',mixins:[c('PureStoreBasedStateMixin')(c('P2PBannerStore'),c('P2PPaymentRequestsStore'),c('P2PTransferStore'))],statics:{calculateState:function j(){var k=c('P2PTransferStore').getNUXTransfer(),l=c('P2PPaymentRequestsStore').getPendingPaymentRequest();return {paymentRequest:l,paymentRequestBannerShown:!!l,transfer:k,transferBannerShown:k&&k.receiver.id==c('CurrentUser').getID()};}},renderTransferBanner:function j(){var k=this.state.transfer,l=k[c('P2PTransferParam').STATUS];switch(l){case c('P2PTransferStatus').PENDING_RECIPIENT_NUX:return (c('React').createElement(c('P2PPendingRecipientNUXJewelBanner.react'),{transfer:k}));case c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION:return (c('React').createElement(c('P2PPendingRecipientVerificationJewelBanner.react'),{transfer:k}));case c('P2PTransferStatus').PENDING_PUSH_FAIL:return (c('React').createElement(c('P2PPendingPushFailJewelBanner.react'),{transfer:k}));}},renderPaymentRequestBanner:function j(){return (c('React').createElement(c('P2PPendingPaymentRequestJewelBanner.react'),{paymentRequest:this.state.paymentRequest}));},render:function j(){var k=void 0;if(this.state.transferBannerShown){k=this.renderTransferBanner();}else if(this.state.paymentRequestBannerShown)k=this.renderPaymentRequestBanner();return (c('React').createElement('div',{className:"_1xfk"},k));}});f.exports=i;}),null);
__d('MercuryThreadlistContainer.react',['Bootloader','immutable','MercuryAPIArgsSource','MercuryFilters','MercuryThreadlistConstants','MessagingTag','P2PJewelBannerContainer.react','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k='search';h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={isLoading:true,isSearching:false,unreadMessageRequestThreads:[],threads:c('immutable').Map()},this.$MercuryThreadlistContainer12=function(){return (c('React').createElement(c('P2PJewelBannerContainer.react'),null));},this.$MercuryThreadlistContainer6=function(r,s){if(r===c('MessagingTag').INBOX&&this.props.source!==c('MercuryAPIArgsSource').JEWEL)this.$MercuryThreadlistContainer13();if(!this.$MercuryThreadlistContainer14(r,s)){this.$MercuryThreadlistContainer15(r,s,this.props.threadCount||c('MercuryThreadlistConstants').JEWEL_THREAD_COUNT+3);}else if(this.state.isLoading){this.setState({isLoading:false},function(){this.$MercuryThreadlistContainer5(r,s);}.bind(this));}else this.$MercuryThreadlistContainer5(r,s);}.bind(this),this.$MercuryThreadlistContainer13=function(){this.$MercuryThreadlistContainer1.getFilteredThreadlist(c('MercuryThreadlistConstants').RECENT_THREAD_OFFSET,c('MercuryThreadlistConstants').MAX_UNREAD_COUNT,c('MessagingTag').PENDING,c('MercuryFilters').UNREAD,this.$MercuryThreadlistContainer16,true,this.props.source);}.bind(this),this.$MercuryThreadlistContainer9=function(){if(!this.state.isSearching&&!this.state.isLoading&&!this.$MercuryThreadlistContainer1.hasLoadedThreadlist(this.props.folder,this.props.filter))this.$MercuryThreadlistContainer15(this.props.folder,this.props.filter,this.$MercuryThreadlistContainer17(this.props.folder)+c('MercuryThreadlistConstants').JEWEL_MORE_COUNT+1);}.bind(this),this.$MercuryThreadlistContainer15=function(r,s,t){if(!this.$MercuryThreadlistContainer1)return;this.$MercuryThreadlistContainer8();this.setState({isLoading:true},function(){var u=this.$MercuryThreadlistContainer1.getFilteredThreadlist(c('MercuryThreadlistConstants').RECENT_THREAD_OFFSET,t,r,s||c('MercuryFilters').ALL,function(v){return this.setState({isLoading:false});}.bind(this),true,this.props.source);this.$MercuryThreadlistContainer18={subscriberID:u,folder:r,filter:s};}.bind(this));}.bind(this),this.$MercuryThreadlistContainer5=function(r,s,t){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;this.$MercuryThreadlistContainer7();var u=t||this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(r,s);this.$MercuryThreadlistContainer19=this.$MercuryThreadlistContainer2.getMultiThreadMeta(u,function(v){this.setState({threads:this.state.threads.set(r,u.map(function(w){return v[w];}))});}.bind(this));}.bind(this),this.$MercuryThreadlistContainer16=function(){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;var r=this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(c('MessagingTag').PENDING,c('MercuryFilters').UNREAD);this.$MercuryThreadlistContainer2.getMultiThreadMeta(r,function(s){this.setState({unreadMessageRequestThreads:r.map(function(t){return s[t];})});}.bind(this));}.bind(this),this.$MercuryThreadlistContainer14=function(r,s){return !!(this.$MercuryThreadlistContainer1&&(this.$MercuryThreadlistContainer1.getThreadCount(r,s)>=c('MercuryThreadlistConstants').JEWEL_THREAD_COUNT+3||this.$MercuryThreadlistContainer1.hasLoadedThreadlist(r,s)));}.bind(this),this.$MercuryThreadlistContainer17=function(r){var s=this.state.threads.get(r);return s?s.length:0;}.bind(this),this.$MercuryThreadlistContainer7=function(){this.$MercuryThreadlistContainer2&&this.$MercuryThreadlistContainer19&&this.$MercuryThreadlistContainer2.unsubscribe(this.$MercuryThreadlistContainer19);}.bind(this),this.$MercuryThreadlistContainer8=function(){this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer18&&this.$MercuryThreadlistContainer1.unsubscribe(this.$MercuryThreadlistContainer18.subscriberID,this.$MercuryThreadlistContainer18.folder,this.$MercuryThreadlistContainer18.filter);}.bind(this),this.$MercuryThreadlistContainer11=function(r,s){this.setState({isLoading:s,searchThreads:[]},function(){return this.$MercuryThreadlistContainer5(k,c('MercuryFilters').ALL,r);}.bind(this));}.bind(this),this.$MercuryThreadlistContainer10=function(r){this.setState({isSearching:!!r});}.bind(this),n;}l.prototype.componentDidMount=function(){c('Bootloader').loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(m,n,o){this.$MercuryThreadlistContainer1=m.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer2=o.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer3=n.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer4=new (c('SubscriptionsHandler'))();this.$MercuryThreadlistContainer4.addSubscriptions(this.$MercuryThreadlistContainer3.subscribe('threadlist-updated',function(p,q){this.$MercuryThreadlistContainer5(this.props.folder,this.props.filter);}.bind(this)));this.$MercuryThreadlistContainer6(this.props.folder,this.props.filter);}.bind(this),'MercuryThreadlistContainer.react');};l.prototype.componentWillReceiveProps=function(m){if(m.folder!==this.props.folder||m.filter!==this.props.filter)this.$MercuryThreadlistContainer6(m.folder,m.filter);};l.prototype.componentWillUnmount=function(){this.$MercuryThreadlistContainer7();this.$MercuryThreadlistContainer8();this.$MercuryThreadlistContainer4&&this.$MercuryThreadlistContainer4.release();};l.prototype.render=function(){var m=this.props,n=m.ChildClass,o=m.folder,p=m.filter,q=babelHelpers.objectWithoutProperties(m,['ChildClass','folder','filter']),r=this.state.isSearching?this.state.threads.get(k)||[]:this.state.threads.get(o)||[];return c('React').createElement(n,babelHelpers['extends']({},q,{filter:this.props.filter,folder:o,isLoaded:!!this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer1.hasLoadedThreadlist(o,p),isLoading:this.state.isLoading,isSearching:this.state.isSearching,newMessageRequestThreads:this.state.unreadMessageRequestThreads,onLoadMoreRequest:this.$MercuryThreadlistContainer9,onQuery:this.$MercuryThreadlistContainer10,onSearchResults:this.$MercuryThreadlistContainer11,p2pJewelBannerContainer:this.$MercuryThreadlistContainer12(),threads:r}));};l.propTypes={ChildClass:j.func.isRequired,filter:j.string.isRequired,folder:j.string.isRequired,showCount:j.bool,showPresence:j.bool,source:j.string,threadCount:j.number,viewer:j.string.isRequired};l.defaultProps={source:c('MercuryAPIArgsSource').JEWEL};f.exports=l;}),null);
__d('MessengerMessageRequestsInfo.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function k(){return (c('React').createElement('div',{className:"_5u15"},i._("Abre una solicitud para saber qui\u00e9n te env\u00eda el mensaje."),' ',i._("No sabr\u00e1s que lo has visto hasta que aceptes.")));};f.exports=j;}),null);
__d('MessengerThreadListGridWrapper.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.label;return (c('React').createElement('div',null,c('React').createElement('h2',{className:"accessible_elem"},m),c('React').createElement('ul',{'aria-label':m,role:'grid'},this.props.children)));};function l(){i.apply(this,arguments);}l.propTypes={label:k.string.isRequired};f.exports=l;}),null);
__d('MessengerThreadlistLinkRow.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=function l(m){return (c('React').createElement('li',{className:"_5l-3 _1ht1 _2ogr"},c('React').createElement('div',{className:"_2ogs"},c('React').createElement(c('Link.react'),{className:"_2ogt",onClick:m.onClick},i._("Ver solicitudes filtradas")))));};k.propTypes={onClick:j.func.isRequired};f.exports=k;}),null);
__d('MessengerThreadlistMessageRequestsRow.react',['cx','fbt','ix','Image.react','ImmutableObject','Link.react','MercuryIDs','MercuryParticipants','MessagingTag','MessengerActions','MNAdsLogMessageUtils','React','shallowEqual'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=50,n=j('/images/mercury/clients/messenger/threadlist/Pending.png'),o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MessengerThreadlistMessageRequestsRow2=function(){return (c('React').createElement('div',{className:"_5l-3 _1qt3 _5nxe"},c('React').createElement(c('Image.react'),{alt:'',height:m,src:n,width:m}),c('React').createElement('span',{className:"_5nxf"},i._({"*":"{count}"},[i.param('count',this.props.newMessageRequestThreads.length,[0])]))));}.bind(this),this.$MessengerThreadlistMessageRequestsRow3=function(){var v=this.props.newMessageRequestThreads,w=i._({"someone":"De alguien que quiz\u00e1 conozcas","people":"De personas que quiz\u00e1 conozcas"},[i['enum'](v.length===1?'someone':'people',{someone:'someone',people:'people'})]),x=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),y=v[0].participants.find(function(aa){return aa!==x;});if(!y)return w;var z=c('MercuryParticipants').getOrFetch(y);if(!z||!z.name)return w;if(v.length>0)c('MNAdsLogMessageUtils').logAdsThreadListImpression(v[0]);return v.length===1?i._("De {name}",[i.param('name',z.name)]):i._({"*":"De {name} y {count} m\u00e1s"},[i.param('name',z.name),i.param('count',v.length-1,[0])]);}.bind(this),this.$MessengerThreadlistMessageRequestsRow1=function(v){v.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').PENDING);},r;}p.prototype.shouldComponentUpdate=function(q){return !c('shallowEqual')(this.props,q);};p.prototype.render=function(){var q=this.props.newMessageRequestThreads.length;if(q===0)return null;return c('React').createElement('li',{className:"_5l-3 _1ht1 _2il3 _2kt",role:'row'},c('React').createElement(c('Link.react'),{onClick:this.$MessengerThreadlistMessageRequestsRow1,className:"_1ht5 _5l-3"},this.$MessengerThreadlistMessageRequestsRow2(),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1ht6 _5nxa"},i._({"Request":"Nueva solicitud de mensaje","Requests":"Solicitudes de mensajes nuevas"},[i['enum'](q===1?'Request':'Requests',{Request:'Request',Requests:'Requests'})]))),c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1htf _5nxb"},this.$MessengerThreadlistMessageRequestsRow3())))));};p.propTypes={newMessageRequestThreads:o.arrayOf(o.instanceOf(c('ImmutableObject'))).isRequired,viewer:o.string.isRequired};f.exports=p;}),null);
__d('MessengerThreadlistNewMessageRow.react',['cx','fbt','ix','Image.react','Link.react','MercuryIDs','MercuryParticipantListRenderer','MercuryParticipants','MercuryParticipantsImage.react','MessengerActions','MessengerComposerStore','MessengerProfileImageWrapper.react','MessengerView','ReactComponentWithPureRenderMixin','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=50,l=j('/images/mercury/clients/messenger/threadlist/NewMessage.png'),m=c('React').PropTypes,n=c('React').createClass({displayName:'MessengerThreadlistNewMessageRow',mixins:[c('ReactComponentWithPureRenderMixin'),c('PureStoreBasedStateMixin')(c('MercuryParticipants'),c('MessengerComposerStore'))],propTypes:{isActive:m.bool,onClose:m.func.isRequired},statics:{calculateState:function o(){return {participants:c('MessengerComposerStore').getState().recipients.map(function(p){return c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(p.getUniqueID()));}).filter(function(p){return !!p;})};}},render:function o(){return (c('React').createElement('li',{className:"_5l-3"+(' '+"_1ht1")+(this.props.isActive?' '+"_1ht2":'')},c('React').createElement(c('Link.react'),{onClick:this._handleClickRow,className:"_1ht5 _2il3 _5l-3"},this._renderImage(),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1ht6"},this._renderTitle()),c('React').createElement('div',{className:"_23ct",onClick:this.props.onClose})),c('React').createElement('div',{className:"_1qt5 _5l-3"},'\u00A0')))));},_renderImage:function o(){var p=this.state.participants;if(!p.isEmpty())return (c('React').createElement('div',{className:"_1qt3 _5l-3"},c('React').createElement(c('MessengerProfileImageWrapper.react'),{isMessengerUser:p.size===1&&p.first().is_messenger_user,size:k,showBadge:p.size===1},c('React').createElement(c('MercuryParticipantsImage.react'),{participants:p.map(function(q){return q.id;}).slice(0,3).toArray(),size:k}))));return (c('React').createElement('div',{className:"_1qt3 _5l-3"},c('React').createElement(c('Image.react'),{height:k,src:l,width:k})));},_renderTitle:function o(){if(this.state.participants.isEmpty())return i._("Nuevo mensaje");return i._("Nuevo mensaje para {List of message recipients}",[i.param('List of message recipients',new (c('MercuryParticipantListRenderer'))().renderParticipantList(this.state.participants.toArray()))]);},_handleClickRow:function o(p){p.preventDefault();c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);}});f.exports=n;}),null);
__d('MercuryThreadlistRowContainer.react',['immutable','ImmutableObject','MercuryParticipants','React','StoreAndPropBasedStateMixin','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'MercuryThreadlistRowContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{ChildClass:h.func.isRequired,thread:h.instanceOf(c('ImmutableObject')).isRequired,viewer:h.string.isRequired},statics:{calculateState:function j(k){return {participants:c('immutable').Map(c('immutable').Seq(k.thread.participants).map(function(l){return [l,c('MercuryParticipants').getOrFetch(l)];}))};}},shouldComponentUpdate:function j(k,l){return (!c('shallowEqual')(k,this.props)||!c('immutable').is(l.participants,this.state.participants));},render:function j(){var k=this.props,l=k.ChildClass,m=babelHelpers.objectWithoutProperties(k,['ChildClass']);return (c('React').createElement(l,babelHelpers['extends']({},m,{participants:this.state.participants})));}});f.exports=i;}),null);
__d('MessengerThreadlistRowSeenHead.react',['cx','Image.react','immutable','ImmutableObject','MercuryIDs','MercuryMessageInfo','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){if(this.props.isHidden||!this.props.thread.is_canonical)return null;var n=this.props,o=n.lastMessage,p=n.participants,q=n.readReceipts,r=n.thread,s=n.viewer,t=c('MercuryIDs').getParticipantIDFromUserID(s),u=c('MercuryIDs').getParticipantIDFromUserID(r.other_user_fbid),v=q.get(u),w=p.get(u),x=v?v.watermark:null;if(!w||!m(t,x,r,o))return null;return (c('React').createElement(c('Image.react'),{className:c('joinClasses')(this.props.className,"_2_a2"),src:w.image_src,title:w.name}));};function l(){i.apply(this,arguments);}l.propTypes={isHidden:k.bool,lastMessage:k.instanceOf(c('ImmutableObject')),participants:k.instanceOf(c('immutable').Map).isRequired,readReceipts:k.instanceOf(c('immutable').OrderedMap).isRequired,thread:k.instanceOf(c('ImmutableObject')).isRequired,viewer:k.string.isRequired};function m(n,o,p,q){if(q){return (q.author===n&&o>=q.timestamp&&!c('MercuryMessageInfo').isSending(q)&&!c('MercuryMessageInfo').hasError(q));}else return (p.snippet_sender===n&&o>=p.timestamp);}f.exports=l;}),null);
__d('MessengerThreadlistRow.react',['cx','fbt','ix','FBRTCCore','Image.react','immutable','ImmutableObject','Link.react','MercuryIDs','MercuryMessageInfo','MercuryThreadSnippet.react','MercuryThreadTimestamp.react','MercuryThreadTitle.react','MercuryTimestamp','MessengerAdminGroupUtils','MessengerButton.react','MessengerThreadImage.react','messengerThreadlistRowActionsReact','MessengerThreadlistRowSeenHead.react','messengerURIUtilsRe','MNAdsMessageUtils','React','ReactDOM','RTCConfig','UserAgent','joinClasses','messengerRTLClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('messengerThreadlistRowActionsReact').comp,n=c('React').PropTypes,o=50,p=j('/images/mercury/clients/messenger/message/messageStateFailed.png'),q=j('/images/mercury/clients/messenger/message/messageStateSending.png');k=babelHelpers.inherits(r,c('React').PureComponent);l=k&&k.prototype;function r(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=l.constructor).call.apply(s,[this].concat(v)),this.state={actionsOpen:false},this.$MessengerThreadlistRow1=0,this.$MessengerThreadlistRow2=null,this.$MessengerThreadlistRow12=function(){var x=this.props.lastMessage;if(this.state.actionsOpen||!x)return null;var y=c('MercuryMessageInfo').isSending(x),z=c('MercuryMessageInfo').hasError(x);if(!y&&!z)return null;return (c('React').createElement(c('Image.react'),{className:"_wtw"+(y?' '+"_3qh2":''),src:y?q:p}));}.bind(this),this.$MessengerThreadlistRow4=function(x){x.preventDefault();this.props.onFocus(this.props.thread.thread_id);}.bind(this),this.$MessengerThreadlistRow5=function(x){this.$MessengerThreadlistRow1++;if(this.$MessengerThreadlistRow2)return;this.$MessengerThreadlistRow2=setTimeout(function(){this.props.onSelect&&this.props.onSelect();this.$MessengerThreadlistRow1=0;this.$MessengerThreadlistRow2=null;}.bind(this),1000);}.bind(this),this.$MessengerThreadlistRow6=function(x){this.$MessengerThreadlistRow1--;if(this.$MessengerThreadlistRow1===0){clearTimeout(this.$MessengerThreadlistRow2);this.$MessengerThreadlistRow2=null;}}.bind(this),this.$MessengerThreadlistRow8=function(x){if(this.props.logClickHandler){var y=this.props.thread.is_canonical?c('MercuryIDs').getUserIDFromThreadID(this.props.thread.thread_id)||'0':this.props.thread.thread_fbid;this.props.logClickHandler&&this.props.logClickHandler(y);}this.$MessengerThreadlistRow9();this.props.onSelect&&this.props.onSelect();x.preventDefault();this.$MessengerThreadlistRow3();}.bind(this),this.$MessengerThreadlistRow13=function(x){this.setState({actionsOpen:x});}.bind(this),this.$MessengerThreadlistRow14=function(x){x.preventDefault();x.stopPropagation();var y=this.props.thread,z=y.rtc_call_data,aa=y.thread_fbid;c('FBRTCCore').startGroupCall({clickSource:'multiway_thread_list_join_call_button',conferenceName:'GROUP:'+aa,hasVideo:true,serverInfoData:z.server_info_data});}.bind(this),this.$MessengerThreadlistRow7=function(x){return 'row_header_id_'+x;},this.$MessengerThreadlistRow3=function(){var x=c('ReactDOM').findDOMNode(this.refs.link);if(x.href){x.setAttribute('data-href',x.href);x.removeAttribute('href');}}.bind(this),this.$MessengerThreadlistRow9=function(){var x=c('ReactDOM').findDOMNode(this.refs.link),y=x.getAttribute('data-href');if(y){x.setAttribute('href',y);x.removeAttribute('data-href');}}.bind(this),t;}r.prototype.componentDidMount=function(){this.$MessengerThreadlistRow3();};r.prototype.componentDidUpdate=function(s){if(this.props.isFocused)if(!s.isFocused){if(this.props.isActionsFocused){c('ReactDOM').findDOMNode(this.refs.actions.refs.button).focus();}else c('ReactDOM').findDOMNode(this.refs.link).focus();}else if(!s.isActionsFocused&&this.props.isActionsFocused){c('ReactDOM').findDOMNode(this.refs.actions.refs.button).focus();}else if(s.isActionsFocused&&!this.props.isActionsFocused)c('ReactDOM').findDOMNode(this.refs.link).focus();};r.prototype.render=function(){var s=this.props,t=s.isActive,u=s.isActionsFocused,v=s.isTabbable,w=s.participants,x=s.thread,y=s.viewer,z=x.unread_count>0,aa=c('messengerURIUtilsRe').getURIForThreadID(x.thread_id),ba=c('MessengerAdminGroupUtils').isJoinableThread(x);return c('React').createElement('li',{'aria-live':z?'polite':null,'aria-relevant':t||z?'additions text':null,onFocus:this.$MessengerThreadlistRow4,className:"_5l-3"+(' '+"_1ht1")+(this.props.isActive?' '+"_1ht2":'')+(z?' '+"_1ht3":'')+(this.state.actionsOpen?' '+"_13aa":'')+(this.props.isMuted?' '+"_569x":'')+(this.props.isFocused?' '+"_23_m":'')+(z&&c('UserAgent').isBrowser('Chrome')&&c('UserAgent').isPlatform('Mac')?' '+"_5fx8":''),onDragEnter:t?null:this.$MessengerThreadlistRow5,onDragLeave:t?null:this.$MessengerThreadlistRow6,role:'row',ref:function(ca){return ca&&this.props.registerThreadRefs&&this.props.registerThreadRefs(ca);}.bind(this)},c('React').createElement('div',{className:"_5l-3 _1ht5",id:this.$MessengerThreadlistRow7(x.thread_id),role:'rowheader',tabIndex:-1},c('React').createElement(c('Link.react'),{href:aa.toString(),onBlur:this.$MessengerThreadlistRow3,onClick:this.$MessengerThreadlistRow8,onFocus:this.$MessengerThreadlistRow9,className:"_1ht5 _2il3 _5l-3",s:'true',ref:'link',role:'link',tabIndex:v&&!u?0:-1},c('React').createElement('div',{className:"_1qt3 _5l-3"},c('React').createElement(c('MessengerThreadImage.react'),{participants:w,size:o,thread:x,viewer:y})),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement(c('MercuryThreadTitle.react'),{className:"_1ht6",showUnreadCount:false,thread:x,useShortName:false,viewer:y}),c('React').createElement('div',null,c('MNAdsMessageUtils').isAdsMessageRequest(x)?c('MNAdsMessageUtils').renderAdsMessageRequestStatus():this.$MessengerThreadlistRow10(x))),c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement(c('MercuryThreadSnippet.react'),{className:c('joinClasses')("_1htf",c('messengerRTLClasses')(x.snippet,true)),participants:w,shouldRenderYou:true,thread:x,viewer:y})),this.$MessengerThreadlistRow11()))),c('React').createElement('div',{role:'gridcell'},c('React').createElement('div',{'aria-describedby':this.$MessengerThreadlistRow7(x.thread_id),'aria-haspopup':'true','aria-label':i._("Acciones"),className:"_2j6 _5l-3",tabIndex:v&&u?0:-1,role:'button'},c('React').createElement(c('MessengerThreadlistRowSeenHead.react'),{className:"_5bli",isHidden:this.state.actionsOpen,lastMessage:this.props.lastMessage,participants:w,readReceipts:this.props.readReceipts,thread:x,viewer:y}),this.$MessengerThreadlistRow12(),c('React').createElement(m,{className:"_5blh",isMessengerRoom:ba,isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isUnread:z,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onToggle:this.$MessengerThreadlistRow13,onUnmute:this.props.onUnmute,showLeaveGroup:this.props.showLeaveGroup,showMute:true,ref:'actions'}),c('React').createElement('div',{className:"_56ck"}))));};r.prototype.$MessengerThreadlistRow10=function(s){return c('React').createElement(c('MercuryThreadTimestamp.react'),{className:"_1ht7",time:s.timestamp,title:c('MercuryTimestamp').getAbsoluteTimestamp(s.timestamp),text:c('MercuryTimestamp').getRelativeTimestamp(s.timestamp)});};r.prototype.$MessengerThreadlistRow11=function(){if(!c('RTCConfig').RtcConferencingGK||!this.props.thread.rtc_call_data||this.props.thread.rtc_call_data.call_state==='NO_ONGOING_CALL')return null;return c('React').createElement(c('MessengerButton.react'),{className:"_4ry5",label:i._("Unirte a la llamada"),onClick:this.$MessengerThreadlistRow14,type:'primary'});};r.propTypes={isActive:n.bool.isRequired,isActionsFocused:n.bool,isFocused:n.bool,isMuted:n.bool.isRequired,lastMessage:n.instanceOf(c('ImmutableObject')),logClickHandler:n.func,onArchive:n.func.isRequired,onDelete:n.func.isRequired,onMarkRead:n.func.isRequired,onMarkSpam:n.func.isRequired,onMarkUnread:n.func.isRequired,onMute:n.func.isRequired,onSelect:n.func.isRequired,onUnmute:n.func.isRequired,participants:n.instanceOf(c('immutable').Map).isRequired,readReceipts:n.instanceOf(c('immutable').OrderedMap).isRequired,registerThreadRefs:n.func,thread:n.instanceOf(c('ImmutableObject')).isRequired,viewer:n.string.isRequired};f.exports=r;}),null);
__d('MessengerThreadlistRowContainer.react',['ImmutableObject','MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercuryMessages','MercuryRoger','MercuryThreadActions','MercuryThreadInfo','MercuryThreadlistRowContainer.react','MercuryTriodeSourceUtil','MessengerActions','MessengerConfirmLeaveGroupDialog.react','MessengerAdminGroupUtils','MessengerThreadlistRow.react','ReactComponentWithPureRenderMixin','React','ReactDOM','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryRoger').get(),i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerThreadlistRowContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryMessages'),h)],propTypes:{isActive:i.bool.isRequired,isTabbable:i.bool,thread:i.instanceOf(c('ImmutableObject')).isRequired,viewer:i.string.isRequired},statics:{calculateState:function k(l){var m=c('MercuryMessages').getForFBID(l.viewer),n=l.thread.thread_id,o=m.getThreadMessagesRangeNow(n,0,1)[0];return {lastMessage:o||null,readReceipts:h.getSeenTimestamps(n)};}},componentDidUpdate:function k(l){if(this.props.isActive&&!l.isActive)this.props.onScrollIntoView(c('ReactDOM').findDOMNode(this));},render:function k(){return (c('React').createElement(c('MercuryThreadlistRowContainer.react'),babelHelpers['extends']({},this.props,{ChildClass:c('MessengerThreadlistRow.react'),isMuted:c('MercuryThreadInfo').isMuted(this.props.thread),lastMessage:this.state.lastMessage,onArchive:this._handleArchive,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onSelect:this._handleSelect,onUnmute:this._handleUnmute,readReceipts:this.state.readReceipts,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical})));},_handleArchive:function k(){var l=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);l&&c('MessengerActions').selectThread(null);},_handleDelete:function k(){var l=this.props.isActive;this._getThreadActions()['delete'](this.props.thread.thread_id);l&&c('MessengerActions').selectThread(null);},_handleMarkRead:function k(){this._getThreadActions().markRead(this.props.thread.thread_id);},_handleMarkSpam:function k(){var l=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);l&&c('MessengerActions').selectThread(null);},_handleMarkUnread:function k(){this._getThreadActions().markUnread(this.props.thread.thread_id);},_handleMute:function k(l){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,l);},_handleSelect:function k(){c('MessengerActions').selectThread(this.props.thread.thread_id);},_handleUnmute:function k(){this._getThreadActions().unmute(this.props.thread.thread_id);},_handleLeaveGroup:function k(){if(this.props.viewer){var l=c('MessengerAdminGroupUtils').isViewerAdmin(this.props.thread.admin_ids,this.props.viewer);c('MessengerActions').showDialog(c('MessengerConfirmLeaveGroupDialog.react'),{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:l});}},_onLeaveGroupConfirm:function k(){if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread)){var l=this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),this.props.thread.thread_id,c('MercuryLogMessageType').UNSUBSCRIBE,{removed_participants:[c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(l);}},_getThreadActions:function k(){return c('MercuryThreadActions').getForFBID(this.props.viewer);},_getMessageActions:function k(){return c('MercuryMessageActions').getForFBID(this.props.viewer);},_getMessageObject:function k(){return c('MercuryMessageObject').getForFBID(this.props.viewer);}});f.exports=j;}),null);
__d('ModularInboxLabels',['fbt'],(function a(b,c,d,e,f,g,h){var i=h._("Lista de conversaciones");f.exports={conversationList:i};}),null);
__d("XMessengerModularInboxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/modular_inbox\/",{});}),null);
__d('ModularInboxLogger',['AsyncRequest','XMessengerModularInboxController'],(function a(b,c,d,e,f,g){'use strict';var h={logUnitClick:function i(j,k,l){var m=c('XMessengerModularInboxController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(m).setData({event:'item_click',logging_data:j,module_id:k,target_id:l}).setMethod('POST').setAllowCrossPageTransition(true).send();},logSeeMoreClick:function i(j,k){var l=c('XMessengerModularInboxController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(l).setData({event:'unit_click_see_more',logging_data:j,module_id:k}).setMethod('POST').setAllowCrossPageTransition(true).send();},logItemImpression:function i(j,k,l){var m=c('XMessengerModularInboxController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(m).setData({event:'item_impression',logging_data:j,module_id:k,impression_ids:l}).setMethod('POST').setAllowCrossPageTransition(true).send();}};f.exports=h;}),null);
__d('ModularInboxModuleFooter.react',['ix','cx','fbt','Image.react','Link.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=function m(n){return (c('React').createElement(c('Link.react'),{'aria-label':j._("Ver m\u00e1s contactos"),className:"_4iuc",onClick:n.onClickHandler,role:'button'},j._("Ver todo"),c('React').createElement(c('Image.react'),{className:"_4iuf",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-right_12_fig-blue.png")})));};l.propTypes={onClickHandler:k.func.isRequired};f.exports=l;}),null);
__d('ModularInboxHideUnitMutation',['Relay','RelayMutationType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Relay').Mutation);i=h&&h.prototype;j.prototype.getMutation=function(){return function(){return {calls:[{kind:'Call',metadata:{},name:'messenger_inbox_unit_record_action',value:{kind:'CallVariable',callVariableName:'input'}}],children:[{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],kind:'Mutation',metadata:{inputType:'MessengerInboxUnitRecordActionData!'},name:'ModularInboxHideUnitMutation',responseType:'MessengerInboxUnitRecordActionResponsePayload'};}();};j.prototype.getVariables=function(){return {client_mutation_id:this.props.client_mutation_id,actor_id:this.props.actor_id,unit_id:this.props.unit_id,action_type:this.props.action_type,unit_logging_data:this.props.unit_logging_data};};j.prototype.getFatQuery=function(){return function(){return {children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'messenger_inbox_unit_hides_remaining',kind:'Field',metadata:{},type:'Int'}],fieldName:'messenger_inbox_unit',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'MessengerInboxUnit'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'ModularInboxHideUnitMutationRelayQL',type:'MessengerInboxUnitRecordActionResponsePayload'};}();};j.prototype.getConfigs=function(){return [{type:c('RelayMutationType').FIELDS_CHANGE,fieldIDs:{messenger_inbox_unit:this.props.unit_id}}];};j.prototype.getOptimisticResponse=function(){return {messenger_inbox_unit:{id:this.props.unit_id,messenger_inbox_unit_hides_remaining:0}};};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('ModularInboxModuleHeader.react',['cx','fbt','CurrentUser','Link.react','MessengerMenu.react','MessengerPopoverMenu.react','ModularInboxHideUnitMutation','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('MessengerMenu.react').Item;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ModularInboxModuleHeader3=function(){this.props.onHideHandler&&this.props.onHideHandler();var t=c('CurrentUser').getID();this.props.relay.commitUpdate(new (c('ModularInboxHideUnitMutation'))({client_mutation_id:t,actor_id:t,unit_id:this.props.headerData.id,action_type:'HIDE',unit_logging_data:this.props.headerData.messenger_inbox_unit_logging_data}));}.bind(this),p;}n.prototype.render=function(){return c('React').createElement('div',{className:"_1rqg"},c('React').createElement('div',{className:"_1rqh"},this.props.headerData.messenger_inbox_unit_title.text,this.$ModularInboxModuleHeader1()),this.props.showSettings?c('React').createElement(c('MessengerPopoverMenu.react'),{menu:this.$ModularInboxModuleHeader2()},c('React').createElement(c('Link.react'),{'aria-haspopup':'true','aria-label':i._("Opciones del m\u00f3dulo"),className:"_1rqi",role:'button'})):null);};n.prototype.$ModularInboxModuleHeader1=function(){if(this.props.showCount&&this.props.count&&this.props.count>0)return c('React').createElement('span',null,' ('+this.props.count+')');return null;};n.prototype.$ModularInboxModuleHeader2=function(){return c('React').createElement(c('MessengerMenu.react'),null,c('React').createElement(m,{label:i._("Ocultar secci\u00f3n"),onclick:this.$ModularInboxModuleHeader3}));};n.PropTypes={count:l.number,headerData:l.object.isRequired,onHideHandler:l.func,showCount:l.bool,showSettings:l.bool.isRequired};f.exports=c('Relay').createContainer(n,{fragments:{headerData:function o(){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'messenger_inbox_unit_logging_data',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'messenger_inbox_unit_title',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'ModularInboxModuleHeader_react_HeaderDataRelayQL',type:'MessengerInboxUnit'};}();}}});}),null);
__d('ModularInboxActiveNowModule.react',['cx','AvailableListConstants','Image.react','Map','MercuryIDs','MercuryParticipants','MessengerActions','MessengerHorizontalScroll.react','MessengerProfileImageWrapper.react','MessengerResponsiveBlock.react','MessengerView','ModularInboxLogger','ModularInboxModuleFooter.react','ModularInboxModuleHeader.react','PresenceOrderedList','PresencePrivacy','PresenceStatusStore','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=200,m=50;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.$ModularInboxActiveNowModule1={};this.$ModularInboxActiveNowModule2=null;this.$ModularInboxActiveNowModule3=null;this.$ModularInboxActiveNowModule8=function(){c('MessengerActions').changeMasterView(c('MessengerView').MASTER.PEOPLE);var q=this.props.activeNowData;c('ModularInboxLogger').logSeeMoreClick(q.messenger_inbox_unit_logging_data,q.id);}.bind(this);this.$ModularInboxActiveNowModule9=function(q,r){var s=this.state.rankedUsers.get(q),t=this.state.rankedUsers.get(r);if(s===undefined||t===undefined)return 0;if(s<t){return -1;}else if(s>t)return 1;return 0;}.bind(this);this.$ModularInboxActiveNowModule4=function(){c('PresenceOrderedList').getSorted(l,function(q){var r=c('PresenceOrderedList').getAvailableSorted(q),s=q.filter(function(v){return c('PresencePrivacy').allows(v);}),t=s.concat(r).filter(function(v){return c('PresenceStatusStore').get(v)===c('AvailableListConstants').ACTIVE;});if(this.state.rankedUsers.size!==0)t=t.filter(function(v){return this.state.rankedUsers.get(v)!==undefined;}.bind(this)).sort(this.$ModularInboxActiveNowModule9);t=t.map(function(v){return c('MercuryIDs').getParticipantIDFromUserID(v);}).map(function(v){return c('MercuryParticipants').getOrFetch(v);}).filter(function(v){return !!v;});var u=t.filter(Boolean).filter(function(v){return v&&v.big_image_src===undefined;}).map(function(v){return v.id;});if(u.length!==0)c('MercuryParticipants').getBigImageMulti(u,function(){this.$ModularInboxActiveNowModule4();}.bind(this));this.setState({onlineUsers:t});}.bind(this));}.bind(this);var p=new (c('Map'))();o.activeNowData.messenger_inbox_unit_items.map(function(q,r){p.set(q.messenger_inbox_item_attachment.user_id,r);});this.state={onlineUsers:[],rankedUsers:p};}n.prototype.componentWillMount=function(){this.$ModularInboxActiveNowModule2=c('MercuryParticipants').addListener('change',this.$ModularInboxActiveNowModule4);this.$ModularInboxActiveNowModule3=c('PresenceStatusStore').addListener(function(){this.$ModularInboxActiveNowModule4;}.bind(this));this.$ModularInboxActiveNowModule4();};n.prototype.componentWillUnmount=function(){this.$ModularInboxActiveNowModule2&&this.$ModularInboxActiveNowModule2.remove();this.$ModularInboxActiveNowModule3&&this.$ModularInboxActiveNowModule3.remove();};n.prototype.render=function(){var o,p=this;if(this.state.onlineUsers.length===0||this.props.activeNowData.messenger_inbox_unit_hides_remaining===0)return null;var q=[];for(var r=this.state.onlineUsers,s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var u;if(s){if(t>=r.length)break;u=r[t++];}else{t=r.next();if(t.done)break;u=t.value;}var v=u;if(!v||!v.fbid){continue;}else (function(){var w=v.fbid;q.push(c('React').createElement('div',{className:"_4a57",key:w,onClick:function(){return this.$ModularInboxActiveNowModule5(w);}.bind(p),role:'button',ref:function(x){return x&&this.$ModularInboxActiveNowModule6(w,x);}.bind(p)},c('React').createElement(c('MessengerProfileImageWrapper.react'),{className:"_4a58",renderOnlineStatus:true,isMessengerUser:v.is_messenger_user,size:m,showBadge:true},c('React').createElement(c('Image.react'),{className:"_4a59",src:v.big_image_src||v.image_src})),c('React').createElement('div',{className:"_4a5a"},v.short_name)));})();}return c('React').createElement('div',{ref:function(w){return w&&this.$ModularInboxActiveNowModule7(w);}.bind(this)},c('React').createElement(c('ModularInboxModuleHeader.react'),{count:this.state.onlineUsers.length,headerData:this.props.activeNowData,onHideHandler:this.props.onHideHandler,showCount:true,showSettings:true}),c('React').createElement(c('MessengerResponsiveBlock.react'),{breakpointsToggles:function w(x){return [x];}},function(w){var x=w[0];if(x===null)return null;var y=5;if(x<=380&&x>=310){y=4;}else if(x<310)y=3;return c('React').createElement(c('MessengerHorizontalScroll.react'),{key:this.state.onlineUsers.length,batchScroll:true,childPadding:8,childWidth:65,leftOffset:7,numChildrenVisible:y,width:x},q);}.bind(this)),this.props.activeNowData.messenger_inbox_unit_should_show_see_more&&c('React').createElement(c('ModularInboxModuleFooter.react'),{onClickHandler:this.$ModularInboxActiveNowModule8}));};n.prototype.$ModularInboxActiveNowModule6=function(o,p){this.$ModularInboxActiveNowModule1[o]=p;};n.prototype.$ModularInboxActiveNowModule7=function(o){if(Object.keys(this.$ModularInboxActiveNowModule1).length!==0){this.props.registerModularInboxData(this.props.activeNowData.id,{ref:o,refs:this.$ModularInboxActiveNowModule1,loggingData:this.props.activeNowData.messenger_inbox_unit_logging_data});this.$ModularInboxActiveNowModule1={};}};n.prototype.$ModularInboxActiveNowModule5=function(o){var p=this.props.activeNowData,q=c('MercuryIDs').getThreadIDFromUserID(o);c('MessengerActions').selectThread(q);c('ModularInboxLogger').logUnitClick(p.messenger_inbox_unit_logging_data,p.id,o);};n.propTypes={activeNowData:k.object.isRequired,onHideHandler:k.func.isRequired,registerModularInboxData:k.func.isRequired};f.exports=c('Relay').createContainer(n,{fragments:{activeNowData:function o(){return function(p){return {children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'messenger_inbox_unit_logging_data',kind:'Field',metadata:{},type:'String'},{fieldName:'messenger_inbox_unit_hides_remaining',kind:'Field',metadata:{},type:'Int'},{fieldName:'messenger_inbox_unit_should_show_see_more',kind:'Field',metadata:{},type:'Boolean'},{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'user_id',kind:'Field',metadata:{},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerInbox2ItemUserIDAttachment',type:'MessengerInbox2ItemUserIDAttachment'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],fieldName:'messenger_inbox_item_attachment',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true},type:'MessengerInboxItemAttachment'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'messenger_inbox_unit_items',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isPlural:true},type:'MessengerInboxItem'},c('RelayQL').__frag(p)]),id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'ModularInboxActiveNowModule_react_ActiveNowDataRelayQL',type:'MessengerInboxUnit'};}(c('ModularInboxModuleHeader.react').getFragment('headerData'));}}});}),null);
__d('ModularInboxThreadlistRow.react',['cx','messengerContactImageReact','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('messengerContactImageReact').comp,j=c('React').PropTypes,k=function l(m){return (c('React').createElement('div',{className:"_1mcf",'data-hover':'tooltip','data-tooltip-content':m.contactMessage,'data-tooltip-display':'overflow','data-tooltip-position':'right',onClick:function n(){return m.onClickHandler(m.birthdayUser.id);},role:'button',ref:function n(o){return o&&m.registerThreadRefs&&m.registerThreadRefs(o);}},c('React').createElement(i,{isMessengerUser:m.birthdayUser.is_messenger_user,size:50,src:m.birthdayUser.profile_picture.uri}),c('React').createElement('div',{className:"_1mch"},c('React').createElement('div',{className:"_1mci"},m.birthdayUser.name),c('React').createElement('div',{className:"_1mcj"},m.glyph,c('React').createElement('div',{className:"_1mck"},m.contactMessage)))));};k.propTypes={birthdayUser:j.object.isRequired,contactMessage:j.any.isRequired,glyph:j.object,onClickHandler:j.func.isRequired,registerThreadRefs:j.func};f.exports=c('Relay').createContainer(k,{fragments:{birthdayUser:function l(){return function(){return {children:[{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'is_messenger_user',kind:'Field',metadata:{},type:'Boolean'},{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'ModularInboxThreadlistRow_react_BirthdayUserRelayQL',type:'User'};}();}}});}),null);
__d('ModularInboxBirthdaysModule.react',['ix','cx','fbt','Image.react','MercuryIDs','MessengerActions','ModularInboxLogger','ModularInboxModuleHeader.react','ModularInboxThreadlistRow.react','React','Relay','RelayQL','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$ModularInboxBirthdaysModule1={},this.$ModularInboxBirthdaysModule2=function(t){var u=this.props.birthdayData,v=c('MercuryIDs').getThreadIDFromUserID(t);c('MessengerActions').selectThread(v);c('ModularInboxLogger').logUnitClick(u.messenger_inbox_unit_logging_data,u.id,t);}.bind(this),p;}n.prototype.render=function(){if(this.props.birthdayData.messenger_inbox_unit_hides_remaining===0)return null;var o=j._("Env\u00eda un mensaje de cumplea\u00f1os"),p=c('React').createElement(c('Image.react'),{className:"_5m_-",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/cake_16_fig-light-30.png")}),q=this.props.birthdayData.messenger_inbox_unit_items,r=q.map(function(s){var t=s.messenger_inbox_item_attachment.item_user;return c('React').createElement(c('ModularInboxThreadlistRow.react'),{birthdayUser:t,contactMessage:o,key:t.id,onClickHandler:this.$ModularInboxBirthdaysModule2,glyph:p,registerThreadRefs:this.$ModularInboxBirthdaysModule3.bind(this,t.id)});}.bind(this));return c('React').createElement('div',{ref:function(s){return s&&this.$ModularInboxBirthdaysModule4(s);}.bind(this)},c('React').createElement(c('ModularInboxModuleHeader.react'),{headerData:this.props.birthdayData,onHideHandler:this.props.onHideHandler,showSettings:true}),c('React').createElement('div',null,r));};n.prototype.$ModularInboxBirthdaysModule3=function(o,p){this.$ModularInboxBirthdaysModule1[o]=p;};n.prototype.$ModularInboxBirthdaysModule4=function(o){if(Object.keys(this.$ModularInboxBirthdaysModule1).length!==0){this.props.registerModularInboxData(this.props.birthdayData.id,{ref:o,refs:this.$ModularInboxBirthdaysModule1,loggingData:this.props.birthdayData.messenger_inbox_unit_logging_data});this.$ModularInboxBirthdaysModule1={};}};n.propTypes={birthdayData:m.object.isRequired,onHideHandler:m.func.isRequired,registerModularInboxData:m.func.isRequired};f.exports=c('Relay').createContainer(n,{fragments:{birthdayData:function o(){return function(p,q){return {children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'messenger_inbox_unit_logging_data',kind:'Field',metadata:{},type:'String'},{fieldName:'messenger_inbox_unit_hides_remaining',kind:'Field',metadata:{},type:'Int'},{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},c('RelayQL').__frag(q)]),fieldName:'item_user',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'User'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerConversationStarterItem',type:'MessengerConversationStarterItem'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],fieldName:'messenger_inbox_item_attachment',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true},type:'MessengerInboxItemAttachment'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'messenger_inbox_unit_items',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isPlural:true},type:'MessengerInboxItem'},c('RelayQL').__frag(p)]),id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'ModularInboxBirthdaysModule_react_BirthdayDataRelayQL',type:'MessengerInboxUnit'};}(c('ModularInboxModuleHeader.react').getFragment('headerData'),c('ModularInboxThreadlistRow.react').getFragment('birthdayUser'));}}});}),null);
__d('ModularInboxFavoritesModule.react',['cx','MercuryIDs','MessengerActions','messengerContactImageReact','MessengerHorizontalScroll.react','MessengerResponsiveBlock.react','ModularInboxLogger','ModularInboxModuleHeader.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerContactImageReact').comp,l=c('React').PropTypes,m=50;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$ModularInboxFavoritesModule1={},p;}n.prototype.render=function(){if(this.props.favoritesData.messenger_inbox_unit_hides_remaining===0)return null;var o=this.props.favoritesData.messenger_inbox_unit_items,p=o.map(function(q){var r=q.messenger_inbox_item_attachment.user;return (c('React').createElement('div',{className:"_5t9x",key:r.id,onClick:function(){return this.$ModularInboxFavoritesModule2(r.id);}.bind(this),role:'button',ref:function(s){return s&&this.$ModularInboxFavoritesModule3(r.id,s);}.bind(this)},c('React').createElement(k,{className:"_2bde",isMessengerUser:r.is_messenger_user,size:m,src:r.profile_picture.uri}),c('React').createElement('div',{className:"_5tww"},r.first_name)));}.bind(this));return (c('React').createElement('div',{ref:function(q){return q&&this.$ModularInboxFavoritesModule4(q);}.bind(this)},c('React').createElement(c('ModularInboxModuleHeader.react'),{headerData:this.props.favoritesData,onHideHandler:this.props.onHideHandler,showSettings:true}),c('React').createElement(c('MessengerResponsiveBlock.react'),{breakpointsToggles:function q(r){return [r];}},function(q){var r=q[0];if(r===null)return null;var s=5;if(r<=380&&r>=310){s=4;}else if(r<310)s=3;return (c('React').createElement(c('MessengerHorizontalScroll.react'),{batchScroll:true,childPadding:8,childWidth:65,leftOffset:7,numChildrenVisible:s,width:r},p));})));};n.prototype.$ModularInboxFavoritesModule3=function(o,p){this.$ModularInboxFavoritesModule1[o]=p;};n.prototype.$ModularInboxFavoritesModule4=function(o){if(Object.keys(this.$ModularInboxFavoritesModule1).length!==0){this.props.registerModularInboxData(this.props.favoritesData.id,{ref:o,refs:this.$ModularInboxFavoritesModule1,loggingData:this.props.favoritesData.messenger_inbox_unit_logging_data});this.$ModularInboxFavoritesModule1={};}};n.prototype.$ModularInboxFavoritesModule2=function(o){var p=this.props.favoritesData,q=c('MercuryIDs').getThreadIDFromUserID(o);c('MessengerActions').selectThread(q);c('ModularInboxLogger').logUnitClick(p.messenger_inbox_unit_logging_data,p.id,o);};n.propTypes={favoritesData:l.object.isRequired,onHideHandler:l.func.isRequired,registerModularInboxData:l.func.isRequired};f.exports=c('Relay').createContainer(n,{fragments:{favoritesData:function o(){return function(p){return {children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'messenger_inbox_unit_logging_data',kind:'Field',metadata:{},type:'String'},{fieldName:'messenger_inbox_unit_hides_remaining',kind:'Field',metadata:{},type:'Int'},{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{children:[{fieldName:'first_name',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'is_messenger_user',kind:'Field',metadata:{},type:'Boolean'},{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'}],fieldName:'user',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'User'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerPYMMUser',type:'MessengerPYMMUser'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],fieldName:'messenger_inbox_item_attachment',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true},type:'MessengerInboxItemAttachment'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'messenger_inbox_unit_items',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isPlural:true},type:'MessengerInboxItem'},c('RelayQL').__frag(p)]),id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'ModularInboxFavoritesModule_react_FavoritesDataRelayQL',type:'MessengerInboxUnit'};}(c('ModularInboxModuleHeader.react').getFragment('headerData'));}}});}),null);
__d('ModularInboxRecentThreadsModule.react',['ImmutableObject','MessengerThreadListGridWrapper.react','MessengerThreadlistRowContainer.react','ModularInboxLabels','ModularInboxLogger','React','Relay','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$ModularInboxRecentThreadsModule1={},this.logItemClick=function(q){var r=this.props.recentThreadsData;c('ModularInboxLogger').logUnitClick(r.messenger_inbox_unit_logging_data,r.id,q);}.bind(this),m;}k.prototype.render=function(){var l=this.props.threads.map(function(m){return (c('React').createElement(c('MessengerThreadlistRowContainer.react'),{isActive:m.thread_id===this.props.activeThreadID,isFocused:m.thread_id===this.props.focusedThreadID,isActionsFocused:this.props.isThreadActionMenuFocused,isTabbable:!!(m.thread_id===this.props.activeThreadID&&!this.props.focusedThreadID)||m.thread_id===this.props.focusedThreadID,key:m.thread_id,logClickHandler:this.logItemClick,onFocus:this.props.onFocusHandler,onScrollIntoView:this.props.onScrollIntoViewHandler,registerThreadRefs:this.$ModularInboxRecentThreadsModule2.bind(this,m.thread_fbid),thread:m,viewer:this.props.viewer}));}.bind(this));return (c('React').createElement('div',{ref:function(m){return m&&this.$ModularInboxRecentThreadsModule3(m);}.bind(this)},c('React').createElement(c('MessengerThreadListGridWrapper.react'),{label:c('ModularInboxLabels').conversationList},l)));};k.prototype.$ModularInboxRecentThreadsModule2=function(l,m){this.$ModularInboxRecentThreadsModule1[l]=m;};k.prototype.$ModularInboxRecentThreadsModule3=function(l){if(Object.keys(this.$ModularInboxRecentThreadsModule1).length!==0){this.props.registerModularInboxData(this.props.recentThreadsData.id,{ref:l,refs:this.$ModularInboxRecentThreadsModule1,loggingData:this.props.recentThreadsData.messenger_inbox_unit_logging_data});this.$ModularInboxRecentThreadsModule1={};}};k.propTypes={recentThreadsData:j.object.isRequired,activeThreadID:j.string,focusedThreadID:j.string,isThreadActionMenuFocused:j.bool.isRequired,onFocusHandler:j.func.isRequired,onScrollIntoViewHandler:j.func.isRequired,registerModularInboxData:j.func.isRequired,threads:j.arrayOf(j.instanceOf(c('ImmutableObject'))).isRequired,viewer:j.string.isRequired};f.exports=c('Relay').createContainer(k,{fragments:{recentThreadsData:function l(){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'messenger_inbox_unit_logging_data',kind:'Field',metadata:{},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'ModularInboxRecentThreadsModule_react_RecentThreadsDataRelayQL',type:'MessengerInboxUnit'};}();}}});}),null);
__d('ModularInboxRemainingThreadsModule.react',['ImmutableObject','MessengerThreadListGridWrapper.react','MessengerThreadlistRowContainer.react','ModularInboxLabels','ModularInboxLogger','ModularInboxModuleHeader.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$ModularInboxRemainingThreadsModule1={},this.logItemClick=function(q){var r=this.props.remainingThreadsData;c('ModularInboxLogger').logUnitClick(r.messenger_inbox_unit_logging_data,r.id,q);}.bind(this),m;}k.prototype.render=function(){var l=this.props.threads.map(function(m){return (c('React').createElement(c('MessengerThreadlistRowContainer.react'),{isActive:m.thread_id===this.props.activeThreadID,isFocused:m.thread_id===this.props.focusedThreadID,isActionsFocused:this.props.isThreadActionMenuFocused,isTabbable:!!(m.thread_id===this.props.activeThreadID&&!this.props.focusedThreadID)||m.thread_id===this.props.focusedThreadID,key:m.thread_id,logClickHandler:this.logItemClick,onFocus:this.props.onFocusHandler,onScrollIntoView:this.props.onScrollIntoViewHandler,registerThreadRefs:this.$ModularInboxRemainingThreadsModule2.bind(this,m.thread_fbid),thread:m,viewer:this.props.viewer}));}.bind(this));return (c('React').createElement('div',{ref:function(m){return m&&this.$ModularInboxRemainingThreadsModule3(m);}.bind(this)},c('React').createElement(c('ModularInboxModuleHeader.react'),{headerData:this.props.remainingThreadsData,showSettings:false}),c('React').createElement(c('MessengerThreadListGridWrapper.react'),{label:c('ModularInboxLabels').conversationList},l)));};k.prototype.$ModularInboxRemainingThreadsModule2=function(l,m){this.$ModularInboxRemainingThreadsModule1[l]=m;};k.prototype.$ModularInboxRemainingThreadsModule3=function(l){if(Object.keys(this.$ModularInboxRemainingThreadsModule1).length!==0){this.props.registerModularInboxData(this.props.remainingThreadsData.id,{ref:l,refs:this.$ModularInboxRemainingThreadsModule1,loggingData:this.props.remainingThreadsData.messenger_inbox_unit_logging_data});this.$ModularInboxRemainingThreadsModule1={};}};k.propTypes={remainingThreadsData:j.object.isRequired,activeThreadID:j.string,focusedThreadID:j.string,isThreadActionMenuFocused:j.bool.isRequired,onFocusHandler:j.func.isRequired,onScrollIntoViewHandler:j.func.isRequired,registerModularInboxData:j.func.isRequired,threads:j.arrayOf(j.instanceOf(c('ImmutableObject'))).isRequired,viewer:j.string.isRequired};f.exports=c('Relay').createContainer(k,{fragments:{remainingThreadsData:function l(){return function(m){return {children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'messenger_inbox_unit_logging_data',kind:'Field',metadata:{},type:'String'},c('RelayQL').__frag(m)]),id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'ModularInboxRemainingThreadsModule_react_RemainingThreadsDataRelayQL',type:'MessengerInboxUnit'};}(c('ModularInboxModuleHeader.react').getFragment('headerData'));}}});}),null);
__d('ModularInboxView.react',['ImmutableObject','MessengerInbox2UnitType','MessengerResponsiveBlock.react','MessengerThreadlistRowContainer.react','ModularInboxActiveNowModule.react','ModularInboxBirthdaysModule.react','ModularInboxFavoritesModule.react','ModularInboxModuleHeader.react','ModularInboxRecentThreadsModule.react','ModularInboxRemainingThreadsModule.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=5,l=60*60*1000,m=100,n=[c('MessengerInbox2UnitType').MOST_RECENT_THREADS,c('MessengerInbox2UnitType').ACTIVE_NOW,c('MessengerInbox2UnitType').PYMM,c('MessengerInbox2UnitType').BIRTHDAYS,c('MessengerInbox2UnitType').ALL_REMAINING_THREADS];h=babelHelpers.inherits(o,c('React').Component);i=h&&h.prototype;function o(q){i.constructor.call(this,q);p.call(this);var r=this.props.messengerModules.messenger_inbox_units.edges||[],s=null,t=r.reduce(function(w,x){if(x.node.id===c('MessengerInbox2UnitType').MOST_RECENT_THREADS)s=x.node.messenger_inbox_unit_config;if(n.includes(x.node.id)){return w.concat(x.node.id);}else return w;},[]),u=t.length,v=k;if(s)v=this.$ModularInboxView1(s.max_hours_back,s.min_num_threads_to_show,s.max_num_threads_to_show);this.state={numRecentThreads:v,numDisplayedModules:u};}o.prototype.$ModularInboxView1=function(q,r,s){var t=0;this.props.threads.map(function(u){if((Date.now()-u.last_message_timestamp)/l<q)t+=1;});if(t>s){return s;}else if(t<r)return r;return t;};o.prototype.render=function(){if(this.state.numDisplayedModules<=2){return this.renderLegacyThreadlist();}else return this.renderModules();};o.prototype.renderModules=function(){var q=this.props.messengerModules.messenger_inbox_units.edges||[],r=q.map(function(s){switch(s.node.id){case c('MessengerInbox2UnitType').MOST_RECENT_THREADS:return (c('React').createElement(c('ModularInboxRecentThreadsModule.react'),{recentThreadsData:s.node,key:s.node.id,activeThreadID:this.props.activeThreadID,focusedThreadID:this.props.focusedThreadID,isThreadActionMenuFocused:this.props.isThreadActionMenuFocused,onFocusHandler:this.props.onFocusHandler,onScrollIntoViewHandler:this.props.onScrollIntoViewHandler,registerModularInboxData:this.props.registerModularInboxData,threads:this.props.threads.slice(0,this.state.numRecentThreads),viewer:this.props.viewer}));case c('MessengerInbox2UnitType').ACTIVE_NOW:return (c('React').createElement(c('ModularInboxActiveNowModule.react'),{activeNowData:s.node,key:s.node.id,onHideHandler:this.$ModularInboxView2,registerModularInboxData:this.props.registerModularInboxData}));case c('MessengerInbox2UnitType').PYMM:return (c('React').createElement(c('ModularInboxFavoritesModule.react'),{favoritesData:s.node,key:s.node.id,onHideHandler:this.$ModularInboxView2,registerModularInboxData:this.props.registerModularInboxData}));case c('MessengerInbox2UnitType').BIRTHDAYS:return (c('React').createElement(c('ModularInboxBirthdaysModule.react'),{birthdayData:s.node,key:s.node.id,onHideHandler:this.$ModularInboxView2,registerModularInboxData:this.props.registerModularInboxData}));case c('MessengerInbox2UnitType').ALL_REMAINING_THREADS:return (c('React').createElement(c('ModularInboxRemainingThreadsModule.react'),{remainingThreadsData:s.node,key:s.node.id,activeThreadID:this.props.activeThreadID,focusedThreadID:this.props.focusedThreadID,isThreadActionMenuFocused:this.props.isThreadActionMenuFocused,onFocusHandler:this.props.onFocusHandler,onScrollIntoViewHandler:this.props.onScrollIntoViewHandler,registerModularInboxData:this.props.registerModularInboxData,threads:this.props.threads.slice(this.state.numRecentThreads,this.props.threads.length),viewer:this.props.viewer}));default:return null;}}.bind(this));return (c('React').createElement(c('MessengerResponsiveBlock.react'),{breakpointsToggles:function s(t){return [t];}},function(s){var t=s[0];if(t===null)return null;if(t>m){return (c('React').createElement('div',null,r));}else return this.renderLegacyThreadlist();}.bind(this)));};o.prototype.renderLegacyThreadlist=function(){var q=this.props.threads.map(function(r){return (c('React').createElement(c('MessengerThreadlistRowContainer.react'),{isActive:r.thread_id===this.props.activeThreadID,isFocused:r.thread_id===this.props.focusedThreadID,isActionsFocused:this.props.isThreadActionMenuFocused,isTabbable:!!(r.thread_id===this.props.activeThreadID&&!this.props.focusedThreadID)||r.thread_id===this.props.focusedThreadID,key:r.thread_id,onFocus:this.props.onFocusHandler,onScrollIntoView:this.props.onScrollIntoViewHandler,thread:r,viewer:this.props.viewer}));}.bind(this));return (c('React').createElement('div',null,q));};o.propTypes={messengerModules:j.object.isRequired,activeThreadID:j.string,focusedThreadID:j.string,isThreadActionMenuFocused:j.bool.isRequired,onFocusHandler:j.func.isRequired,onScrollIntoViewHandler:j.func.isRequired,registerModularInboxData:j.func.isRequired,threads:j.arrayOf(j.instanceOf(c('ImmutableObject'))).isRequired,viewer:j.string.isRequired};var p=function q(){this.$ModularInboxView2=function(){var r=this.state.numDisplayedModules;this.setState({numDisplayedModules:r-1});}.bind(this);};f.exports=c('Relay').createContainer(o,{fragments:{messengerModules:function q(){return function(r,s,t,u,v,w){return {children:[{calls:[{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallValue',callValue:10}}],children:[{children:[{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'max_hours_back',kind:'Field',metadata:{},type:'Int'},{fieldName:'min_num_threads_to_show',kind:'Field',metadata:{},type:'Int'},{fieldName:'max_num_threads_to_show',kind:'Field',metadata:{},type:'Int'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerInbox2RecentUnitConfig',type:'MessengerInbox2RecentUnitConfig'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],fieldName:'messenger_inbox_unit_config',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true},type:'MessengerInboxUnitConfig'},c('RelayQL').__frag(r),c('RelayQL').__frag(s),c('RelayQL').__frag(t),c('RelayQL').__frag(u),c('RelayQL').__frag(v),c('RelayQL').__frag(w)]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'MessengerInboxUnit'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessengerInboxUnitsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'messenger_inbox_units',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'MessengerInboxUnitsConnection'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'ModularInboxView_react_MessengerModulesRelayQL',type:'Viewer'};}(c('ModularInboxRecentThreadsModule.react').getFragment('recentThreadsData'),c('ModularInboxRemainingThreadsModule.react').getFragment('remainingThreadsData'),c('ModularInboxModuleHeader.react').getFragment('headerData'),c('ModularInboxFavoritesModule.react').getFragment('favoritesData'),c('ModularInboxBirthdaysModule.react').getFragment('birthdayData'),c('ModularInboxActiveNowModule.react').getFragment('activeNowData'));}}});}),null);
__d('ModularInboxViewRoute',['RelayQL','RelayRoute'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='ModularInboxViewRoute';j.queries={messengerModules:function k(l){return function(m){return {children:[].concat.apply([],[c('RelayQL').__frag(m)]),fieldName:'viewer',kind:'Query',metadata:{},name:'ModularInboxViewRoute',type:'Viewer'};}(l.getFragment('messengerModules'));}};f.exports=j;}),null);
__d('ModularInboxViewContainer.react',['cx','ImmutableObject','MessengerSpinner.react','ModularInboxView.react','ModularInboxViewRoute','React','Relay'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('Relay').RootContainer,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$ModularInboxViewContainer1=function(s){return (c('React').createElement(c('ModularInboxView.react'),babelHelpers['extends']({},s,this.props)));}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(k,{Component:c('ModularInboxView.react'),route:new (c('ModularInboxViewRoute'))(),renderFetched:this.$ModularInboxViewContainer1,renderLoading:function n(){return c('React').createElement('div',{className:"_o__"},c('React').createElement(c('MessengerSpinner.react'),{color:'grey',size:c('MessengerSpinner.react').Sizes.MEDIUM}));},renderFailure:this.$ModularInboxViewContainer2});};m.prototype.$ModularInboxViewContainer2=function(){return null;};m.PropTypes={activeThreadID:l.string,focusedThreadID:l.string,isThreadActionMenuFocused:l.bool.isRequired,onFocusHandler:l.func.isRequired,onScrollIntoViewHandler:l.func.isRequired,registerModularInboxData:l.func.isRequired,threads:l.arrayOf(l.instanceOf(c('ImmutableObject'))).isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('MessengerThreadlist.react',['csx','cx','fbt','invariant','ChatSidebarSheet.react','ImmutableObject','KeyEventController','Link.react','MercuryFilters','MercuryThreadInfo','MessagingTag','MessengerActions','MessengerComposerActions','MessengerConfig','MessengerDialogStore','MessengerFlexScrollableArea.react','MessengerGraphQLSearchTypeahead.react','MessengerInbox2UnitType','MessengerMessageRequestsInfo.react','MessengerNewMessagesNotice.react','MessengerSpinner.react','MessengerThreadListGridWrapper.react','MessengerThreadlistLinkRow.react','MessengerThreadlistMessageRequestsRow.react','MessengerThreadlistNewMessageRow.react','MessengerThreadlistRowContainer.react','MessengerThreadSearchStore','MessengerTypeaheadUtils','MessengerView','ModularInboxLabels','ModularInboxLogger','ModularInboxViewContainer.react','Parent','React','StoreAndPropBasedStateMixin','SubscriptionsHandler','WorkGKs','debounce'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l=c('React').PropTypes,m=10,n=64;function o(r,s,t){if(!(r&&s))return false;var u=r[0]||0,v=s[0]||0;return !!(u&&v&&u.unread_count&&u.thread_id!==t&&(u.unread_count!==v.unread_count||u!==v)&&!c('MercuryThreadInfo').isMuted(u));}function p(event,r){return !!(!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&c('KeyEventController').filterEventTypes(event,r)&&c('KeyEventController').filterEventTargets(event,r)&&!c('Parent').bySelector(event.getTarget(),"._150g"));}var q=c('React').createClass({displayName:'MessengerThreadlist',mixins:[c('StoreAndPropBasedStateMixin')(c('MessengerDialogStore'),c('MessengerThreadSearchStore'))],propTypes:{activeThreadID:l.string,filter:l.string.isRequired,folder:l.string.isRequired,isComposing:l.bool,isLoaded:l.bool,isLoading:l.bool,isNewMessageActive:l.bool,newMessageRequestThreads:l.arrayOf(l.instanceOf(c('ImmutableObject'))).isRequired,onLoadMoreRequest:l.func,renderLoadMore:l.func,threads:l.arrayOf(l.instanceOf(c('ImmutableObject'))).isRequired,viewer:l.string.isRequired},statics:{calculateState:function r(s){return {dialogShown:!!c('MessengerDialogStore').getState().dialogClass};}},_moduleData:{},_subscriptions:null,getInitialState:function r(){return {focusedThreadID:null,isSearchFocused:false,isThreadActionMenuFocused:false,queryString:'',searchResults:[],showNewMessagesNotice:false};},componentDidMount:function r(){var s=new (c('SubscriptionsHandler'))();s.addSubscriptions(c('KeyEventController').registerKey('UP',function(t){return this._handleArrowKey(-1,t);}.bind(this),p),c('KeyEventController').registerKey('DOWN',function(t){return this._handleArrowKey(1,t);}.bind(this),p),c('KeyEventController').registerKey('PAGE_UP',function(t){return this._handleArrowKey(-5,t);}.bind(this)),c('KeyEventController').registerKey('PAGE_DOWN',function(t){return this._handleArrowKey(5,t);}.bind(this)),c('KeyEventController').registerKey('HOME',function(t){return this._handleArrowKey(-this.props.threads.length,t);}.bind(this)),c('KeyEventController').registerKey('END',function(t){return this._handleArrowKey(this.props.threads.length,t);}.bind(this)),c('KeyEventController').registerKey('LEFT',function(t){return this._handleActionsFocus(false,t);}.bind(this)),c('KeyEventController').registerKey('RIGHT',function(t){return this._handleActionsFocus(true,t);}.bind(this)));this._subscriptions=s;if(c('MessengerConfig').ShowModularInbox)this._checkAndUpdateModuleImpressions=c('debounce')(this._checkAndUpdateModuleImpressions,250,this);},componentWillUnmount:function r(){this._subscriptions&&this._subscriptions.release();},componentWillReceiveProps:function r(s){var t=this.refs.scrollable.isScrolledToTop();if(!t&&o(s.threads,this.props.threads,s.activeThreadID)){this.setState({queryString:s.queryString||this.state.queryString,showNewMessagesNotice:true});}else this.setState({queryString:s.queryString||this.state.queryString,showNewMessagesNotice:this.state.showNewMessagesNotice&&!t});},componentDidUpdate:function r(s,t){if(this.state.isSearchFocused!==t.isSearchFocused||this.props.isComposing&&!s.isComposing)this.refs.scrollable&&this.refs.scrollable.scrollToTop();},render:function r(){var s=this.state.showNewMessagesNotice&&!this.state.isSearchFocused,t=j._("Conversaciones"),u={className:"_5iwm"+(this.state.isSearchFocused||!!this.state.queryString?' '+"_5iwn":'')+(' '+"_150g"),enableMessageSearch:true,hasHoverState:false,placeholder:c('WorkGKs').workplace_www_chat_branding?j._("Buscar en Work Chat"):j._("Buscar en Messenger"),excludeGroups:false,excludePages:false,shouldQueryInternalBot:true,shouldQueryVCEndpoint:true,typeaheadViewClassName:"_11_d"},v=this.props.queryString!=null;return (c('React').createElement('div',{className:"_2xhi"},c('React').createElement(c('ChatSidebarSheet.react'),{className:"_p0g"}),c('React').createElement(c('MessengerNewMessagesNotice.react'),{isOpen:s,onClick:this._handleNewMessageNoticeClick}),c('React').createElement(c('MessengerFlexScrollableArea.react'),{onScroll:this._handleScroll,ref:'scrollable'},this.props.folder===c('MessagingTag').INBOX?c('React').createElement(c('MessengerGraphQLSearchTypeahead.react'),babelHelpers['extends']({hideClearButton:this.state.queryString===''&&!v,hideResults:v,isFocused:this.state.isSearchFocused,onBlur:this._handleBlur,onChange:this._handleChange,onClear:this._handleClear,onFocus:this._handleFocus,onScrollIntoView:this._handleScrollIntoView,onSelect:c('MessengerActions').selectThread,queryString:this.state.queryString,viewer:this.props.viewer},u)):null,this.props.folder===c('MessagingTag').PENDING?c('React').createElement(c('MessengerMessageRequestsInfo.react'),null):null,c('React').createElement('div',{'aria-label':t,className:this.state.isSearchFocused&&!v?"accessible_elem":'',role:'navigation'},this.props.folder===c('MessagingTag').INBOX&&this.props.newMessageRequestThreads.length?c('React').createElement(c('MessengerThreadlistMessageRequestsRow.react'),{newMessageRequestThreads:this.props.newMessageRequestThreads,viewer:this.props.viewer}):null,this.props.isComposing?c('React').createElement(c('MessengerThreadlistNewMessageRow.react'),{isActive:this.props.isNewMessageActive,onClose:this._handleCloseNewMessage}):null,this._renderInbox(v),this.props.folder===c('MessagingTag').PENDING?c('React').createElement(c('MessengerThreadlistLinkRow.react'),{onClick:this._handleFilteredRequestsClick}):null,this.props.renderLoadMore?this.props.renderLoadMore():this._renderLoadMoreLink()))));},_renderInbox:function r(s){if(this.props.threads.length===0)return this._renderLegacyInbox();if(s)return this._renderLegacyInbox();if(this.props.folder===c('MessagingTag').INBOX&&this.props.filter===c('MercuryFilters').ALL)if(c('MessengerConfig').ShowModularInbox){return this._renderInbox2();}else return this._renderLegacyInbox();return this._renderLegacyInbox();},_renderEmptyInbox:function r(){var s='';switch(this.props.folder){case c('MessagingTag').INBOX:s=this.props.filter===c('MercuryFilters').UNREAD?j._("No se han encontrado mensajes no le\u00eddos."):j._("No se ha encontrado ning\u00fan mensaje.");break;case c('MessagingTag').PENDING:s=j._("No se han encontrado solicitudes de mensaje.");break;case c('MessagingTag').OTHER:s=j._("No se han encontrado solicitudes filtradas.");break;default:break;}var t=this.props.folder!==c('MessagingTag').INBOX||this.props.filter!==c('MercuryFilters').ALL?c('React').createElement(c('Link.react'),{onClick:this._handleReturnToInboxClick},j._("Volver a la bandeja de entrada.")):null;return (c('React').createElement('div',{className:"_3blk"},s,c('React').createElement('div',{className:"_3bll"},t)));},_renderLegacyInbox:function r(){if(this.props.threads.length===0){return this._renderEmptyInbox();}else return (c('React').createElement(c('MessengerThreadListGridWrapper.react'),{label:c('ModularInboxLabels').conversationList},this.props.threads.map(function(s){return this._renderThread(s);}.bind(this))));},_renderInbox2:function r(){return (c('React').createElement(c('ModularInboxViewContainer.react'),{activeThreadID:this.props.activeThreadID,focusedThreadID:this.state.focusedThreadID,isThreadActionMenuFocused:this.state.isThreadActionMenuFocused,onFocusHandler:this._handleThreadFocus,onScrollIntoViewHandler:this._handleScrollIntoView,registerModularInboxData:this._registerModularInboxData,threads:this.props.threads,viewer:this.props.viewer}));},_renderThread:function r(s){return (c('React').createElement(c('MessengerThreadlistRowContainer.react'),{isActive:s.thread_id===this.props.activeThreadID,isFocused:s.thread_id===this.state.focusedThreadID,isActionsFocused:this.state.isThreadActionMenuFocused,isTabbable:!!(s.thread_id===this.props.activeThreadID&&!this.state.focusedThreadID)||s.thread_id===this.state.focusedThreadID,key:s.thread_id,onFocus:this._handleThreadFocus,onScrollIntoView:this._handleScrollIntoView,thread:s,viewer:this.props.viewer}));},_renderLoadMoreLink:function r(){if(this.props.isLoaded)return null;if(this.props.isLoading)return (c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('MessengerSpinner.react'),null)));return (c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('Link.react'),{href:'#',onClick:this._handleLoadMoreClick,tabIndex:-1},j._("Mostrar mensajes anteriores"))));},_handleScroll:function r(){if(this.state.isSearchFocused&&this.props.isLoaded)return;if(this.refs.scrollable.isScrolledToBottom())this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();if(this.refs.scrollable.isScrolledToTop()&&this.state.showNewMessagesNotice)this.setState({showNewMessagesNotice:false});if(c('MessengerConfig').ShowModularInbox)this._checkAndUpdateModuleImpressions();},_checkAndUpdateModuleImpressions:function r(){var s=this.refs.scrollable.getArea().getElement().getBoundingClientRect();for(var t in this._moduleData){var u=this._moduleData[t],v=u.ref.getBoundingClientRect();if(s.bottom-v.top>n&&v.bottom-s.top>n){var w=[];if(t===c('MessengerInbox2UnitType').PYMM||t===c('MessengerInbox2UnitType').ACTIVE_NOW){for(var x in u.refs){var y=u.refs[x].getBoundingClientRect();if(y.right<s.right&&y.left>s.left)w.push(x);}}else for(var z in u.refs){var aa=u.refs[z].getBoundingClientRect();if(aa.top>s.top-m&&aa.bottom<s.bottom+m)w.push(z);}c('ModularInboxLogger').logItemImpression(u.loggingData,t,w);}}},_registerModularInboxData:function r(s,t){this._moduleData[s]=t;},_handleLoadMoreClick:function r(s){s.preventDefault();this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();},_handleNewMessageNoticeClick:function r(s){s.preventDefault();this.setState({showNewMessagesNotice:false});this.refs.scrollable.scrollToTop();},_handleArrowKey:function r(s,event){if(event.altKey&&c('Parent').bySelector(event.target,"._4rv3")){if(this.state.dialogShown)return;if(this.props.isNewMessageActive){if(s===1&&this.props.threads[0])c('MessengerActions').selectThread(this.props.threads[0].thread_id);return;}var t=this.props.threads.findIndex(function(v){return v.thread_id===this.props.activeThreadID;}.bind(this));if(t===-1)return;var u=this.props.threads[t+s];if(u){c('MessengerActions').selectThread(u.thread_id);}else if(this.props.isComposing&&t===0&&s===-1)c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);if(t===this.props.threads.length-1)this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();}else if(this.state.focusedThreadID&&c('Parent').bySelector(event.target,"._1ht1")){event.preventDefault();this._updateThreadFocus(s);}},_handleActionsFocus:function r(s,event){event.preventDefault();this.setState({isThreadActionMenuFocused:s});},_handleThreadFocus:function r(s){this.setState({focusedThreadID:s});},_updateThreadFocus:function r(s){var t=-1;this.props.threads.some(function(v,w){if(v.thread_id===this.state.focusedThreadID){t=w;return true;}}.bind(this));var u=Math.min(Math.max(0,t+s),this.props.threads.length-1);this.setState({focusedThreadID:this.props.threads[u].thread_id});},_handleFocus:function r(){this.setState({isSearchFocused:true});},_handleBlur:function r(){this.setState({isSearchFocused:false,queryString:''});},_handleChange:function r(event){event.target instanceof HTMLInputElement||k(0);this.setState({queryString:event.target.value});},_handleClear:function r(){this.setState({queryString:''});this.props.clearQuery&&this.props.clearQuery();},_handleScrollIntoView:function r(s){c('MessengerTypeaheadUtils').scrollEntryIntoView(s,this.refs.scrollable);},_handleCloseNewMessage:function r(s){s.stopPropagation();c('MessengerComposerActions').exitComposeState();if(this.props.isNewMessageActive){var t=this.props.threads.find(function(u){return u.unread_count===0;});c('MessengerActions').selectThread(t?t.thread_id:null);}},_handleFilteredRequestsClick:function r(s){s.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').OTHER);},_handleReturnToInboxClick:function r(s){s.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').INBOX);c('MessengerActions').changeFilter(c('MercuryFilters').ALL);}});f.exports=q;}),null);
__d('MessengerRecentContainer.react',['MercuryAPIArgsSource','MercuryThreadlistContainer.react','MessengerComposerSteps','MessengerComposerStore','MessengerThreadlist.react','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'MessengerRecentContainer',mixins:[c('PureStoreBasedStateMixin')(c('MessengerComposerStore'))],propTypes:{activeThreadID:h.string,filter:h.string.isRequired,folder:h.string.isRequired,viewer:h.string.isRequired},statics:{calculateState:function j(){return {isComposing:c('MessengerComposerStore').getState().step!==c('MessengerComposerSteps').NULL};}},render:function j(){return (c('React').createElement(c('MercuryThreadlistContainer.react'),{ChildClass:c('MessengerThreadlist.react'),activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isComposing:this.state.isComposing,isNewMessageActive:this.props.isNewMessageActive,source:c('MercuryAPIArgsSource').WEBMESSENGER,viewer:this.props.viewer}));}});f.exports=i;}),null);
__d('MessengerSearchContainer.react',['cx','fbt','Link.react','MessengerActions','MessengerDialogStore','MessengerSpinner.react','MessengerThreadlist.react','MessengerThreadSearchActions','MessengerThreadSearchStore','MessengerView','React','SubscriptionsHandler','StoreAndPropBasedStateMixin','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerSearchContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('MessengerDialogStore'),c('MessengerThreadSearchStore'))],propTypes:{activeThreadID:j.string,filter:j.string.isRequired,folder:j.string.isRequired,isComposing:j.bool,isLoaded:j.bool,isLoading:j.bool,isNewMessageActive:j.bool,viewer:j.string.isRequired},statics:{calculateState:function l(m){var n=c('MessengerThreadSearchStore').getState();return {dialogShown:!!c('MessengerDialogStore').getState().dialogClass,threads:n.threads?n.threads.toArray():[],threadsExhausted:n.threadsExhausted,loading:n.loading,query:n.query};}},_subscriptions:null,render:function l(){return (c('React').createElement(c('MessengerThreadlist.react'),babelHelpers['extends']({},this.props,{clearQuery:this._handleClear,isLoaded:!this.state.loading&&!!this.state.threads,isLoading:this.state.loading,isSearching:false,newMessageRequestThreads:[],onLoadMoreRequest:c('MessengerThreadSearchActions').loadMoreThreads,onQuery:c('MessengerActions').changeQueryAll,onSearchResults:c('emptyFunction'),p2pJewelBannerContainer:null,queryString:this.state.query,renderLoadMore:this._renderLoadMoreLink,threads:this.state.threads})));},_renderLoadMoreLink:function l(){if(this.state.threadsExhausted)return (c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('Link.react'),{href:'#',onClick:this._handleClear},i._("No se han encontrado conversaciones"))));if(this.state.loading)return (c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('MessengerSpinner.react'),null)));return (c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('Link.react'),{href:'#',onClick:c('MessengerThreadSearchActions').loadMoreThreads,tabIndex:-1},i._("Cargar m\u00e1s"))));},_handleClear:function l(){c('MessengerActions').changeMasterView(c('MessengerView').MASTER.RECENT);}});f.exports=k;}),null);
__d('MessengerMasterView.react',['cx','BootloadOnRender.react','JSResource','LazyComponent.react','MessengerMasterViewHeader.react','MessengerRecentContainer.react','MessengerSearchContainer.react','MessengerSpinner.react','MessengerView','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement('div',null,c('React').createElement(c('MessengerMasterViewHeader.react'),{filter:this.props.filter,folder:this.props.folder,view:this.props.view,viewer:this.props.viewer}),this.$MessengerMasterView1()));};l.prototype.$MessengerMasterView1=function(){var m=this.props.detailView===c('MessengerView').DETAIL.COMPOSE;switch(this.props.view){case c('MessengerView').MASTER.PEOPLE:return (c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{activeThreadID:m?null:this.props.activeThreadID,viewer:this.props.viewer}),loader:c('JSResource')('MessengerPeopleList.react').__setRef('MessengerMasterView.react'),placeholder:c('React').createElement('div',{className:"_2pif",style:{textAlign:'center'}},c('React').createElement(c('MessengerSpinner.react'),null))}));case c('MessengerView').MASTER.RECENT:return (c('React').createElement(c('MessengerRecentContainer.react'),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:m,viewer:this.props.viewer}));case c('MessengerView').MASTER.SEARCH:return (c('React').createElement(c('MessengerSearchContainer.react'),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:m,viewer:this.props.viewer}));default:throw new Error('Unknown master view: '+this.props.view);}};function l(){i.apply(this,arguments);}l.propTypes={activeThreadID:k.string,detailView:k.string,filter:k.string,folder:k.string.isRequired,view:k.string.isRequired,viewer:k.string.isRequired};f.exports=l;}),null);
__d('messengerMasterViewReact',['MessengerMasterView.react','reactRe','utilsRe'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){var o={activeThreadID:c('utilsRe').optionToJsNullUndefined(i),detailView:c('utilsRe').optionToJsNullUndefined(j),filter:c('utilsRe').optionToJsNullUndefined(k),folder:l,view:m,viewer:n},p=c('MessengerMasterView.react');return function(q,r,s,t){return c('reactRe').wrapPropsShamelessly(p,o,q,r,s,t);};}g.createElement=h;}),null);
__d('p2PDialogContainerReact',['P2PDialogContainer.react','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h={},i=c('P2PDialogContainer.react');function j(k,l,m,n){return c('reactRe').wrapPropsShamelessly(i,h,k,l,m,n);}g.createElement=j;}),null);
__d('pagesPlatformDialogContainerReact',['PagesPlatformDialogContainer.react','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h={},i=c('PagesPlatformDialogContainer.react');function j(k,l,m,n){return c('reactRe').wrapPropsShamelessly(i,h,k,l,m,n);}g.createElement=j;}),null);
__d('messengerReact',['cx','CurrentUser','fBPaymentsDialogContainerReact','bs_js_primitive','mNCommerceDialogContainerReact','MercuryConfig','MessengerActions','messengerBannerReact','messengerBugNubReact','messengerDetailViewReact','messengerDialogContainerReact','MessengerDiodeWelcomeDialog.react','messengerErrorBoundaryReact','messengerMasterViewReact','MessengerStateStore','p2PDialogContainerReact','pagesPlatformDialogContainerReact','PureStoreBasedStateMixin','React','ReactComponentWithPureRenderMixin','reactRe','utilsRe'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').Component[8];function j(u){return u.preventDefault();}function k(){c('MessengerStateStore').unregister();return 0;}function l(u){if(c('utilsRe').isSomeTrue(u[2])&&!c('MercuryConfig').WebMessengerTriode)c('MessengerActions').showDialog(c('MessengerDiodeWelcomeDialog.react'),{});return 0;}function m(u,v){var w=+c('CurrentUser').isEmployee(),x;if(w!==0){var y=u[0],z=u[0];x=c('messengerBugNubReact').createElement([y?c('utilsRe').isTruthy(y[0].isBetaEnabled):0],z?[z[0].unixName]:0)(0,0,0,0);}else x=null;return c('React').createElement("div",undefined,c('messengerBannerReact').createElement(u[1],u[3],u[2])(0,0,0,0),c('React').createElement("div",{className:"_4sp8 _li",onDragEnter:j,onDragOver:j,onDrop:j},c('React').createElement("div",{className:"_1enh"},c('messengerErrorBoundaryReact').createElement(0,["conversation list"])([c('messengerMasterViewReact').createElement(c('bs_js_primitive').js_from_nullable_def(v.activeThreadID),c('bs_js_primitive').js_from_nullable_def(v.detailView),[v.filter],v.folder,v.masterView,c('CurrentUser').getID())(0,0,0,0),0],0,0,0),x),c('messengerDetailViewReact').createElement(c('bs_js_primitive').js_from_nullable_def(v.activeThreadID),c('bs_js_primitive').js_from_nullable_def(v.mid),c('bs_js_primitive').js_from_nullable_def(v.query),c('bs_js_primitive').js_from_nullable_def(v.detailView),c('CurrentUser').getID())(0,0,0,0),c('messengerDialogContainerReact').createElement(0,0,0,0),c('mNCommerceDialogContainerReact').createElement(0,0,0,0),c('p2PDialogContainerReact').createElement(0,0,0,0),c('pagesPlatformDialogContainerReact').createElement(0,0,0,0),c('fBPaymentsDialogContainerReact').createElement(0,0,0,0)));}function n(u){return [c('bs_js_primitive').js_from_nullable_def(u.employeeData),u.mobileAppInfo,c('utilsRe').nullUndefinedBooleanToOptionBool(u.isFirstRedirect),c('bs_js_primitive').js_from_nullable_def(u.promotionData),u.viewer];}var o=i[1],p=i[2],q=i[4],r=i[5],s=[o,p,q,r,"MessengerReact",j,k,l,m,n],t=c('React').createClass({displayName:"MessengerReact",mixins:[c('ReactComponentWithPureRenderMixin'),c('PureStoreBasedStateMixin')(c('MessengerStateStore'))],statics:{calculateState:function u(){return c('MessengerStateStore').getState();}},componentWillUnmount:function u(){c('MessengerStateStore').unregister();return 0;},componentDidMount:function u(){var v=this;return l(n(v.props));},render:function u(){var v=this,w=n(v.props),x=v.state;return m(w,x);}});g.Messenger=s;g.comp=t;}),null);
__d('MessengerMount',['cx','CSS','ChannelConnection','CurrentUser','HotLikeSound','MercuryBlockedParticipants','MercuryChannelHandlerDEPRECATED','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryOrderedThreadlist','MercuryParticipants','MercuryServerPayloadPreprocessor','MercurySyncEnvironment','MercuryThreads','MercuryThreadIDMap','MercuryUnreadState','MercuryUnseenState','messengerReact','MessengerActions','MessengerComposerActions','MessengerBrowserAlerts','MessengerComposerStore','MessengerConfig','MessengerEnvironment','MessengerMDotMeReferralStore','MessengerPage','MessengerRTCMessageHandler','MessengerSettingsStore','MessengerStateStore','MessengerThreadSearchStore','MessengerURIListener','MessengerURIConstants','MessengerView','OmniMStore','React','ReactDOM','MercuryConfig','ServiceWorkerRegistration','URI','goURI','OrderedFriendsList','PageHooks','ChannelManager'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryDelayedRoger').get(),j=c('messengerReact').comp;c('OrderedFriendsList');c('PageHooks');c('ChannelManager');var k={mount:function o(p,q){c('MessengerEnvironment').setMessengerUI(true);c('MessengerPage').emit(c('MessengerPage').Events.JS_LOADED);var r=c('CurrentUser').getID();l(r);m(r);n(r,q);c('MessengerPage').emit(c('MessengerPage').Events.DATA_INITIALIZED);c('CSS').addClass(document.documentElement,"_51l0");c('CSS').addClass(document.body,"_z4_");if(c('MessengerConfig').FlexBubblesEnabled)c('CSS').addClass(document.body,"_5v7-");if(c('MessengerConfig').SFFontEnabled)c('CSS').addClass(document.body,"__6g");if(c('MessengerConfig').SegoeUIDisabled)c('CSS').addClass(document.body,"_2por");c('HotLikeSound').setCheckSoundEnabledFunc(function(){return c('MessengerSettingsStore').getSettings().sound_enabled;});c('ReactDOM').render(c('React').createElement(j,{employeeData:q.employeeData,facebookNotificationTokens:q.facebookNotificationTokens,mobileAppInfo:q.mobileAppInfo,promotionData:q.promotionData,isFirstRedirect:!c('MercuryConfig').MessengerDotComUser,viewer:r}),p,function(){c('MessengerPage').emit(c('MessengerPage').Events.APP_MOUNTED);});if(q.MessengerServiceWorkerAction==='install'&&q.serviceWorker){c('ServiceWorkerRegistration').registerWorkerIfUnregistered(q.serviceWorker);}else if(q.MessengerServiceWorkerAction==='remove')c('ServiceWorkerRegistration').unregisterControllingWorker();}};function l(o){i;c('MercuryDeliveryReceipts').getForFBID(o);c('MercuryDeliveryState').getForFBID(o);c('MercuryOrderedThreadlist').getForFBID(o);c('MercuryParticipants');c('MercuryBlockedParticipants').getForFBID(o);c('MercuryThreads').getForFBID(o);c('MercuryUnreadState').getForFBID(o);c('MercuryUnseenState').getForFBID(o);c('MessengerComposerStore');c('MessengerMDotMeReferralStore');c('MessengerSettingsStore');c('MessengerStateStore');c('MessengerThreadSearchStore').getForFBID(o);}function m(o){c('MessengerURIListener').start();c('MercuryChannelHandlerDEPRECATED').getForFBID(o).turnOn();c('MercurySyncEnvironment').setUp();c('MessengerBrowserAlerts').init(o);c('MessengerRTCMessageHandler').init();c('ChannelConnection');c('OmniMStore').setUp();}function n(o,p){var q=c('MercuryServerPayloadPreprocessor').getForFBID(o);q.handleUpdate(p.mercuryPayload);var r=new (c('URI'))(window.location.href);c('goURI')(r,false,true);if(r.getPath().endsWith(c('MessengerURIConstants').COMPOSE_SUBPATH))return;c('MessengerActions').changeMDotMeReferral(p.mDotMeReferral,p.mDotMeReferralThreadKey);var s=c('MercuryThreadIDMap').get(),t=s.getClientIDFromServerIDNow(p.lastReadThreadKey);if(t){c('MessengerComposerActions').exitComposeState();c('MessengerActions').selectThread(t);}else if(r.getPath()==='/')c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);}f.exports=k;}),null);